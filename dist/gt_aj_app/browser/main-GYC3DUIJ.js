import{$ as Ve,$a as gc,A as Ds,Aa as Ms,B as Xa,Ba as Ls,C as on,Ca as ae,D as Bn,Da as ap,E as $n,Ea as cp,F as Jf,Fa as up,G as Za,Ga as cc,H as Lt,Ha as uc,I as Xf,Ia as lp,J as Yr,Ja as lc,K as Vt,Ka as hc,L as ec,La as qn,M as Zf,Ma as dc,N as ep,Na as Vs,O as tp,Oa as fc,P as Ps,Pa as Fs,Q as Xe,Qa as Us,R as ks,Ra as pc,S as pe,Sa as mc,T as he,Ta as ln,U as K,Ua as ei,V as Ze,Va as hp,W as np,Wa as js,X as ce,Xa as dp,Y as tc,Ya as Bs,Z as G,Za as ti,_ as V,_a as fp,a as L,aa as Jr,ab as $s,b as Ee,ba as an,bb as pp,c as zf,ca as et,cb as mp,d as Ot,da as cn,db as yc,e as I,ea as Ue,eb as gp,f as Gf,fa as rp,fb as yp,g as Wf,ga as Ns,gb as ve,h as jn,ha as Ft,hb as qs,i as Ka,ia as nc,ib as _c,j as Ha,ja as rc,jb as _p,k as _t,ka as Ut,kb as vp,l as qe,la as ic,lb as ni,m as Kf,ma as jt,mb as Ip,n as Hf,na as un,o as Mt,oa as ip,p as Qa,pa as xs,q as Ya,qa as sp,r as Ja,ra as tt,s as ze,sa as sc,t as j,ta as Xr,u as Hr,ua as Os,v as Qf,va as Zr,w as Yf,wa as oc,x as re,xa as st,y as Qr,ya as ac,z as Ge,za as op}from"./chunk-W45GN2IY.js";var Gs=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),a=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(c=>s.indexOf(c)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Cp=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Cp||{}),vc=class{constructor(e,t=Dp.Ok,r="OK"){this.headers=e.headers||new Gs,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Ws=class n extends vc{constructor(e={}){super(e),this.type=Cp.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var Dp=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(Dp||{});var Ov=new ce("");var wp="b",Ep="h",Tp="s",bp="st",Ap="u",Sp="rt",zs=new ce(""),Mv=["GET","HEAD"];function Lv(n,e){let _=V(zs),{isCacheActive:t}=_,r=zf(_,["isCacheActive"]),{transferCache:i,method:s}=n;if(!t||s==="POST"&&!r.includePostRequests&&!i||s!=="POST"&&!Mv.includes(s)||i===!1||r.filter?.(n)===!1)return e(n);let a=V(Os),c=Fv(n),l=a.get(c,null),d=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(d=i.includeHeaders),l){let{[wp]:E,[Sp]:R,[Ep]:N,[Tp]:x,[bp]:k,[Ap]:$}=l,W=E;switch(R){case"arraybuffer":W=new TextEncoder().encode(E).buffer;break;case"blob":W=new Blob([E]);break}let X=new Gs(N);return j(new Ws({body:W,headers:X,status:x,statusText:k,url:$}))}let p=ni(V(tt));return e(n).pipe(pe(E=>{E instanceof Ws&&p&&a.set(c,{[wp]:E.body,[Ep]:Vv(E.headers,d),[Tp]:E.status,[bp]:E.statusText,[Ap]:E.url||"",[Sp]:n.responseType})}))}function Vv(n,e){if(!e)return{};let t={};for(let r of e){let i=n.getAll(r);i!==null&&(t[r]=i)}return t}function Rp(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function Fv(n){let{params:e,method:t,responseType:r,url:i}=n,s=Rp(e),a=n.serializeBody();a instanceof URLSearchParams?a=Rp(a):typeof a!="string"&&(a="");let c=[t,r,i,a,s].join("|"),l=Uv(c);return l}function Uv(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function Pp(n){return[{provide:zs,useFactory:()=>(Ls("NgHttpTransferCache"),L({isCacheActive:!0},n))},{provide:Ov,useValue:Lv,multi:!0,deps:[Os,zs]},{provide:Bs,multi:!0,useFactory:()=>{let e=V(ti),t=V(zs);return()=>{fp(e).then(()=>{t.isCacheActive=!1})}}}]}var Ec=class extends yp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Tc=class n extends Ec{static makeCurrent(){gp(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Bv();return t==null?null:$v(t)}resetBaseElement(){ri=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _c(document.cookie,e)}},ri=null;function Bv(){return ri=ri||document.querySelector("base"),ri?ri.getAttribute("href"):null}function $v(n){return new URL(n,document.baseURI).pathname}var qv=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),bc=new ce(""),xp=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(a=>a.supports(r)),!i)throw new he(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(G(bc),G(ae))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Ks=class{constructor(e){this._doc=e}},Ic="ng-app-id",Op=(()=>{let e=class e{constructor(r,i,s,a={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ni(a),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Ic}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let a=s.get(r);return a.usage+=i,a.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,a=s?.get(i);if(a?.parentNode===r)return s.delete(i),a.removeAttribute(Ic),a;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=i,this.platformIsServer&&c.setAttribute(Ic,this.appId),r.appendChild(c),c}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),a=this.styleRef,c=a.get(i)?.elements;c?c.push(s):a.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(G(ve),G(xs),G(Xr,8),G(tt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),wc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Rc=/%COMP%/g,Mp="%COMP%",zv=`_nghost-${Mp}`,Gv=`_ngcontent-${Mp}`,Wv=!0,Kv=new ce("",{providedIn:"root",factory:()=>Wv});function Hv(n){return Gv.replace(Rc,n)}function Qv(n){return zv.replace(Rc,n)}function Lp(n,e){return e.map(t=>t.replace(Rc,n))}var Hs=(()=>{let e=class e{constructor(r,i,s,a,c,l,d,p=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=l,this.ngZone=d,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=ni(l),this.defaultRenderer=new ii(r,c,d,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Jr.ShadowDom&&(i=Ee(L({},i),{encapsulation:Jr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Qs?s.applyToHost(r):s instanceof si&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,a=s.get(i.id);if(!a){let c=this.doc,l=this.ngZone,d=this.eventManager,p=this.sharedStylesHost,_=this.removeStylesOnCompDestroy,E=this.platformIsServer;switch(i.encapsulation){case Jr.Emulated:a=new Qs(d,p,i,this.appId,_,c,l,E);break;case Jr.ShadowDom:return new Ac(d,p,r,i,c,l,this.nonce,E);default:a=new si(d,p,i,_,c,l,E);break}s.set(i.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(G(xp),G(Op),G(xs),G(Kv),G(ve),G(tt),G(ae),G(Xr))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),ii=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(wc[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(kp(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(kp(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new he(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=wc[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=wc[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Zr.DashCase|Zr.Important)?e.style.setProperty(t,r,i&Zr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Zr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=yc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function kp(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ac=class extends ii{constructor(e,t,r,i,s,a,c,l){super(e,s,a,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=Lp(i.id,i.styles);for(let p of d){let _=document.createElement("style");c&&_.setAttribute("nonce",c),_.textContent=p,this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},si=class extends ii{constructor(e,t,r,i,s,a,c,l){super(e,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?Lp(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Qs=class extends si{constructor(e,t,r,i,s,a,c,l){let d=i+"-"+r.id;super(e,t,r,s,a,c,l,d),this.contentAttr=Hv(d),this.hostAttr=Qv(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Yv=(()=>{let e=class e extends Ks{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(G(ve))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Np=["alt","control","meta","shift"],Jv={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xv={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Zv=(()=>{let e=class e extends Ks{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let a=e.parseEventName(i),c=e.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yc().onAndCancel(r,a.domEventName,c))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let a=e._normalizeKey(i.pop()),c="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),c="code."),Np.forEach(p=>{let _=i.indexOf(p);_>-1&&(i.splice(_,1),c+=p+".")}),c+=a,i.length!=0||a.length===0)return null;let d={};return d.domEventName=s,d.fullKey=c,d}static matchEventFullKeyCode(r,i){let s=Jv[r.key]||r.key,a="";return i.indexOf("code.")>-1&&(s=r.code,a="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Np.forEach(c=>{if(c!==s){let l=Xv[c];l(r)&&(a+=c+".")}}),a+=s,a===i)}static eventCallback(r,i,s){return a=>{e.matchEventFullKeyCode(a,r)&&s.runGuarded(()=>i(a))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(G(ve))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function Vp(n,e){return pp(L({rootComponent:n},eI(e)))}function eI(n){return{appProviders:[...sI,...n?.providers??[]],platformProviders:iI}}function tI(){Tc.makeCurrent()}function nI(){return new ic}function rI(){return ip(document),document}var iI=[{provide:tt,useValue:_p},{provide:sp,useValue:tI,multi:!0},{provide:ve,useFactory:rI,deps:[]}];var sI=[{provide:rp,useValue:"root"},{provide:ic,useFactory:nI,deps:[]},{provide:bc,useClass:Yv,multi:!0,deps:[ve,ae,tt]},{provide:bc,useClass:Zv,multi:!0,deps:[ve]},Hs,Op,xp,{provide:Ms,useExisting:Hs},{provide:Ip,useClass:qv,deps:[]},[]];var Ys=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(G(ve))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Sc=function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n}(Sc||{});function Fp(...n){let e=[],t=new Set,r=t.has(Sc.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:s}of n)t.add(s),i.length&&e.push(i);return Ue([[],mp(),t.has(Sc.NoHttpTransferCache)||r?[]:Pp({}),e])}var q="primary",Ii=Symbol("RouteTitle"),Nc=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Hn(n){return new Nc(n)}function aI(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let a=r[s],c=n[s];if(a.startsWith(":"))i[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function cI(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ot(n[t],e[t]))return!1;return!0}function ot(n,e){let t=n?xc(n):void 0,r=e?xc(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Qp(n[i],e[i]))return!1;return!0}function xc(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Qp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Yp(n){return n.length>0?n[n.length-1]:null}function qt(n){return Qf(n)?n:dp(n)?ze(Promise.resolve(n)):j(n)}var uI={exact:Xp,subset:Zp},Jp={exact:lI,subset:hI,ignored:()=>!0};function jp(n,e,t){return uI[t.paths](n.root,e.root,t.matrixParams)&&Jp[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function lI(n,e){return ot(n,e)}function Xp(n,e,t){if(!dn(n.segments,e.segments)||!Zs(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Xp(n.children[r],e.children[r],t))return!1;return!0}function hI(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Qp(n[t],e[t]))}function Zp(n,e,t){return em(n,e,e.segments,t)}function em(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!dn(i,t)||e.hasChildren()||!Zs(i,t,r))}else if(n.segments.length===t.length){if(!dn(n.segments,t)||!Zs(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Zp(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!dn(n.segments,i)||!Zs(n.segments,i,r)||!n.children[q]?!1:em(n.children[q],e,s,r)}}function Zs(n,e,t){return e.every((r,i)=>Jp[t](n[i].parameters,r.parameters))}var Bt=class{constructor(e=new ee([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Hn(this.queryParams),this._queryParamMap}toString(){return pI.serialize(this)}},ee=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return eo(this)}},hn=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Hn(this.parameters),this._parameterMap}toString(){return nm(this)}};function dI(n,e){return dn(n,e)&&n.every((t,r)=>ot(t.parameters,e[r].parameters))}function dn(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function fI(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===q&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==q&&(t=t.concat(e(i,r)))}),t}var su=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>new no,providedIn:"root"});let n=e;return n})(),no=class{parse(e){let t=new Mc(e);return new Bt(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${oi(e.root,!0)}`,r=yI(e.queryParams),i=typeof e.fragment=="string"?`#${mI(e.fragment)}`:"";return`${t}${r}${i}`}},pI=new no;function eo(n){return n.segments.map(e=>nm(e)).join("/")}function oi(n,e){if(!n.hasChildren())return eo(n);if(e){let t=n.children[q]?oi(n.children[q],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==q&&r.push(`${i}:${oi(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=fI(n,(r,i)=>i===q?[oi(n.children[q],!1)]:[`${i}:${oi(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[q]!=null?`${eo(n)}/${t[0]}`:`${eo(n)}/(${t.join("//")})`}}function tm(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Js(n){return tm(n).replace(/%3B/gi,";")}function mI(n){return encodeURI(n)}function Oc(n){return tm(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function to(n){return decodeURIComponent(n)}function Bp(n){return to(n.replace(/\+/g,"%20"))}function nm(n){return`${Oc(n.path)}${gI(n.parameters)}`}function gI(n){return Object.entries(n).map(([e,t])=>`;${Oc(e)}=${Oc(t)}`).join("")}function yI(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Js(t)}=${Js(i)}`).join("&"):`${Js(t)}=${Js(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var _I=/^[^\/()?;#]+/;function Cc(n){let e=n.match(_I);return e?e[0]:""}var vI=/^[^\/()?;=#]+/;function II(n){let e=n.match(vI);return e?e[0]:""}var wI=/^[^=?&#]+/;function EI(n){let e=n.match(wI);return e?e[0]:""}var TI=/^[^&#]+/;function bI(n){let e=n.match(TI);return e?e[0]:""}var Mc=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ee([],{}):new ee([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[q]=new ee(e,t)),r}parseSegment(){let e=Cc(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(e),new hn(to(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=II(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Cc(this.remaining);i&&(r=i,this.capture(r))}e[to(t)]=to(r)}parseQueryParam(e){let t=EI(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=bI(this.remaining);a&&(r=a,this.capture(r))}let i=Bp(t),s=Bp(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Cc(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new he(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=q);let a=this.parseChildren();t[s]=Object.keys(a).length===1?a[q]:new ee([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new he(4011,!1)}};function rm(n){return n.segments.length>0?new ee([],{[q]:n}):n}function im(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=im(i);if(r===q&&s.segments.length===0&&s.hasChildren())for(let[a,c]of Object.entries(s.children))e[a]=c;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ee(n.segments,e);return AI(t)}function AI(n){if(n.numberOfChildren===1&&n.children[q]){let e=n.children[q];return new ee(n.segments.concat(e.segments),e.children)}return n}function Qn(n){return n instanceof Bt}function SI(n,e,t=null,r=null){let i=sm(n);return om(i,e,t,r)}function sm(n){let e;function t(s){let a={};for(let l of s.children){let d=t(l);a[l.outlet]=d}let c=new ee(s.url,a);return s===n&&(e=c),c}let r=t(n.root),i=rm(r);return e??i}function om(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Dc(i,i,i,t,r);let s=RI(e);if(s.toRoot())return Dc(i,i,new ee([],{}),t,r);let a=CI(s,i,n),c=a.processChildren?ui(a.segmentGroup,a.index,s.commands):cm(a.segmentGroup,a.index,s.commands);return Dc(i,a.segmentGroup,c,t,r)}function ro(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function di(n){return typeof n=="object"&&n!=null&&n.outlets}function Dc(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(p=>`${p}`):`${d}`});let a;n===e?a=t:a=am(n,e,t);let c=rm(im(a));return new Bt(c,s,i)}function am(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=am(s,e,t)}),new ee(n.segments,r)}var io=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ro(r[0]))throw new he(4003,!1);let i=r.find(di);if(i&&i!==Yp(r))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function RI(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new io(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,a)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:c}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:a===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,s]},[]);return new io(t,e,r)}var Wn=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function CI(n,e,t){if(n.isAbsolute)return new Wn(e,!0,0);if(!t)return new Wn(e,!1,NaN);if(t.parent===null)return new Wn(t,!0,0);let r=ro(n.commands[0])?0:1,i=t.segments.length-1+r;return DI(t,i,n.numberOfDoubleDots)}function DI(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new he(4005,!1);i=r.segments.length}return new Wn(r,!1,i-s)}function PI(n){return di(n[0])?n[0].outlets:{[q]:n}}function cm(n,e,t){if(n??=new ee([],{}),n.segments.length===0&&n.hasChildren())return ui(n,e,t);let r=kI(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ee(n.segments.slice(0,r.pathIndex),{});return s.children[q]=new ee(n.segments.slice(r.pathIndex),n.children),ui(s,0,i)}else return r.match&&i.length===0?new ee(n.segments,{}):r.match&&!n.hasChildren()?Lc(n,e,t):r.match?ui(n,0,i):Lc(n,e,t)}function ui(n,e,t){if(t.length===0)return new ee(n.segments,{});{let r=PI(t),i={};if(Object.keys(r).some(s=>s!==q)&&n.children[q]&&n.numberOfChildren===1&&n.children[q].segments.length===0){let s=ui(n.children[q],e,t);return new ee(n.segments,s.children)}return Object.entries(r).forEach(([s,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[s]=cm(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{r[s]===void 0&&(i[s]=a)}),new ee(n.segments,i)}}function kI(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let a=n.segments[i],c=t[r];if(di(c))break;let l=`${c}`,d=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!qp(l,d,a))return s;r+=2}else{if(!qp(l,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Lc(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(di(s)){let l=NI(s.outlets);return new ee(r,l)}if(i===0&&ro(t[0])){let l=n.segments[e];r.push(new hn(l.path,$p(t[0]))),i++;continue}let a=di(s)?s.outlets[q]:`${s}`,c=i<t.length-1?t[i+1]:null;a&&c&&ro(c)?(r.push(new hn(a,$p(c))),i+=2):(r.push(new hn(a,{})),i++)}return new ee(r,{})}function NI(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Lc(new ee([],{}),0,r))}),e}function $p(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function qp(n,e,t){return n==t.path&&ot(e,t.parameters)}var li="imperative",Ae=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ae||{}),We=class{constructor(e,t){this.id=e,this.url=t}},fi=class extends We{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ae.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fn=class extends We{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ae.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Be=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Be||{}),Vc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Vc||{}),$t=class extends We{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ae.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pn=class extends We{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ae.NavigationSkipped}},pi=class extends We{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ae.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},so=class extends We{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ae.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fc=class extends We{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ae.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uc=class extends We{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ae.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jc=class extends We{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ae.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bc=class extends We{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ae.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$c=class{constructor(e){this.route=e,this.type=Ae.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},qc=class{constructor(e){this.route=e,this.type=Ae.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},zc=class{constructor(e){this.snapshot=e,this.type=Ae.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gc=class{constructor(e){this.snapshot=e,this.type=Ae.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wc=class{constructor(e){this.snapshot=e,this.type=Ae.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kc=class{constructor(e){this.snapshot=e,this.type=Ae.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var mi=class{},gi=class{constructor(e){this.url=e}};var Hc=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ho,this.attachRef=null}},ho=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Hc,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),oo=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Qc(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Qc(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Yc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Yc(e,this._root).map(t=>t.value)}};function Qc(n,e){if(n===e.value)return e;for(let t of e.children){let r=Qc(n,t);if(r)return r}return null}function Yc(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Yc(n,t);if(r.length)return r.unshift(e),r}return[]}var je=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Gn(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ao=class extends oo{constructor(e,t){super(e),this.snapshot=t,au(this,e)}toString(){return this.snapshot.toString()}};function um(n){let e=xI(n),t=new qe([new hn("",{})]),r=new qe({}),i=new qe({}),s=new qe({}),a=new qe(""),c=new Yn(t,r,s,a,i,q,n,e.root);return c.snapshot=e.root,new ao(new je(c,[]),e)}function xI(n){let e={},t={},r={},i="",s=new yi([],e,r,i,t,q,n,null,{});return new co("",new je(s,[]))}var Yn=class{constructor(e,t,r,i,s,a,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=a,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(re(d=>d[Ii]))??j(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(e=>Hn(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(e=>Hn(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ou(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&hm(i)&&(r.resolve[Ii]=i.title),r}var yi=class{get title(){return this.data?.[Ii]}constructor(e,t,r,i,s,a,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Hn(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Hn(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},co=class extends oo{constructor(e,t){super(t),this.url=e,au(this,t)}toString(){return lm(this._root)}};function au(n,e){e.value._routerState=n,e.children.forEach(t=>au(n,t))}function lm(n){let e=n.children.length>0?` { ${n.children.map(lm).join(", ")} } `:"";return`${n.value}${e}`}function Pc(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ot(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ot(e.params,t.params)||n.paramsSubject.next(t.params),cI(e.url,t.url)||n.urlSubject.next(t.url),ot(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Jc(n,e){let t=ot(n.params,e.params)&&dI(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Jc(n.parent,e.parent))}function hm(n){return typeof n.title=="string"||n.title===null}var cu=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=q,this.activateEvents=new un,this.deactivateEvents=new un,this.attachEvents=new un,this.detachEvents=new un,this.parentContexts=V(ho),this.location=V(ap),this.changeDetector=V($s),this.environmentInjector=V(Ns),this.inputBinder=V(uu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=r;let s=this.location,c=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new Xc(r,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:d,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=cn({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[nc]});let n=e;return n})(),Xc=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Yn?this.route:e===ho?this.childContexts:this.parent.get(e,t)}},uu=new ce("");function OI(n,e,t){let r=_i(n,e._root,t?t._root:void 0);return new ao(r,e)}function _i(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=MI(n,e,t);return new je(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>_i(n,c)),a}}let r=LI(e.value),i=e.children.map(s=>_i(n,s));return new je(r,i)}}function MI(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return _i(n,r,i);return _i(n,r)})}function LI(n){return new Yn(new qe(n.url),new qe(n.params),new qe(n.queryParams),new qe(n.fragment),new qe(n.data),n.outlet,n.component,n)}var dm="ngNavigationCancelingError";function fm(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Qn(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=pm(!1,Be.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function pm(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[dm]=!0,t.cancellationCode=e,t}function VI(n){return mm(n)&&Qn(n.url)}function mm(n){return!!n&&n[dm]}var FI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=an({type:e,selectors:[["ng-component"]],standalone:!0,features:[ln],decls:1,vars:0,template:function(i,s){i&1&&qn(0,"router-outlet")},dependencies:[cu],encapsulation:2});let n=e;return n})();function UI(n,e){return n.providers&&!n._injector&&(n._injector=up(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lu(n){let e=n.children&&n.children.map(lu),t=e?Ee(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==q&&(t.component=FI),t}function at(n){return n.outlet||q}function jI(n,e){let t=n.filter(r=>at(r)===e);return t.push(...n.filter(r=>at(r)!==e)),t}function wi(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var BI=(n,e,t,r)=>re(i=>(new Zc(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Zc=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Pc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Gn(t);e.children.forEach(s=>{let a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Gn(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Gn(e);for(let a of Object.values(s))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Gn(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Kc(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Gc(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Pc(i),i===s)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Pc(c.route.value),this.activateChildRoutes(e,null,a.children)}else{let c=wi(i.snapshot);a.attachRef=null,a.route=i,a.injector=c,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,r)}},uo=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Kn=class{constructor(e,t){this.component=e,this.route=t}};function $I(n,e,t){let r=n._root,i=e?e._root:null;return ai(r,i,t,[r.value])}function qI(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Xn(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!np(n)?n:e.get(n):r}function ai(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Gn(e);return n.children.forEach(a=>{zI(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,c])=>hi(c,t.getContext(a),i)),i}function zI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,a=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){let l=GI(a,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new uo(r)):(s.data=a.data,s._resolvedData=a._resolvedData),s.component?ai(n,e,c?c.children:null,r,i):ai(n,e,t,r,i),l&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Kn(c.outlet.component,a))}else a&&hi(e,c,i),i.canActivateChecks.push(new uo(r)),s.component?ai(n,null,c?c.children:null,r,i):ai(n,null,t,r,i);return i}function GI(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!dn(n.url,e.url);case"pathParamsOrQueryParamsChange":return!dn(n.url,e.url)||!ot(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jc(n,e)||!ot(n.queryParams,e.queryParams);case"paramsChange":default:return!Jc(n,e)}}function hi(n,e,t){let r=Gn(n),i=n.value;Object.entries(r).forEach(([s,a])=>{i.component?e?hi(a,e.children.getContext(s),t):hi(a,null,t):hi(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Kn(e.outlet.component,i)):t.canDeactivateChecks.push(new Kn(null,i)):t.canDeactivateChecks.push(new Kn(null,i))}function Ei(n){return typeof n=="function"}function WI(n){return typeof n=="boolean"}function KI(n){return n&&Ei(n.canLoad)}function HI(n){return n&&Ei(n.canActivate)}function QI(n){return n&&Ei(n.canActivateChild)}function YI(n){return n&&Ei(n.canDeactivate)}function JI(n){return n&&Ei(n.canMatch)}function gm(n){return n instanceof Yf||n?.name==="EmptyError"}var Xs=Symbol("INITIAL_VALUE");function Jn(){return Xe(n=>Qr(n.map(e=>e.pipe(Lt(1),Ps(Xs)))).pipe(re(e=>{for(let t of e)if(t!==!0){if(t===Xs)return Xs;if(t===!1||t instanceof Bt)return t}return!0}),on(e=>e!==Xs),Lt(1)))}function XI(n,e){return Ge(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return a.length===0&&s.length===0?j(Ee(L({},t),{guardsResult:!0})):ZI(a,r,i,n).pipe(Ge(c=>c&&WI(c)?ew(r,s,n,e):j(c)),re(c=>Ee(L({},t),{guardsResult:c})))})}function ZI(n,e,t,r){return ze(n).pipe(Ge(i=>sw(i.component,i.route,t,e,r)),Vt(i=>i!==!0,!0))}function ew(n,e,t,r){return ze(e).pipe($n(i=>Ds(nw(i.route.parent,r),tw(i.route,r),iw(n,i.path,t),rw(n,i.route,t))),Vt(i=>i!==!0,!0))}function tw(n,e){return n!==null&&e&&e(new Wc(n)),j(!0)}function nw(n,e){return n!==null&&e&&e(new zc(n)),j(!0)}function rw(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return j(!0);let i=r.map(s=>Xa(()=>{let a=wi(e)??t,c=Xn(s,a),l=HI(c)?c.canActivate(e,n):Ft(a,()=>c(e,n));return qt(l).pipe(Vt())}));return j(i).pipe(Jn())}function iw(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>qI(a)).filter(a=>a!==null).map(a=>Xa(()=>{let c=a.guards.map(l=>{let d=wi(a.node)??t,p=Xn(l,d),_=QI(p)?p.canActivateChild(r,n):Ft(d,()=>p(r,n));return qt(_).pipe(Vt())});return j(c).pipe(Jn())}));return j(s).pipe(Jn())}function sw(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return j(!0);let a=s.map(c=>{let l=wi(e)??i,d=Xn(c,l),p=YI(d)?d.canDeactivate(n,e,t,r):Ft(l,()=>d(n,e,t,r));return qt(p).pipe(Vt())});return j(a).pipe(Jn())}function ow(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return j(!0);let s=i.map(a=>{let c=Xn(a,n),l=KI(c)?c.canLoad(e,t):Ft(n,()=>c(e,t));return qt(l)});return j(s).pipe(Jn(),ym(r))}function ym(n){return Wf(pe(e=>{if(Qn(e))throw fm(n,e)}),re(e=>e===!0))}function aw(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return j(!0);let s=i.map(a=>{let c=Xn(a,n),l=JI(c)?c.canMatch(e,t):Ft(n,()=>c(e,t));return qt(l)});return j(s).pipe(Jn(),ym(r))}var vi=class{constructor(e){this.segmentGroup=e||null}},lo=class extends Error{constructor(e){super(),this.urlTree=e}};function zn(n){return Hr(new vi(n))}function cw(n){return Hr(new he(4e3,!1))}function uw(n){return Hr(pm(!1,Be.GuardRejected))}var eu=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return j(r);if(i.numberOfChildren>1||!i.children[q])return cw(e.redirectTo);i=i.children[q]}}applyRedirectCommands(e,t,r){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t.startsWith("/"))throw new lo(i);return i}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Bt(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);r[i]=t[c]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([c,l])=>{a[c]=this.createSegmentGroup(e,l,r,i)}),new ee(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new he(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},tu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lw(n,e,t,r,i){let s=hu(n,e,t);return s.matched?(r=UI(e,r),aw(r,e,t,i).pipe(re(a=>a===!0?s:L({},tu)))):j(s)}function hu(n,e,t){if(e.path==="**")return hw(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},tu):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||aI)(t,n,e);if(!i)return L({},tu);let s={};Object.entries(i.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let a=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function hw(n){return{matched:!0,parameters:n.length>0?Yp(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function zp(n,e,t,r){return t.length>0&&pw(n,t,r)?{segmentGroup:new ee(e,fw(r,new ee(t,n.children))),slicedSegments:[]}:t.length===0&&mw(n,t,r)?{segmentGroup:new ee(n.segments,dw(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ee(n.segments,n.children),slicedSegments:t}}function dw(n,e,t,r){let i={};for(let s of t)if(fo(n,e,s)&&!r[at(s)]){let a=new ee([],{});i[at(s)]=a}return L(L({},r),i)}function fw(n,e){let t={};t[q]=e;for(let r of n)if(r.path===""&&at(r)!==q){let i=new ee([],{});t[at(r)]=i}return t}function pw(n,e,t){return t.some(r=>fo(n,e,r)&&at(r)!==q)}function mw(n,e,t){return t.some(r=>fo(n,e,r))}function fo(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function gw(n,e,t,r){return at(n)!==r&&(r===q||!fo(e,t,n))?!1:hu(e,n,t).matched}function yw(n,e,t){return e.length===0&&!n.children[t]}var nu=class{};function _w(n,e,t,r,i,s,a="emptyOnly"){return new ru(n,e,t,r,i,a,s).recognize()}var vw=31,ru=class{constructor(e,t,r,i,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new eu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new he(4002,`'${e.segmentGroup}'`)}recognize(){let e=zp(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(t=>{let r=new yi([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},q,this.rootComponentType,null,{}),i=new je(r,t),s=new co("",i),a=SI(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(s._root,null),{state:s,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,q).pipe(Bn(r=>{if(r instanceof lo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof vi?this.noMatchError(r):r}))}inheritParamsAndData(e,t){let r=e.value,i=ou(r,t,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,t,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0).pipe(re(s=>s instanceof je?[s]:[]))}processChildren(e,t,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return ze(i).pipe($n(s=>{let a=r.children[s],c=jI(t,s);return this.processSegmentGroup(e,c,a,s)}),ep((s,a)=>(s.push(...a),s)),Za(null),Zf(),Ge(s=>{if(s===null)return zn(r);let a=_m(s);return Iw(a),j(a)}))}processSegment(e,t,r,i,s,a){return ze(t).pipe($n(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,a).pipe(Bn(l=>{if(l instanceof vi)return j(null);throw l}))),Vt(c=>!!c),Bn(c=>{if(gm(c))return yw(r,i,s)?j(new nu):zn(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,a,c){return gw(r,i,s,a)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,a):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,a):zn(i):zn(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a){let{matched:c,consumedSegments:l,positionalParamSegments:d,remainingSegments:p}=hu(t,i,s);if(!c)return zn(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>vw&&(this.allowRedirects=!1));let _=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d);return this.applyRedirects.lineralizeSegments(i,_).pipe(Ge(E=>this.processSegment(e,r,t,E.concat(p),a,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){let a=lw(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Xe(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Xe(({routes:l})=>{let d=r._loadedInjector??e,{consumedSegments:p,remainingSegments:_,parameters:E}=c,R=new yi(p,E,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Ew(r),at(r),r.component??r._loadedComponent??null,r,Tw(r)),{segmentGroup:N,slicedSegments:x}=zp(t,p,_,l);if(x.length===0&&N.hasChildren())return this.processChildren(d,l,N).pipe(re($=>$===null?null:new je(R,$)));if(l.length===0&&x.length===0)return j(new je(R,[]));let k=at(r)===s;return this.processSegment(d,l,N,x,k?q:s,!0).pipe(re($=>new je(R,$ instanceof je?[$]:[])))}))):zn(t)))}getChildConfig(e,t,r){return t.children?j({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?j({routes:t._loadedRoutes,injector:t._loadedInjector}):ow(e,t,r,this.urlSerializer).pipe(Ge(i=>i?this.configLoader.loadChildren(e,t).pipe(pe(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):uw(t))):j({routes:[],injector:e})}};function Iw(n){n.sort((e,t)=>e.value.outlet===q?-1:t.value.outlet===q?1:e.value.outlet.localeCompare(t.value.outlet))}function ww(n){let e=n.value.routeConfig;return e&&e.path===""}function _m(n){let e=[],t=new Set;for(let r of n){if(!ww(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=_m(r.children);e.push(new je(r.value,i))}return e.filter(r=>!t.has(r))}function Ew(n){return n.data||{}}function Tw(n){return n.resolve||{}}function bw(n,e,t,r,i,s){return Ge(a=>_w(n,e,t,r,a.extractedUrl,i,s).pipe(re(({state:c,tree:l})=>Ee(L({},a),{targetSnapshot:c,urlAfterRedirects:l}))))}function Aw(n,e){return Ge(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return j(t);let s=new Set(i.map(l=>l.route)),a=new Set;for(let l of s)if(!a.has(l))for(let d of vm(l))a.add(d);let c=0;return ze(a).pipe($n(l=>s.has(l)?Sw(l,r,n,e):(l.data=ou(l,l.parent,n).resolve,j(void 0))),pe(()=>c++),ec(1),Ge(l=>c===a.size?j(t):Mt))})}function vm(n){let e=n.children.map(t=>vm(t)).flat();return[n,...e]}function Sw(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!hm(i)&&(s[Ii]=i.title),Rw(s,n,e,r).pipe(re(a=>(n._resolvedData=a,n.data=ou(n,n.parent,t).resolve,null)))}function Rw(n,e,t,r){let i=xc(n);if(i.length===0)return j({});let s={};return ze(i).pipe(Ge(a=>Cw(n[a],e,t,r).pipe(Vt(),pe(c=>{s[a]=c}))),ec(1),Xf(s),Bn(a=>gm(a)?Mt:Hr(a)))}function Cw(n,e,t,r){let i=wi(e)??r,s=Xn(n,i),a=s.resolve?s.resolve(e,t):Ft(i,()=>s(e,t));return qt(a)}function kc(n){return Xe(e=>{let t=n(e);return t?ze(t).pipe(re(()=>e)):j(e)})}var Im=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(a=>a.outlet===q);return i}getResolvedTitleForRoute(r){return r.data[Ii]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>V(Dw),providedIn:"root"});let n=e;return n})(),Dw=(()=>{let e=class e extends Im{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(G(Ys))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),du=new ce("",{providedIn:"root",factory:()=>({})}),fu=new ce(""),Pw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(gc)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return j(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=qt(r.loadComponent()).pipe(re(wm),pe(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),Yr(()=>{this.componentLoaders.delete(r)})),s=new Ha(i,()=>new _t).pipe(Ka());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return j({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let a=kw(i,this.compiler,r,this.onLoadEndListener).pipe(Yr(()=>{this.childrenLoaders.delete(i)})),c=new Ha(a,()=>new _t).pipe(Ka());return this.childrenLoaders.set(i,c),c}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function kw(n,e,t,r){return qt(n.loadChildren()).pipe(re(wm),Ge(i=>i instanceof cp||Array.isArray(i)?j(i):ze(e.compileModuleAsync(i))),re(i=>{r&&r(n);let s,a,c=!1;return Array.isArray(i)?(a=i,c=!0):(s=i.create(t).injector,a=s.get(fu,[],{optional:!0,self:!0}).flat()),{routes:a.map(lu),injector:s}}))}function Nw(n){return n&&typeof n=="object"&&"default"in n}function wm(n){return Nw(n)?n.default:n}var pu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>V(xw),providedIn:"root"});let n=e;return n})(),xw=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ow=new ce("");var Mw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new _t,this.transitionAbortSubject=new _t,this.configLoader=V(Pw),this.environmentInjector=V(Ns),this.urlSerializer=V(su),this.rootContexts=V(ho),this.location=V(qs),this.inputBindingEnabled=V(uu,{optional:!0})!==null,this.titleStrategy=V(Im),this.options=V(du,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(pu),this.createViewTransition=V(Ow,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>j(void 0),this.rootComponentType=null;let r=s=>this.events.next(new $c(s)),i=s=>this.events.next(new qc(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ee(L(L({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new qe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:li,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(on(a=>a.id!==0),re(a=>Ee(L({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Xe(a=>{let c=!1,l=!1;return j(a).pipe(Xe(d=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",Be.SupersededByNewNavigation),Mt;this.currentTransition=a,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),_=d.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!p&&_!=="reload"){let E="";return this.events.next(new pn(d.id,this.urlSerializer.serialize(d.rawUrl),E,Vc.IgnoredSameUrlNavigation)),d.resolve(null),Mt}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return j(d).pipe(Xe(E=>{let R=this.transitions?.getValue();return this.events.next(new fi(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),R!==this.transitions?.getValue()?Mt:Promise.resolve(E)}),bw(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),pe(E=>{a.targetSnapshot=E.targetSnapshot,a.urlAfterRedirects=E.urlAfterRedirects,this.currentNavigation=Ee(L({},this.currentNavigation),{finalUrl:E.urlAfterRedirects});let R=new so(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(R)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:E,extractedUrl:R,source:N,restoredState:x,extras:k}=d,$=new fi(E,this.urlSerializer.serialize(R),N,x);this.events.next($);let W=um(this.rootComponentType).snapshot;return this.currentTransition=a=Ee(L({},d),{targetSnapshot:W,urlAfterRedirects:R,extras:Ee(L({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=R,j(a)}else{let E="";return this.events.next(new pn(d.id,this.urlSerializer.serialize(d.extractedUrl),E,Vc.IgnoredByUrlHandlingStrategy)),d.resolve(null),Mt}}),pe(d=>{let p=new Fc(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),re(d=>(this.currentTransition=a=Ee(L({},d),{guards:$I(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),a)),XI(this.environmentInjector,d=>this.events.next(d)),pe(d=>{if(a.guardsResult=d.guardsResult,Qn(d.guardsResult))throw fm(this.urlSerializer,d.guardsResult);let p=new Uc(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(p)}),on(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Be.GuardRejected),!1)),kc(d=>{if(d.guards.canActivateChecks.length)return j(d).pipe(pe(p=>{let _=new jc(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}),Xe(p=>{let _=!1;return j(p).pipe(Aw(this.paramsInheritanceStrategy,this.environmentInjector),pe({next:()=>_=!0,complete:()=>{_||this.cancelNavigationTransition(p,"",Be.NoDataFromResolver)}}))}),pe(p=>{let _=new Bc(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}))}),kc(d=>{let p=_=>{let E=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(_.routeConfig).pipe(pe(R=>{_.component=R}),re(()=>{})));for(let R of _.children)E.push(...p(R));return E};return Qr(p(d.targetSnapshot.root)).pipe(Za(null),Lt(1))}),kc(()=>this.afterPreactivation()),Xe(()=>{let{currentSnapshot:d,targetSnapshot:p}=a,_=this.createViewTransition?.(this.environmentInjector,d.root,p.root);return _?ze(_).pipe(re(()=>a)):j(a)}),re(d=>{let p=OI(r.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=a=Ee(L({},d),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,a}),pe(()=>{this.events.next(new mi)}),BI(this.rootContexts,r.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),Lt(1),pe({next:d=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fn(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{c=!0}}),ks(this.transitionAbortSubject.pipe(pe(d=>{throw d}))),Yr(()=>{!c&&!l&&this.cancelNavigationTransition(a,"",Be.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),Bn(d=>{if(l=!0,mm(d))this.events.next(new $t(a.id,this.urlSerializer.serialize(a.extractedUrl),d.message,d.cancellationCode)),VI(d)?this.events.next(new gi(d.url)):a.resolve(!1);else{this.events.next(new pi(a.id,this.urlSerializer.serialize(a.extractedUrl),d,a.targetSnapshot??void 0));try{a.resolve(r.errorHandler(d))}catch(p){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(p)}}return Mt}))}))}cancelNavigationTransition(r,i,s){let a=new $t(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(a),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Lw(n){return n!==li}var Vw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>V(Fw),providedIn:"root"});let n=e;return n})(),iu=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Fw=(()=>{let e=class e extends iu{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=rc(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Em=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>V(Uw),providedIn:"root"});let n=e;return n})(),Uw=(()=>{let e=class e extends Em{constructor(){super(...arguments),this.location=V(qs),this.urlSerializer=V(su),this.options=V(du,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(pu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Bt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=um(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof fi)this.stateMemento=this.createStateMemento();else if(r instanceof pn)this.rawUrlTree=i.initialUrl;else if(r instanceof so){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof mi?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof $t&&(r.code===Be.GuardRejected||r.code===Be.NoDataFromResolver)?this.restoreHistory(i):r instanceof pi?this.restoreHistory(i,!0):r instanceof fn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let a=this.browserPageId,c=L(L({},i.extras.state),this.generateNgRouterState(i.id,a));this.location.replaceState(s,"",c)}else{let a=L(L({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",a)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,a=this.currentPageId-s;a!==0?this.location.historyGo(a):this.currentUrlTree===r.finalUrl&&a===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=rc(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ci=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ci||{});function jw(n,e){n.events.pipe(on(t=>t instanceof fn||t instanceof $t||t instanceof pi||t instanceof pn),re(t=>t instanceof fn||t instanceof pn?ci.COMPLETE:(t instanceof $t?t.code===Be.Redirect||t.code===Be.SupersededByNewNavigation:!1)?ci.REDIRECTING:ci.FAILED),on(t=>t!==ci.REDIRECTING),Lt(1)).subscribe(()=>{e()})}function Bw(n){throw n}var $w={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Tm=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(js),this.stateManager=V(Em),this.options=V(du,{optional:!0})||{},this.pendingTasks=V(cc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(Mw),this.urlSerializer=V(su),this.location=V(qs),this.urlHandlingStrategy=V(pu),this._events=new _t,this.errorHandler=this.options.errorHandler||Bw,this.navigated=!1,this.routeReuseStrategy=V(Vw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(fu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(uu,{optional:!0}),this.eventsSubscription=new Gf,this.isNgZoneEnabled=V(ae)instanceof ae&&ae.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(s!==null&&a!==null){if(this.stateManager.handleRouterEvent(i,a),i instanceof $t&&i.code!==Be.Redirect&&i.code!==Be.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof fn)this.navigated=!0;else if(i instanceof gi){let c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Lw(s.source)};this.scheduleNavigation(c,li,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Gw(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),li,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let a={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let d=L({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(a.state=d)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(lu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:a,fragment:c,queryParamsHandling:l,preserveFragment:d}=i,p=d?this.currentUrlTree.fragment:c,_=null;switch(l){case"merge":_=L(L({},this.currentUrlTree.queryParams),a);break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=a||null}_!==null&&(_=this.removeEmptyProps(_));let E;try{let R=s?s.snapshot:this.routerState.snapshot.root;E=sm(R)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),E=this.currentUrlTree.root}return om(E,r,_,p??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Qn(r)?r:this.parseUrl(r),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,li,null,i)}navigate(r,i={skipLocationChange:!1}){return zw(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=L({},$w):i===!1?s=L({},qw):s=i,Qn(r))return jp(this.currentUrlTree,r,s);let a=this.parseUrl(r);return jp(this.currentUrlTree,a,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,a])=>(a!=null&&(i[s]=a),i),{})}scheduleNavigation(r,i,s,a,c){if(this.disposed)return Promise.resolve(!1);let l,d,p;c?(l=c.resolve,d=c.reject,p=c.promise):p=new Promise((E,R)=>{l=E,d=R});let _=this.pendingTasks.add();return jw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(_))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:a,resolve:l,reject:d,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(E=>Promise.reject(E))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function zw(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new he(4008,!1)}function Gw(n){return!(n instanceof mi)&&!(n instanceof gi)}var Ww=new ce("");function bm(n,...e){return Ue([{provide:fu,multi:!0,useValue:n},[],{provide:Yn,useFactory:Kw,deps:[Tm]},{provide:Bs,multi:!0,useFactory:Hw},e.map(t=>t.\u0275providers)])}function Kw(n){return n.routerState.root}function Hw(){let n=V(Ut);return e=>{let t=n.get(ti);if(e!==t.components[0])return;let r=n.get(Tm),i=n.get(Qw);n.get(Yw)===1&&r.initialNavigation(),n.get(Jw,null,tc.Optional)?.setUpPreloading(),n.get(Ww,null,tc.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Qw=new ce("",{factory:()=>new _t}),Yw=new ce("",{providedIn:"root",factory:()=>1});var Jw=new ce("");var Am=[];var Xw="@",Zw=(()=>{let e=class e{constructor(r,i,s,a,c){this.doc=r,this.delegate=i,this.zone=s,this.animationType=a,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=V(op,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-FNK7HHN3.js")).catch(i=>{throw new he(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc,this.scheduler);let a=new s(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(r,i){let s=this.delegate.createRenderer(r,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let a=new mu(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let l=c.createRenderer(r,i);a.use(l)}).catch(c=>{a.use(s)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(i){ac()},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),mu=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,r,i){this.delegate.insertBefore(e,t,r,i)}removeChild(e,t,r){this.delegate.removeChild(e,t,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){this.shouldReplay(t)&&this.replay.push(i=>i.setProperty(e,t,r)),this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.shouldReplay(t)&&this.replay.push(i=>i.listen(e,t,r)),this.delegate.listen(e,t,r)}shouldReplay(e){return this.replay!==null&&e.startsWith(Xw)}};function Sm(n="animations"){return Ls("NgAsyncAnimations"),Ue([{provide:Ms,useFactory:(e,t,r)=>new Zw(e,t,r,n),deps:[ve,Hs,ae]},{provide:sc,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Cm=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},eE=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Dm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,c=a?n[i+1]:0,l=i+2<n.length,d=l?n[i+2]:0,p=s>>2,_=(s&3)<<4|c>>4,E=(c&15)<<2|d>>6,R=d&63;l||(R=64,a||(E=64)),r.push(t[p],t[_],t[E],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Cm(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eE(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let _=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||d==null||_==null)throw new yu;let E=s<<2|c>>4;if(r.push(E),d!==64){let R=c<<4&240|d>>2;if(r.push(R),_!==64){let N=d<<6&192|_;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},yu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},tE=function(n){let e=Cm(n);return Dm.encodeByteArray(e,!0)},Ti=function(n){return tE(n).replace(/\./g,"")},vu=function(n){try{return Dm.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var rE=()=>nE().__FIREBASE_DEFAULTS__,iE=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sE=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&vu(n[1]);return e&&JSON.parse(e)},mo=()=>{try{return rE()||iE()||sE()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Iu=n=>{var e,t;return(t=(e=mo())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Pm=n=>{let e=Iu(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wu=()=>{var n;return(n=mo())===null||n===void 0?void 0:n.config},Eu=n=>{var e;return(e=mo())===null||e===void 0?void 0:e[`_${n}`]};var po=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function km(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ti(JSON.stringify(t)),Ti(JSON.stringify(a)),""].join(".")}function Ie(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Nm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function oE(){var n;let e=(n=mo())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xm(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Om(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Mm(){let n=Ie();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Lm(){return!oE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tu(){try{return typeof indexedDB=="object"}catch{return!1}}function Vm(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var aE="FirebaseError",$e=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=aE,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vt.prototype.create)}},vt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?cE(s,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new $e(i,c,r)}};function cE(n,e){return n.replace(uE,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var uE=/\{\$([^}]+)}/g;function Fm(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(Rm(s)&&Rm(a)){if(!mn(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Rm(n){return n!==null&&typeof n=="object"}function bi(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Um(n,e){let t=new _u(n,e);return t.subscribe.bind(t)}var _u=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");lE(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=gu),i.error===void 0&&(i.error=gu),i.complete===void 0&&(i.complete=gu);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function lE(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function gu(){}var vC=4*60*60*1e3;function Ke(n){return n&&n._delegate?n._delegate:n}var He=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var gn="[DEFAULT]";var bu=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new po;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dE(e))try{this.getOrInitializeService({instanceIdentifier:gn})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=gn){return this.instances.has(e)}getOptions(e=gn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);r===c&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hE(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gn){return this.component?this.component.multipleInstances?e:gn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hE(n){return n===gn?void 0:n}function dE(n){return n.instantiationMode==="EAGER"}var go=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new bu(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var fE=[],H=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(H||{}),pE={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},mE=H.INFO,gE={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},yE=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=gE[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},zt=class{constructor(e){this.name=e,this._logLevel=mE,this._logHandler=yE,this._userLogHandler=null,fE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in H))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...e),this._logHandler(this,H.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...e),this._logHandler(this,H.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,H.INFO,...e),this._logHandler(this,H.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,H.WARN,...e),this._logHandler(this,H.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...e),this._logHandler(this,H.ERROR,...e)}};var _E=(n,e)=>e.some(t=>n instanceof t),jm,Bm;function vE(){return jm||(jm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IE(){return Bm||(Bm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var $m=new WeakMap,Su=new WeakMap,qm=new WeakMap,Au=new WeakMap,Cu=new WeakMap;function wE(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(ct(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&$m.set(t,n)}).catch(()=>{}),Cu.set(e,n),e}function EE(n){if(Su.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Su.set(n,e)}var Ru={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Su.get(n);if(e==="objectStoreNames")return n.objectStoreNames||qm.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ct(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function zm(n){Ru=n(Ru)}function TE(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(yo(this),e,...t);return qm.set(r,e.sort?e.sort():[e]),ct(r)}:IE().includes(n)?function(...e){return n.apply(yo(this),e),ct($m.get(this))}:function(...e){return ct(n.apply(yo(this),e))}}function bE(n){return typeof n=="function"?TE(n):(n instanceof IDBTransaction&&EE(n),_E(n,vE())?new Proxy(n,Ru):n)}function ct(n){if(n instanceof IDBRequest)return wE(n);if(Au.has(n))return Au.get(n);let e=bE(n);return e!==n&&(Au.set(n,e),Cu.set(e,n)),e}var yo=n=>Cu.get(n);function Wm(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),c=ct(a);return r&&a.addEventListener("upgradeneeded",l=>{r(ct(a.result),l.oldVersion,l.newVersion,ct(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var AE=["get","getKey","getAll","getAllKeys","count"],SE=["put","add","delete","clear"],Du=new Map;function Gm(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Du.get(e))return Du.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=SE.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AE.includes(t)))return;let s=function(a,...c){return I(this,null,function*(){let l=this.transaction(a,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),i&&l.done]))[0]})};return Du.set(e,s),s}zm(n=>Ee(L({},n),{get:(e,t,r)=>Gm(e,t)||n.get(e,t,r),has:(e,t)=>!!Gm(e,t)||n.has(e,t)}));var ku=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(RE(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function RE(n){let e=n.getComponent();return e?.type==="VERSION"}var Nu="@firebase/app",Km="0.10.4";var yn=new zt("@firebase/app"),CE="@firebase/app-compat",DE="@firebase/analytics-compat",PE="@firebase/analytics",kE="@firebase/app-check-compat",NE="@firebase/app-check",xE="@firebase/auth",OE="@firebase/auth-compat",ME="@firebase/database",LE="@firebase/database-compat",VE="@firebase/functions",FE="@firebase/functions-compat",UE="@firebase/installations",jE="@firebase/installations-compat",BE="@firebase/messaging",$E="@firebase/messaging-compat",qE="@firebase/performance",zE="@firebase/performance-compat",GE="@firebase/remote-config",WE="@firebase/remote-config-compat",KE="@firebase/storage",HE="@firebase/storage-compat",QE="@firebase/firestore",YE="@firebase/vertexai-preview",JE="@firebase/firestore-compat",XE="firebase",ZE="10.12.1";var xu="[DEFAULT]",eT={[Nu]:"fire-core",[CE]:"fire-core-compat",[PE]:"fire-analytics",[DE]:"fire-analytics-compat",[NE]:"fire-app-check",[kE]:"fire-app-check-compat",[xE]:"fire-auth",[OE]:"fire-auth-compat",[ME]:"fire-rtdb",[LE]:"fire-rtdb-compat",[VE]:"fire-fn",[FE]:"fire-fn-compat",[UE]:"fire-iid",[jE]:"fire-iid-compat",[BE]:"fire-fcm",[$E]:"fire-fcm-compat",[qE]:"fire-perf",[zE]:"fire-perf-compat",[GE]:"fire-rc",[WE]:"fire-rc-compat",[KE]:"fire-gcs",[HE]:"fire-gcs-compat",[QE]:"fire-fst",[JE]:"fire-fst-compat",[YE]:"fire-vertex","fire-js":"fire-js",[XE]:"fire-js-all"};var Ai=new Map,tT=new Map,Ou=new Map;function Hm(n,e){try{n.container.addComponent(e)}catch(t){yn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wt(n){let e=n.name;if(Ou.has(e))return yn.debug(`There were multiple attempts to register component ${e}.`),!1;Ou.set(e,n);for(let t of Ai.values())Hm(t,n);for(let t of tT.values())Hm(t,n);return!0}function Ri(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function It(n){return n.settings!==void 0}var nT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gt=new vt("app","Firebase",nT);var Mu=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new He("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gt.create("app-deleted",{appName:this._name})}};var Kt=ZE;function Fu(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:xu,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gt.create("bad-app-name",{appName:String(i)});if(t||(t=wu()),!t)throw Gt.create("no-options");let s=Ai.get(i);if(s){if(mn(t,s.options)&&mn(r,s.config))return s;throw Gt.create("duplicate-app",{appName:i})}let a=new go(i);for(let l of Ou.values())a.addComponent(l);let c=new Mu(t,r,a);return Ai.set(i,c),c}function Zn(n=xu){let e=Ai.get(n);if(!e&&n===xu&&wu())return Fu();if(!e)throw Gt.create("no-app",{appName:n});return e}function _o(){return Array.from(Ai.values())}function we(n,e,t){var r;let i=(r=eT[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yn.warn(c.join(" "));return}Wt(new He(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var rT="firebase-heartbeat-database",iT=1,Si="firebase-heartbeat-store",Pu=null;function Xm(){return Pu||(Pu=Wm(rT,iT,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Si)}catch(t){console.warn(t)}}}}).catch(n=>{throw Gt.create("idb-open",{originalErrorMessage:n.message})})),Pu}function sT(n){return I(this,null,function*(){try{let t=(yield Xm()).transaction(Si),r=yield t.objectStore(Si).get(Zm(n));return yield t.done,r}catch(e){if(e instanceof $e)yn.warn(e.message);else{let t=Gt.create("idb-get",{originalErrorMessage:e?.message});yn.warn(t.message)}}})}function Qm(n,e){return I(this,null,function*(){try{let r=(yield Xm()).transaction(Si,"readwrite");yield r.objectStore(Si).put(e,Zm(n)),yield r.done}catch(t){if(t instanceof $e)yn.warn(t.message);else{let r=Gt.create("idb-set",{originalErrorMessage:t?.message});yn.warn(r.message)}}})}function Zm(n){return`${n.name}!${n.options.appId}`}var oT=1024,aT=30*24*60*60*1e3,Lu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Vu(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,t;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ym();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let c=new Date(a.date).valueOf();return Date.now()-c<=aT}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return I(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Ym(),{heartbeatsToSend:r,unsentEntries:i}=cT(this._heartbeatsCache.heartbeats),s=Ti(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Ym(){return new Date().toISOString().substring(0,10)}function cT(n,e=oT){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Jm(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Jm(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Vu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return Tu()?Vm().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield sT(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Qm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Qm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Jm(n){return Ti(JSON.stringify({version:2,heartbeats:n})).length}function uT(n){Wt(new He("platform-logger",e=>new ku(e),"PRIVATE")),Wt(new He("heartbeat",e=>new Lu(e),"PRIVATE")),we(Nu,Km,n),we(Nu,Km,"esm2017"),we("fire-js","")}uT("");var lT="firebase",hT="10.12.1";we(lT,hT,"app");var vn=new ei("ANGULARFIRE2_VERSION");function Io(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ci=(n,e)=>{let t=e?[e]:_o(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},tr=class{constructor(){return Ci(dT)}},dT="app-check";function er(){}var vo=class{zone;delegate;constructor(e,t=Hf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(s,t,r)}},Uu=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",er,{},er,er)),t.pipe(pe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},nr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new vo(Zone.current)),this.insideAngular=t.run(()=>new vo(Zone.current,Kf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(G(ae))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wo(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function fT(n){return wo().ngZone.runOutsideAngular(()=>n())}function _n(n){return wo().ngZone.run(()=>n())}function pT(n){return mT(wo())(n)}function mT(n){return function(t){return t=t.lift(new Uu(n.ngZone)),t.pipe(Ja(n.outsideAngular),Ya(n.insideAngular))}}var gT=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),_n(()=>n.apply(void 0,r))},ut=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=_n(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",er,{},er,er))),r[s]=gT(r[s],t));let i=fT(()=>n.apply(this,r));if(!e)if(i instanceof jn){let s=wo();return i.pipe(Ja(s.outsideAngular),Ya(s.insideAngular))}else return _n(()=>i);return i instanceof jn?i.pipe(pT):i instanceof Promise?_n(()=>new Promise((s,a)=>i.then(c=>_n(()=>s(c)),c=>_n(()=>a(c))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:_n(()=>i)};var wt=class{constructor(e){return e}},In=class{constructor(){return _o()}};function yT(n){return n&&n.length===1?n[0]:new wt(Zn())}var ju=new ce("angularfire2._apps"),_T={provide:wt,useFactory:yT,deps:[[new Ve,ju]]},vT={provide:In,deps:[[new Ve,ju]]};function IT(n){return(e,t)=>{let r=t.get(tt);we("angularfire",vn.full,"core"),we("angularfire",vn.full,"app"),we("angular",hp.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new wt(i)}}function eg(n,...e){return Ue([_T,vT,{provide:ju,useFactory:IT(n),multi:!0,deps:[ae,Ut,nr,...e]}])}var tg=ut(Fu,!0);function gg(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var yg=gg,_g=new vt("auth","Firebase",gg());var Ro=new zt("@firebase/auth");function wT(n,...e){Ro.logLevel<=H.WARN&&Ro.warn(`Auth (${Kt}): ${n}`,...e)}function To(n,...e){Ro.logLevel<=H.ERROR&&Ro.error(`Auth (${Kt}): ${n}`,...e)}function Qt(n,...e){throw ol(n,...e)}function En(n,...e){return ol(n,...e)}function vg(n,e,t){let r=Object.assign(Object.assign({},yg()),{[e]:t});return new vt("auth","Firebase",r).create(e,{appName:n.name})}function wn(n){return vg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ol(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _g.create(n,...e)}function U(n,e,...t){if(!n)throw ol(e,...t)}function Et(n){let e="INTERNAL ASSERTION FAILED: "+n;throw To(e),new Error(e)}function Yt(n,e){n||Et(e)}function zu(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ET(){return ng()==="http:"||ng()==="https:"}function ng(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function TT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ET()||xm()||"connection"in navigator)?navigator.onLine:!0}function bT(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Tn=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yt(t>e,"Short delay should be less than long delay!"),this.isMobile=Nm()||Om()}get(){return TT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function al(n,e){Yt(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Co=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var AT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var ST=new Tn(3e4,6e4);function cl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ir(s,a,c,l){return I(this,arguments,function*(n,e,t,r,i={}){return Ig(n,i,()=>I(this,null,function*(){let d={},p={};r&&(e==="GET"?p=r:d={body:JSON.stringify(r)});let _=bi(Object.assign({key:n.config.apiKey},p)).slice(1),E=yield n._getAdditionalHeaders();return E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode),Co.fetch()(wg(n,n.config.apiHost,t,_),Object.assign({method:e,headers:E,referrerPolicy:"no-referrer"},d))}))})}function Ig(n,e,t){return I(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},AT),e);try{let i=new Gu(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw Eo(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let c=s.ok?a.errorMessage:a.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eo(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw Eo(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw Eo(n,"user-disabled",a);let p=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw vg(n,p,d);Qt(n,p)}}catch(i){if(i instanceof $e)throw i;Qt(n,"network-request-failed",{message:String(i)})}})}function RT(s,a,c,l){return I(this,arguments,function*(n,e,t,r,i={}){let d=yield ir(n,e,t,r,i);return"mfaPendingCredential"in d&&Qt(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function wg(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?al(n.config,i):`${n.config.apiScheme}://${i}`}var Gu=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),ST.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Eo(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=En(n,e,r);return i.customData._tokenResponse=t,i}function CT(n,e){return I(this,null,function*(){return ir(n,"POST","/v1/accounts:delete",e)})}function Eg(n,e){return I(this,null,function*(){return ir(n,"POST","/v1/accounts:lookup",e)})}function Di(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ul(n,e=!1){return I(this,null,function*(){let t=Ke(n),r=yield t.getIdToken(e),i=ll(r);U(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Di(Bu(i.auth_time)),issuedAtTime:Di(Bu(i.iat)),expirationTime:Di(Bu(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Bu(n){return Number(n)*1e3}function ll(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return To("JWT malformed, contained fewer than 3 sections"),null;try{let i=vu(t);return i?JSON.parse(i):(To("Failed to decode base64 JWT payload"),null)}catch(i){return To("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rg(n){let e=ll(n);return U(e,"internal-error"),U(typeof e.exp<"u","internal-error"),U(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ki(n,e,t=!1){return I(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof $e&&DT(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function DT({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Wu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),t)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ni=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Di(this.lastLoginAt),this.creationTime=Di(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Do(n){return I(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield ki(n,Eg(t,{idToken:r}));U(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Tg(s.providerUserInfo):[],c=PT(n.providerData,a),l=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,p=l?d:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Ni(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)})}function hl(n){return I(this,null,function*(){let e=Ke(n);yield Do(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function PT(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Tg(n){return n.map(e=>{var{providerId:t}=e,r=Qa(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function kT(n,e){return I(this,null,function*(){let t=yield Ig(n,{},()=>I(this,null,function*(){let r=bi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=wg(n,i,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Co.fetch()(a,{method:"POST",headers:c,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function NT(n,e){return I(this,null,function*(){return ir(n,"POST","/v2/accounts:revokeToken",cl(n,e))})}var Pi=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){U(e.idToken,"internal-error"),U(typeof e.idToken<"u","internal-error"),U(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){U(e.length!==0,"internal-error");let t=rg(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return I(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(U(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield kT(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(U(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(U(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(U(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Et("not implemented")}};function Ht(n,e){U(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var rr=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Qa(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ni(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let t=yield ki(this,this.stsTokenManager.getToken(this.auth,e));return U(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return ul(this,e)}reload(){return hl(this)}_assign(e){this!==e&&(U(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Do(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(It(this.auth.app))return Promise.reject(wn(this.auth));let e=yield this.getIdToken();return yield ki(this,CT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,c,l,d,p;let _=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,R=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,N=(a=t.photoURL)!==null&&a!==void 0?a:void 0,x=(c=t.tenantId)!==null&&c!==void 0?c:void 0,k=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,$=(d=t.createdAt)!==null&&d!==void 0?d:void 0,W=(p=t.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:X,emailVerified:se,isAnonymous:xe,providerData:ne,stsTokenManager:w}=t;U(X&&w,e,"internal-error");let m=Pi.fromJSON(this.name,w);U(typeof X=="string",e,"internal-error"),Ht(_,e.name),Ht(E,e.name),U(typeof se=="boolean",e,"internal-error"),U(typeof xe=="boolean",e,"internal-error"),Ht(R,e.name),Ht(N,e.name),Ht(x,e.name),Ht(k,e.name),Ht($,e.name),Ht(W,e.name);let y=new n({uid:X,auth:e,email:E,emailVerified:se,displayName:_,isAnonymous:xe,photoURL:N,phoneNumber:R,tenantId:x,stsTokenManager:m,createdAt:$,lastLoginAt:W});return ne&&Array.isArray(ne)&&(y.providerData=ne.map(v=>Object.assign({},v))),k&&(y._redirectEventId=k),y}static _fromIdTokenResponse(e,t,r=!1){return I(this,null,function*(){let i=new Pi;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Do(s),s})}static _fromGetAccountInfoResponse(e,t,r){return I(this,null,function*(){let i=t.users[0];U(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?Tg(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,c=new Pi;c.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ni(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var ig=new Map;function Tt(n){Yt(n instanceof Function,"Expected a class definition");let e=ig.get(n);return e?(Yt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ig.set(n,e),e)}var xT=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(t,r){return I(this,null,function*(){this.storage[t]=r})}_get(t){return I(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return I(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ku=xT;function bo(n,e,t){return`firebase:${n}:${e}:${t}`}var Po=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=bo(this.userKey,i.apiKey,s),this.fullPersistenceKey=bo("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?rr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return I(this,null,function*(){if(!t.length)return new n(Tt(Ku),e,r);let i=(yield Promise.all(t.map(d=>I(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=i[0]||Tt(Ku),a=bo(r,e.config.apiKey,e.name),c=null;for(let d of t)try{let p=yield d._get(a);if(p){let _=rr._fromJSON(e,p);d!==s&&(c=_),s=d;break}}catch{}let l=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,r):(s=l[0],c&&(yield s._set(a,c.toJSON())),yield Promise.all(t.map(d=>I(this,null,function*(){if(d!==s)try{yield d._remove(a)}catch{}}))),new n(s,e,r))})}};function sg(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sg(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cg(e))return"Blackberry";if(Dg(e))return"Webos";if(dl(e))return"Safari";if((e.includes("chrome/")||Ag(e))&&!e.includes("edge/"))return"Chrome";if(Rg(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function bg(n=Ie()){return/firefox\//i.test(n)}function dl(n=Ie()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ag(n=Ie()){return/crios\//i.test(n)}function Sg(n=Ie()){return/iemobile/i.test(n)}function Rg(n=Ie()){return/android/i.test(n)}function Cg(n=Ie()){return/blackberry/i.test(n)}function Dg(n=Ie()){return/webos/i.test(n)}function Fo(n=Ie()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function OT(n=Ie()){var e;return Fo(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MT(){return Mm()&&document.documentMode===10}function Pg(n=Ie()){return Fo(n)||Rg(n)||Dg(n)||Cg(n)||/windows phone/i.test(n)||Sg(n)}function LT(){try{return!!(window&&window!==window.top)}catch{return!1}}function kg(n,e=[]){let t;switch(n){case"Browser":t=sg(Ie());break;case"Worker":t=`${sg(Ie())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Kt}/${r}`}var Hu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,c)=>{try{let l=e(s);a(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function VT(t){return I(this,arguments,function*(n,e={}){return ir(n,"GET","/v2/passwordPolicy",cl(n,e))})}var FT=6,Qu=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:FT,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Yu=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ko(this),this.idTokenSubscription=new ko(this),this.beforeStateQueue=new Hu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_g,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Tt(t)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Po.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let t=yield Eg(this,{idToken:e}),r=yield rr._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var t;if(It(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!a||a===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return U(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield Do(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=bT()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(It(this.app))return Promise.reject(wn(this));let t=e?Ke(e):null;return t&&U(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return I(this,null,function*(){if(!this._deleted)return e&&U(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return It(this.app)?Promise.reject(wn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return It(this.app)?Promise.reject(wn(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(Tt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield VT(this),t=new Qu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new vt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield NT(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Tt(e)||this._popupRedirectResolver;U(t,this,"argument-error"),this.redirectPersistenceManager=yield Po.create(this,[Tt(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(U(c,this,"internal-error"),c.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kg(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return I(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&wT(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function fl(n){return Ke(n)}var ko=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Um(t=>this.observer=t)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var pl={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UT(n){pl=n}function jT(n){return pl.loadJS(n)}function BT(){return pl.gapiScript}function Ng(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function ml(n,e){let t=Ri(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(mn(s,e??{}))return i;Qt(i,"already-initialized")}return t.initialize({options:e})}function $T(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Tt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function gl(n,e,t){let r=fl(n);U(r._canInitEmulator,r,"emulator-config-failed"),U(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=xg(e),{host:a,port:c}=qT(e),l=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||zT()}function xg(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function qT(n){let e=xg(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:og(r.substr(s.length+1))}}else{let[s,a]=r.split(":");return{host:s,port:og(a)}}}function og(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function zT(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var No=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Et("not implemented")}_getIdTokenResponse(e){return Et("not implemented")}_linkToIdToken(e,t){return Et("not implemented")}_getReauthenticationResolver(e){return Et("not implemented")}};function $u(n,e){return I(this,null,function*(){return RT(n,"POST","/v1/accounts:signInWithIdp",cl(n,e))})}var xo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Ju=class extends xo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var xi=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return I(this,null,function*(){let s=yield rr._fromIdTokenResponse(e,r,i),a=ag(r);return new n({user:s,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=ag(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function ag(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Xu=class n extends $e{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Og(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Xu._fromErrorAndOperation(n,s,e,r):s})}function GT(n,e,t=!1){return I(this,null,function*(){let r=yield ki(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return xi._forOperation(n,"link",r)})}function WT(n,e,t=!1){return I(this,null,function*(){let{auth:r}=n;if(It(r.app))return Promise.reject(wn(r));let i="reauthenticate";try{let s=yield ki(n,Og(r,i,e,n),t);U(s.idToken,r,"internal-error");let a=ll(s.idToken);U(a,r,"internal-error");let{sub:c}=a;return U(n.uid===c,r,"user-mismatch"),xi._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Qt(r,"user-mismatch"),s}})}function KT(n,e,t=!1){return I(this,null,function*(){if(It(n.app))return Promise.reject(wn(n));let r="signIn",i=yield Og(n,r,e),s=yield xi._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function yl(n,e,t,r){return Ke(n).onIdTokenChanged(e,t,r)}function _l(n,e,t){return Ke(n).beforeAuthStateChanged(e,t)}var Oo="__sak";var Mo=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Oo,"1"),this.storage.removeItem(Oo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function HT(){let n=Ie();return dl(n)||Fo(n)}var QT=1e3,YT=10,JT=(()=>{class n extends Mo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=HT()&&LT(),this.fallbackToPolling=Pg(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(i);if(t.newValue!==c)t.newValue!==null?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}let s=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);MT()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,YT):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},QT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return I(this,null,function*(){yield Ot(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return I(this,null,function*(){let r=yield Ot(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return I(this,null,function*(){yield Ot(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Mg=JT;var XT=(()=>{class n extends Mo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),vl=XT;function ZT(n){return Promise.all(n.map(e=>I(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var eb=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return I(this,null,function*(){let r=t,{eventId:i,eventType:s,data:a}=r.data,c=this.handlersMap[s];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let l=Array.from(c).map(p=>I(this,null,function*(){return p(r.origin,a)})),d=yield ZT(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Lg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Zu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((c,l)=>{let d=Lg("",20);i.port1.start();let p=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(_){let E=_;if(E.data.eventId===d)switch(E.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(E.data.response);break;default:clearTimeout(p),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function lt(){return window}function tb(n){lt().location.href=n}function Vg(){return typeof lt().WorkerGlobalScope<"u"&&typeof lt().importScripts=="function"}function nb(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function rb(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ib(){return Vg()?self:null}var Fg="firebaseLocalStorageDb",sb=1,Lo="firebaseLocalStorage",Ug="fbase_key",bn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Uo(n,e){return n.transaction([Lo],e?"readwrite":"readonly").objectStore(Lo)}function ob(){let n=indexedDB.deleteDatabase(Fg);return new bn(n).toPromise()}function el(){let n=indexedDB.open(Fg,sb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Lo,{keyPath:Ug})}catch(i){t(i)}}),n.addEventListener("success",()=>I(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Lo)?e(r):(r.close(),yield ob(),e(yield el()))}))})}function cg(n,e,t){return I(this,null,function*(){let r=Uo(n,!0).put({[Ug]:e,value:t});return new bn(r).toPromise()})}function ab(n,e){return I(this,null,function*(){let t=Uo(n,!1).get(e),r=yield new bn(t).toPromise();return r===void 0?null:r.value})}function ug(n,e){let t=Uo(n,!0).delete(e);return new bn(t).toPromise()}var cb=800,ub=3,lb=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield el(),this.db)})}_withRetries(t){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>ub)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return Vg()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=eb._getInstance(ib()),this.receiver._subscribe("keyChanged",(t,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var t,r;if(this.activeServiceWorker=yield nb(),!this.activeServiceWorker)return;this.sender=new Zu(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||rb()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let t=yield el();return yield cg(t,Oo,"1"),yield ug(t,Oo),!0}catch{}return!1})}_withPendingWrite(t){return I(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>cg(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return I(this,null,function*(){let r=yield this._withRetries(i=>ab(i,t));return this.localCache[t]=r,r})}_remove(t){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>ug(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return I(this,null,function*(){let t=yield this._withRetries(s=>{let a=Uo(s,!1).getAll();return new bn(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),cb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),jg=lb;var fD=Ng("rcb"),pD=new Tn(3e4,6e4);function hb(n,e){return e?Tt(e):(U(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Oi=class extends No{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $u(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $u(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $u(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function db(n){return KT(n.auth,new Oi(n),n.bypassAuthState)}function fb(n){let{auth:e,user:t}=n;return U(t,e,"internal-error"),WT(t,new Oi(n),n.bypassAuthState)}function pb(n){return I(this,null,function*(){let{auth:e,user:t}=n;return U(t,e,"internal-error"),GT(t,new Oi(n),n.bypassAuthState)})}var tl=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:c}=e;if(a){this.reject(a);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return db;case"linkViaPopup":case"linkViaRedirect":return pb;case"reauthViaPopup":case"reauthViaRedirect":return fb;default:Qt(this.auth,"internal-error")}}resolve(e){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var mD=new Tn(2e3,1e4);var mb="pendingRedirect",Ao=new Map,nl=class n extends tl{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=Ao.get(this.auth._key());if(!e){try{let r=(yield gb(this.resolver,this.auth))?yield Ot(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ao.set(this.auth._key(),e)}return this.bypassAuthState||Ao.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return Ot(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ot(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function gb(n,e){return I(this,null,function*(){let t=vb(e),r=_b(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function yb(n,e){Ao.set(n._key(),e)}function _b(n){return Tt(n._redirectPersistence)}function vb(n){return bo(mb,n.config.apiKey,n.name)}function Ib(n,e,t=!1){return I(this,null,function*(){if(It(n.app))return Promise.reject(wn(n));let r=fl(n),i=hb(r,e),a=yield new nl(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var wb=10*60*1e3,rl=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Eb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Bg(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(En(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wb&&this.cachedEventUids.clear(),this.cachedEventUids.has(lg(e))}saveEventToCache(e){this.cachedEventUids.add(lg(e)),this.lastProcessedEventTime=Date.now()}};function lg(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Bg({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Eb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bg(n);default:return!1}}function Tb(t){return I(this,arguments,function*(n,e={}){return ir(n,"GET","/v1/projects",e)})}var bb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ab=/^https?/;function Sb(n){return I(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Tb(n);for(let t of e)try{if(Rb(t))return}catch{}Qt(n,"unauthorized-domain")})}function Rb(n){let e=zu(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Ab.test(t))return!1;if(bb.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Cb=new Tn(3e4,6e4);function hg(){let n=lt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Db(n){return new Promise((e,t)=>{var r,i,s;function a(){hg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hg(),t(En(n,"network-request-failed"))},timeout:Cb.get()})}if(!((i=(r=lt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=lt().gapi)===null||s===void 0)&&s.load)a();else{let c=Ng("iframefcb");return lt()[c]=()=>{gapi.load?a():t(En(n,"network-request-failed"))},jT(`${BT()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw So=null,e})}var So=null;function Pb(n){return So=So||Db(n),So}var kb=new Tn(5e3,15e3),Nb="__/auth/iframe",xb="emulator/auth/iframe",Ob={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Mb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lb(n){let e=n.config;U(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?al(e,xb):`https://${n.config.authDomain}/${Nb}`,r={apiKey:e.apiKey,appName:n.name,v:Kt},i=Mb.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${bi(r).slice(1)}`}function Vb(n){return I(this,null,function*(){let e=yield Pb(n),t=lt().gapi;return U(t,n,"internal-error"),e.open({where:document.body,url:Lb(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ob,dontclear:!0},r=>new Promise((i,s)=>I(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=En(n,"network-request-failed"),c=lt().setTimeout(()=>{s(a)},kb.get());function l(){lt().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{s(a)})})))})}var Fb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ub=500,jb=600,Bb="_blank",$b="http://localhost",Vo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function qb(n,e,t,r=Ub,i=jb){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",l=Object.assign(Object.assign({},Fb),{width:r.toString(),height:i.toString(),top:s,left:a}),d=Ie().toLowerCase();t&&(c=Ag(d)?Bb:t),bg(d)&&(e=e||$b,l.scrollbars="yes");let p=Object.entries(l).reduce((E,[R,N])=>`${E}${R}=${N},`,"");if(OT(d)&&c!=="_self")return zb(e||"",c),new Vo(null);let _=window.open(e||"",c,p);U(_,n,"popup-blocked");try{_.focus()}catch{}return new Vo(_)}function zb(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Gb="__/auth/handler",Wb="emulator/auth/handler",Kb=encodeURIComponent("fac");function dg(n,e,t,r,i,s){return I(this,null,function*(){U(n.config.authDomain,n,"auth-domain-config-required"),U(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Kt,eventId:i};if(e instanceof xo){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Fm(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[p,_]of Object.entries(s||{}))a[p]=_}if(e instanceof Ju){let p=e.getScopes().filter(_=>_!=="");p.length>0&&(a.scopes=p.join(","))}n.tenantId&&(a.tid=n.tenantId);let c=a;for(let p of Object.keys(c))c[p]===void 0&&delete c[p];let l=yield n._getAppCheckToken(),d=l?`#${Kb}=${encodeURIComponent(l)}`:"";return`${Hb(n)}?${bi(c).slice(1)}${d}`})}function Hb({config:n}){return n.emulator?al(n,Wb):`https://${n.authDomain}/${Gb}`}var qu="webStorageSupport",il=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vl,this._completeRedirectFn=Ib,this._overrideRedirectResult=yb}_openPopup(e,t,r,i){return I(this,null,function*(){var s;Yt((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield dg(e,t,r,zu(),i);return qb(e,a,Lg())})}_openRedirect(e,t,r,i){return I(this,null,function*(){yield this._originValidation(e);let s=yield dg(e,t,r,zu(),i);return tb(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Yt(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return I(this,null,function*(){let t=yield Vb(e),r=new rl(e);return t.register("authEvent",i=>(U(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(qu,{type:qu},i=>{var s;let a=(s=i?.[0])===null||s===void 0?void 0:s[qu];a!==void 0&&t(!!a),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Sb(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Pg()||dl()||Fo()}},$g=il;var fg="@firebase/auth",pg="1.7.3";var sl=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Qb(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Yb(n){Wt(new He("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;U(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:a,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kg(n)},d=new Yu(r,i,s,l);return $T(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Wt(new He("auth-internal",e=>{let t=fl(e.getProvider("auth").getImmediate());return(r=>new sl(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),we(fg,pg,Qb(n)),we(fg,pg,"esm2017")}var Jb=5*60,Xb=Eu("authIdTokenMaxAge")||Jb,mg=null,Zb=n=>e=>I(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Xb)return;let i=t?.token;mg!==i&&(mg=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Il(n=Zn()){let e=Ri(n,"auth");if(e.isInitialized())return e.getImmediate();let t=ml(n,{popupRedirectResolver:$g,persistence:[jg,Mg,vl]}),r=Eu("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let a=Zb(s.toString());_l(t,a,()=>a(t.currentUser)),yl(t,c=>a(c))}}let i=Iu("auth");return i&&gl(t,`http://${i}`),t}function eA(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}UT({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=En("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",eA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Yb("Browser");var qg="auth",Mi=class{constructor(e){return e}},Li=class{constructor(){return Ci(qg)}};var wl=new ce("angularfire2.auth-instances");function HA(n,e){let t=Io(qg,n,e);return t&&new Mi(t)}function QA(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Mi(r)}}var YA={provide:Li,deps:[[new Ve,wl]]},JA={provide:Mi,useFactory:HA,deps:[[new Ve,wl],wt]};function zg(n,...e){return we("angularfire",vn.full,"auth"),Ue([JA,YA,{provide:wl,useFactory:QA(n),multi:!0,deps:[ae,Ut,nr,In,[new Ve,tr],...e]}])}var Gg=ut(Il,!0);var Wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kg={};var Jt,El;(function(){var n;function e(w,m){function y(){}y.prototype=m.prototype,w.D=m.prototype,w.prototype=new y,w.prototype.constructor=w,w.C=function(v,T,A){for(var g=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)g[mt-2]=arguments[mt];return m.prototype[T].apply(v,g)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,m,y){y||(y=0);var v=Array(16);if(typeof m=="string")for(var T=0;16>T;++T)v[T]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(T=0;16>T;++T)v[T]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=w.g[0],y=w.g[1],T=w.g[2];var A=w.g[3],g=m+(A^y&(T^A))+v[0]+3614090360&4294967295;m=y+(g<<7&4294967295|g>>>25),g=A+(T^m&(y^T))+v[1]+3905402710&4294967295,A=m+(g<<12&4294967295|g>>>20),g=T+(y^A&(m^y))+v[2]+606105819&4294967295,T=A+(g<<17&4294967295|g>>>15),g=y+(m^T&(A^m))+v[3]+3250441966&4294967295,y=T+(g<<22&4294967295|g>>>10),g=m+(A^y&(T^A))+v[4]+4118548399&4294967295,m=y+(g<<7&4294967295|g>>>25),g=A+(T^m&(y^T))+v[5]+1200080426&4294967295,A=m+(g<<12&4294967295|g>>>20),g=T+(y^A&(m^y))+v[6]+2821735955&4294967295,T=A+(g<<17&4294967295|g>>>15),g=y+(m^T&(A^m))+v[7]+4249261313&4294967295,y=T+(g<<22&4294967295|g>>>10),g=m+(A^y&(T^A))+v[8]+1770035416&4294967295,m=y+(g<<7&4294967295|g>>>25),g=A+(T^m&(y^T))+v[9]+2336552879&4294967295,A=m+(g<<12&4294967295|g>>>20),g=T+(y^A&(m^y))+v[10]+4294925233&4294967295,T=A+(g<<17&4294967295|g>>>15),g=y+(m^T&(A^m))+v[11]+2304563134&4294967295,y=T+(g<<22&4294967295|g>>>10),g=m+(A^y&(T^A))+v[12]+1804603682&4294967295,m=y+(g<<7&4294967295|g>>>25),g=A+(T^m&(y^T))+v[13]+4254626195&4294967295,A=m+(g<<12&4294967295|g>>>20),g=T+(y^A&(m^y))+v[14]+2792965006&4294967295,T=A+(g<<17&4294967295|g>>>15),g=y+(m^T&(A^m))+v[15]+1236535329&4294967295,y=T+(g<<22&4294967295|g>>>10),g=m+(T^A&(y^T))+v[1]+4129170786&4294967295,m=y+(g<<5&4294967295|g>>>27),g=A+(y^T&(m^y))+v[6]+3225465664&4294967295,A=m+(g<<9&4294967295|g>>>23),g=T+(m^y&(A^m))+v[11]+643717713&4294967295,T=A+(g<<14&4294967295|g>>>18),g=y+(A^m&(T^A))+v[0]+3921069994&4294967295,y=T+(g<<20&4294967295|g>>>12),g=m+(T^A&(y^T))+v[5]+3593408605&4294967295,m=y+(g<<5&4294967295|g>>>27),g=A+(y^T&(m^y))+v[10]+38016083&4294967295,A=m+(g<<9&4294967295|g>>>23),g=T+(m^y&(A^m))+v[15]+3634488961&4294967295,T=A+(g<<14&4294967295|g>>>18),g=y+(A^m&(T^A))+v[4]+3889429448&4294967295,y=T+(g<<20&4294967295|g>>>12),g=m+(T^A&(y^T))+v[9]+568446438&4294967295,m=y+(g<<5&4294967295|g>>>27),g=A+(y^T&(m^y))+v[14]+3275163606&4294967295,A=m+(g<<9&4294967295|g>>>23),g=T+(m^y&(A^m))+v[3]+4107603335&4294967295,T=A+(g<<14&4294967295|g>>>18),g=y+(A^m&(T^A))+v[8]+1163531501&4294967295,y=T+(g<<20&4294967295|g>>>12),g=m+(T^A&(y^T))+v[13]+2850285829&4294967295,m=y+(g<<5&4294967295|g>>>27),g=A+(y^T&(m^y))+v[2]+4243563512&4294967295,A=m+(g<<9&4294967295|g>>>23),g=T+(m^y&(A^m))+v[7]+1735328473&4294967295,T=A+(g<<14&4294967295|g>>>18),g=y+(A^m&(T^A))+v[12]+2368359562&4294967295,y=T+(g<<20&4294967295|g>>>12),g=m+(y^T^A)+v[5]+4294588738&4294967295,m=y+(g<<4&4294967295|g>>>28),g=A+(m^y^T)+v[8]+2272392833&4294967295,A=m+(g<<11&4294967295|g>>>21),g=T+(A^m^y)+v[11]+1839030562&4294967295,T=A+(g<<16&4294967295|g>>>16),g=y+(T^A^m)+v[14]+4259657740&4294967295,y=T+(g<<23&4294967295|g>>>9),g=m+(y^T^A)+v[1]+2763975236&4294967295,m=y+(g<<4&4294967295|g>>>28),g=A+(m^y^T)+v[4]+1272893353&4294967295,A=m+(g<<11&4294967295|g>>>21),g=T+(A^m^y)+v[7]+4139469664&4294967295,T=A+(g<<16&4294967295|g>>>16),g=y+(T^A^m)+v[10]+3200236656&4294967295,y=T+(g<<23&4294967295|g>>>9),g=m+(y^T^A)+v[13]+681279174&4294967295,m=y+(g<<4&4294967295|g>>>28),g=A+(m^y^T)+v[0]+3936430074&4294967295,A=m+(g<<11&4294967295|g>>>21),g=T+(A^m^y)+v[3]+3572445317&4294967295,T=A+(g<<16&4294967295|g>>>16),g=y+(T^A^m)+v[6]+76029189&4294967295,y=T+(g<<23&4294967295|g>>>9),g=m+(y^T^A)+v[9]+3654602809&4294967295,m=y+(g<<4&4294967295|g>>>28),g=A+(m^y^T)+v[12]+3873151461&4294967295,A=m+(g<<11&4294967295|g>>>21),g=T+(A^m^y)+v[15]+530742520&4294967295,T=A+(g<<16&4294967295|g>>>16),g=y+(T^A^m)+v[2]+3299628645&4294967295,y=T+(g<<23&4294967295|g>>>9),g=m+(T^(y|~A))+v[0]+4096336452&4294967295,m=y+(g<<6&4294967295|g>>>26),g=A+(y^(m|~T))+v[7]+1126891415&4294967295,A=m+(g<<10&4294967295|g>>>22),g=T+(m^(A|~y))+v[14]+2878612391&4294967295,T=A+(g<<15&4294967295|g>>>17),g=y+(A^(T|~m))+v[5]+4237533241&4294967295,y=T+(g<<21&4294967295|g>>>11),g=m+(T^(y|~A))+v[12]+1700485571&4294967295,m=y+(g<<6&4294967295|g>>>26),g=A+(y^(m|~T))+v[3]+2399980690&4294967295,A=m+(g<<10&4294967295|g>>>22),g=T+(m^(A|~y))+v[10]+4293915773&4294967295,T=A+(g<<15&4294967295|g>>>17),g=y+(A^(T|~m))+v[1]+2240044497&4294967295,y=T+(g<<21&4294967295|g>>>11),g=m+(T^(y|~A))+v[8]+1873313359&4294967295,m=y+(g<<6&4294967295|g>>>26),g=A+(y^(m|~T))+v[15]+4264355552&4294967295,A=m+(g<<10&4294967295|g>>>22),g=T+(m^(A|~y))+v[6]+2734768916&4294967295,T=A+(g<<15&4294967295|g>>>17),g=y+(A^(T|~m))+v[13]+1309151649&4294967295,y=T+(g<<21&4294967295|g>>>11),g=m+(T^(y|~A))+v[4]+4149444226&4294967295,m=y+(g<<6&4294967295|g>>>26),g=A+(y^(m|~T))+v[11]+3174756917&4294967295,A=m+(g<<10&4294967295|g>>>22),g=T+(m^(A|~y))+v[2]+718787259&4294967295,T=A+(g<<15&4294967295|g>>>17),g=y+(A^(T|~m))+v[9]+3951481745&4294967295,w.g[0]=w.g[0]+m&4294967295,w.g[1]=w.g[1]+(T+(g<<21&4294967295|g>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+A&4294967295}r.prototype.u=function(w,m){m===void 0&&(m=w.length);for(var y=m-this.blockSize,v=this.B,T=this.h,A=0;A<m;){if(T==0)for(;A<=y;)i(this,w,A),A+=this.blockSize;if(typeof w=="string"){for(;A<m;)if(v[T++]=w.charCodeAt(A++),T==this.blockSize){i(this,v),T=0;break}}else for(;A<m;)if(v[T++]=w[A++],T==this.blockSize){i(this,v),T=0;break}}this.h=T,this.o+=m},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var m=1;m<w.length-8;++m)w[m]=0;var y=8*this.o;for(m=w.length-8;m<w.length;++m)w[m]=y&255,y/=256;for(this.u(w),w=Array(16),m=y=0;4>m;++m)for(var v=0;32>v;v+=8)w[y++]=this.g[m]>>>v&255;return w};function s(w,m){var y=c;return Object.prototype.hasOwnProperty.call(y,w)?y[w]:y[w]=m(w)}function a(w,m){this.h=m;for(var y=[],v=!0,T=w.length-1;0<=T;T--){var A=w[T]|0;v&&A==m||(y[T]=A,v=!1)}this.g=y}var c={};function l(w){return-128<=w&&128>w?s(w,function(m){return new a([m|0],0>m?-1:0)}):new a([w|0],0>w?-1:0)}function d(w){if(isNaN(w)||!isFinite(w))return _;if(0>w)return k(d(-w));for(var m=[],y=1,v=0;w>=y;v++)m[v]=w/y|0,y*=4294967296;return new a(m,0)}function p(w,m){if(w.length==0)throw Error("number format error: empty string");if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(w.charAt(0)=="-")return k(p(w.substring(1),m));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(m,8)),v=_,T=0;T<w.length;T+=8){var A=Math.min(8,w.length-T),g=parseInt(w.substring(T,T+A),m);8>A?(A=d(Math.pow(m,A)),v=v.j(A).add(d(g))):(v=v.j(y),v=v.add(d(g)))}return v}var _=l(0),E=l(1),R=l(16777216);n=a.prototype,n.m=function(){if(x(this))return-k(this).m();for(var w=0,m=1,y=0;y<this.g.length;y++){var v=this.i(y);w+=(0<=v?v:4294967296+v)*m,m*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(N(this))return"0";if(x(this))return"-"+k(this).toString(w);for(var m=d(Math.pow(w,6)),y=this,v="";;){var T=se(y,m).g;y=$(y,T.j(m));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(w);if(y=T,N(y))return A+v;for(;6>A.length;)A="0"+A;v=A+v}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function N(w){if(w.h!=0)return!1;for(var m=0;m<w.g.length;m++)if(w.g[m]!=0)return!1;return!0}function x(w){return w.h==-1}n.l=function(w){return w=$(this,w),x(w)?-1:N(w)?0:1};function k(w){for(var m=w.g.length,y=[],v=0;v<m;v++)y[v]=~w.g[v];return new a(y,~w.h).add(E)}n.abs=function(){return x(this)?k(this):this},n.add=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],v=0,T=0;T<=m;T++){var A=v+(this.i(T)&65535)+(w.i(T)&65535),g=(A>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);v=g>>>16,A&=65535,g&=65535,y[T]=g<<16|A}return new a(y,y[y.length-1]&-2147483648?-1:0)};function $(w,m){return w.add(k(m))}n.j=function(w){if(N(this)||N(w))return _;if(x(this))return x(w)?k(this).j(k(w)):k(k(this).j(w));if(x(w))return k(this.j(k(w)));if(0>this.l(R)&&0>w.l(R))return d(this.m()*w.m());for(var m=this.g.length+w.g.length,y=[],v=0;v<2*m;v++)y[v]=0;for(v=0;v<this.g.length;v++)for(var T=0;T<w.g.length;T++){var A=this.i(v)>>>16,g=this.i(v)&65535,mt=w.i(T)>>>16,Dr=w.i(T)&65535;y[2*v+2*T]+=g*Dr,W(y,2*v+2*T),y[2*v+2*T+1]+=A*Dr,W(y,2*v+2*T+1),y[2*v+2*T+1]+=g*mt,W(y,2*v+2*T+1),y[2*v+2*T+2]+=A*mt,W(y,2*v+2*T+2)}for(v=0;v<m;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=m;v<2*m;v++)y[v]=0;return new a(y,0)};function W(w,m){for(;(w[m]&65535)!=w[m];)w[m+1]+=w[m]>>>16,w[m]&=65535,m++}function X(w,m){this.g=w,this.h=m}function se(w,m){if(N(m))throw Error("division by zero");if(N(w))return new X(_,_);if(x(w))return m=se(k(w),m),new X(k(m.g),k(m.h));if(x(m))return m=se(w,k(m)),new X(k(m.g),m.h);if(30<w.g.length){if(x(w)||x(m))throw Error("slowDivide_ only works with positive integers.");for(var y=E,v=m;0>=v.l(w);)y=xe(y),v=xe(v);var T=ne(y,1),A=ne(v,1);for(v=ne(v,2),y=ne(y,2);!N(v);){var g=A.add(v);0>=g.l(w)&&(T=T.add(y),A=g),v=ne(v,1),y=ne(y,1)}return m=$(w,T.j(m)),new X(T,m)}for(T=_;0<=w.l(m);){for(y=Math.max(1,Math.floor(w.m()/m.m())),v=Math.ceil(Math.log(y)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),A=d(y),g=A.j(m);x(g)||0<g.l(w);)y-=v,A=d(y),g=A.j(m);N(A)&&(A=E),T=T.add(A),w=$(w,g)}return new X(T,w)}n.A=function(w){return se(this,w).h},n.and=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],v=0;v<m;v++)y[v]=this.i(v)&w.i(v);return new a(y,this.h&w.h)},n.or=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],v=0;v<m;v++)y[v]=this.i(v)|w.i(v);return new a(y,this.h|w.h)},n.xor=function(w){for(var m=Math.max(this.g.length,w.g.length),y=[],v=0;v<m;v++)y[v]=this.i(v)^w.i(v);return new a(y,this.h^w.h)};function xe(w){for(var m=w.g.length+1,y=[],v=0;v<m;v++)y[v]=w.i(v)<<1|w.i(v-1)>>>31;return new a(y,w.h)}function ne(w,m){var y=m>>5;m%=32;for(var v=w.g.length-y,T=[],A=0;A<v;A++)T[A]=0<m?w.i(A+y)>>>m|w.i(A+y+1)<<32-m:w.i(A+y);return new a(T,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,El=Kg.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Jt=Kg.Integer=a}).apply(typeof Wg<"u"?Wg:typeof self<"u"?self:typeof window<"u"?window:{});var jo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bt={};var Tl,bl,sr,Al,Vi,Bo,Sl,Rl,Cl;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof jo=="object"&&jo];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var h=r;o=o.split(".");for(var f=0;f<o.length-1;f++){var b=o[f];if(!(b in h))break e;h=h[b]}o=o[o.length-1],f=h[o],u=u(f),u!=f&&u!=null&&e(h,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var h=0,f=!1,b={next:function(){if(!f&&h<o.length){var S=h++;return{value:u(S,o[S]),done:!1}}return f=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,h){return h})}});var a=a||{},c=this||self;function l(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function d(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function p(o,u,h){return o.call.apply(o.bind,arguments)}function _(o,u,h){if(!o)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,f),o.apply(u,b)}}return function(){return o.apply(u,arguments)}}function E(o,u,h){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,E.apply(null,arguments)}function R(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),o.apply(this,f)}}function N(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(f,b,S){for(var P=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)P[ie-2]=arguments[ie];return u.prototype[b].apply(f,P)}}function x(o){let u=o.length;if(0<u){let h=Array(u);for(let f=0;f<u;f++)h[f]=o[f];return h}return[]}function k(o,u){for(let h=1;h<arguments.length;h++){let f=arguments[h];if(l(f)){let b=o.length||0,S=f.length||0;o.length=b+S;for(let P=0;P<S;P++)o[b+P]=f[P]}else o.push(f)}}class ${constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function W(o){return/^[\s\xa0]*$/.test(o)}function X(){var o=c.navigator;return o&&(o=o.userAgent)?o:""}function se(o){return se[" "](o),o}se[" "]=function(){};var xe=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function ne(o,u,h){for(let f in o)u.call(h,o[f],f,o)}function w(o,u){for(let h in o)u.call(void 0,o[h],h,o)}function m(o){let u={};for(let h in o)u[h]=o[h];return u}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(o,u){let h,f;for(let b=1;b<arguments.length;b++){f=arguments[b];for(h in f)o[h]=f[h];for(let S=0;S<y.length;S++)h=y[S],Object.prototype.hasOwnProperty.call(f,h)&&(o[h]=f[h])}}function T(o){var u=1;o=o.split(":");let h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function A(o){c.setTimeout(()=>{throw o},0)}function g(){var o=Ea;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class mt{constructor(){this.h=this.g=null}add(u,h){let f=Dr.get();f.set(u,h),this.h?this.h.next=f:this.g=f,this.h=f}}var Dr=new $(()=>new X_,o=>o.reset());class X_{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Pr,kr=!1,Ea=new mt,$d=()=>{let o=c.Promise.resolve(void 0);Pr=()=>{o.then(Z_)}};var Z_=()=>{for(var o;o=g();){try{o.h.call(o.g)}catch(h){A(h)}var u=Dr;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}kr=!1};function Pt(){this.s=this.s,this.C=this.C}Pt.prototype.s=!1,Pt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var ev=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return o}();function Nr(o,u){if(Se.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,f=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(xe){e:{try{se(u.nodeName);var b=!0;break e}catch{}b=!1}b||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:tv[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Nr.aa.h.call(this)}}N(Nr,Se);var tv={2:"touch",3:"pen",4:"mouse"};Nr.prototype.h=function(){Nr.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var xr="closure_listenable_"+(1e6*Math.random()|0),nv=0;function rv(o,u,h,f,b){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!f,this.ha=b,this.key=++nv,this.da=this.fa=!1}function ds(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function fs(o){this.src=o,this.g={},this.h=0}fs.prototype.add=function(o,u,h,f,b){var S=o.toString();o=this.g[S],o||(o=this.g[S]=[],this.h++);var P=ba(o,u,f,b);return-1<P?(u=o[P],h||(u.fa=!1)):(u=new rv(u,this.src,S,!!f,b),u.fa=h,o.push(u)),u};function Ta(o,u){var h=u.type;if(h in o.g){var f=o.g[h],b=Array.prototype.indexOf.call(f,u,void 0),S;(S=0<=b)&&Array.prototype.splice.call(f,b,1),S&&(ds(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function ba(o,u,h,f){for(var b=0;b<o.length;++b){var S=o[b];if(!S.da&&S.listener==u&&S.capture==!!h&&S.ha==f)return b}return-1}var Aa="closure_lm_"+(1e6*Math.random()|0),Sa={};function qd(o,u,h,f,b){if(f&&f.once)return Gd(o,u,h,f,b);if(Array.isArray(u)){for(var S=0;S<u.length;S++)qd(o,u[S],h,f,b);return null}return h=Pa(h),o&&o[xr]?o.K(u,h,d(f)?!!f.capture:!!f,b):zd(o,u,h,!1,f,b)}function zd(o,u,h,f,b,S){if(!u)throw Error("Invalid event type");var P=d(b)?!!b.capture:!!b,ie=Ca(o);if(ie||(o[Aa]=ie=new fs(o)),h=ie.add(u,h,f,P,S),h.proxy)return h;if(f=iv(),h.proxy=f,f.src=o,f.listener=h,o.addEventListener)ev||(b=P),b===void 0&&(b=!1),o.addEventListener(u.toString(),f,b);else if(o.attachEvent)o.attachEvent(Kd(u.toString()),f);else if(o.addListener&&o.removeListener)o.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return h}function iv(){function o(h){return u.call(o.src,o.listener,h)}let u=sv;return o}function Gd(o,u,h,f,b){if(Array.isArray(u)){for(var S=0;S<u.length;S++)Gd(o,u[S],h,f,b);return null}return h=Pa(h),o&&o[xr]?o.L(u,h,d(f)?!!f.capture:!!f,b):zd(o,u,h,!0,f,b)}function Wd(o,u,h,f,b){if(Array.isArray(u))for(var S=0;S<u.length;S++)Wd(o,u[S],h,f,b);else f=d(f)?!!f.capture:!!f,h=Pa(h),o&&o[xr]?(o=o.i,u=String(u).toString(),u in o.g&&(S=o.g[u],h=ba(S,h,f,b),-1<h&&(ds(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete o.g[u],o.h--)))):o&&(o=Ca(o))&&(u=o.g[u.toString()],o=-1,u&&(o=ba(u,h,f,b)),(h=-1<o?u[o]:null)&&Ra(h))}function Ra(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[xr])Ta(u.i,o);else{var h=o.type,f=o.proxy;u.removeEventListener?u.removeEventListener(h,f,o.capture):u.detachEvent?u.detachEvent(Kd(h),f):u.addListener&&u.removeListener&&u.removeListener(f),(h=Ca(u))?(Ta(h,o),h.h==0&&(h.src=null,u[Aa]=null)):ds(o)}}}function Kd(o){return o in Sa?Sa[o]:Sa[o]="on"+o}function sv(o,u){if(o.da)o=!0;else{u=new Nr(u,this);var h=o.listener,f=o.ha||o.src;o.fa&&Ra(o),o=h.call(f,u)}return o}function Ca(o){return o=o[Aa],o instanceof fs?o:null}var Da="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pa(o){return typeof o=="function"?o:(o[Da]||(o[Da]=function(u){return o.handleEvent(u)}),o[Da])}function Re(){Pt.call(this),this.i=new fs(this),this.M=this,this.F=null}N(Re,Pt),Re.prototype[xr]=!0,Re.prototype.removeEventListener=function(o,u,h,f){Wd(this,o,u,h,f)};function Oe(o,u){var h,f=o.F;if(f)for(h=[];f;f=f.F)h.push(f);if(o=o.M,f=u.type||u,typeof u=="string")u=new Se(u,o);else if(u instanceof Se)u.target=u.target||o;else{var b=u;u=new Se(f,o),v(u,b)}if(b=!0,h)for(var S=h.length-1;0<=S;S--){var P=u.g=h[S];b=ps(P,f,!0,u)&&b}if(P=u.g=o,b=ps(P,f,!0,u)&&b,b=ps(P,f,!1,u)&&b,h)for(S=0;S<h.length;S++)P=u.g=h[S],b=ps(P,f,!1,u)&&b}Re.prototype.N=function(){if(Re.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],f=0;f<h.length;f++)ds(h[f]);delete o.g[u],o.h--}}this.F=null},Re.prototype.K=function(o,u,h,f){return this.i.add(String(o),u,!1,h,f)},Re.prototype.L=function(o,u,h,f){return this.i.add(String(o),u,!0,h,f)};function ps(o,u,h,f){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var b=!0,S=0;S<u.length;++S){var P=u[S];if(P&&!P.da&&P.capture==h){var ie=P.listener,be=P.ha||P.src;P.fa&&Ta(o.i,P),b=ie.call(be,f)!==!1&&b}}return b&&!f.defaultPrevented}function Hd(o,u,h){if(typeof o=="function")h&&(o=E(o,h));else if(o&&typeof o.handleEvent=="function")o=E(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(o,u||0)}function Qd(o){o.g=Hd(()=>{o.g=null,o.i&&(o.i=!1,Qd(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class ov extends Pt{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Qd(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Or(o){Pt.call(this),this.h=o,this.g={}}N(Or,Pt);var Yd=[];function Jd(o){ne(o.g,function(u,h){this.g.hasOwnProperty(h)&&Ra(u)},o),o.g={}}Or.prototype.N=function(){Or.aa.N.call(this),Jd(this)},Or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ka=c.JSON.stringify,av=c.JSON.parse,cv=class{stringify(o){return c.JSON.stringify(o,void 0)}parse(o){return c.JSON.parse(o,void 0)}};function Na(){}Na.prototype.h=null;function Xd(o){return o.h||(o.h=o.i())}function Zd(){}var Mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xa(){Se.call(this,"d")}N(xa,Se);function Oa(){Se.call(this,"c")}N(Oa,Se);var tn={},ef=null;function ms(){return ef=ef||new Re}tn.La="serverreachability";function tf(o){Se.call(this,tn.La,o)}N(tf,Se);function Lr(o){let u=ms();Oe(u,new tf(u))}tn.STAT_EVENT="statevent";function nf(o,u){Se.call(this,tn.STAT_EVENT,o),this.stat=u}N(nf,Se);function Me(o){let u=ms();Oe(u,new nf(u,o))}tn.Ma="timingevent";function rf(o,u){Se.call(this,tn.Ma,o),this.size=u}N(rf,Se);function Vr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){o()},u)}function Fr(){this.g=!0}Fr.prototype.xa=function(){this.g=!1};function uv(o,u,h,f,b,S){o.info(function(){if(o.g)if(S)for(var P="",ie=S.split("&"),be=0;be<ie.length;be++){var Z=ie[be].split("=");if(1<Z.length){var Ce=Z[0];Z=Z[1];var De=Ce.split("_");P=2<=De.length&&De[1]=="type"?P+(Ce+"="+Z+"&"):P+(Ce+"=redacted&")}}else P=null;else P=S;return"XMLHTTP REQ ("+f+") [attempt "+b+"]: "+u+`
`+h+`
`+P})}function lv(o,u,h,f,b,S,P){o.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+b+"]: "+u+`
`+h+`
`+S+" "+P})}function Ln(o,u,h,f){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+dv(o,h)+(f?" "+f:"")})}function hv(o,u){o.info(function(){return"TIMEOUT: "+u})}Fr.prototype.info=function(){};function dv(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var f=h[o];if(!(2>f.length)){var b=f[1];if(Array.isArray(b)&&!(1>b.length)){var S=b[0];if(S!="noop"&&S!="stop"&&S!="close")for(var P=1;P<b.length;P++)b[P]=""}}}}return ka(h)}catch{return u}}var gs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ma;function ys(){}N(ys,Na),ys.prototype.g=function(){return new XMLHttpRequest},ys.prototype.i=function(){return{}},Ma=new ys;function kt(o,u,h,f){this.j=o,this.i=u,this.l=h,this.R=f||1,this.U=new Or(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new of}function of(){this.i=null,this.g="",this.h=!1}var af={},La={};function Va(o,u,h){o.L=1,o.v=ws(gt(u)),o.m=h,o.P=!0,cf(o,null)}function cf(o,u){o.F=Date.now(),_s(o),o.A=gt(o.v);var h=o.A,f=o.R;Array.isArray(f)||(f=[String(f)]),Ef(h.i,"t",f),o.C=0,h=o.j.J,o.h=new of,o.g=jf(o.j,h?u:null,!o.m),0<o.O&&(o.M=new ov(E(o.Y,o,o.g),o.O)),u=o.U,h=o.g,f=o.ca;var b="readystatechange";Array.isArray(b)||(b&&(Yd[0]=b.toString()),b=Yd);for(var S=0;S<b.length;S++){var P=qd(h,b[S],f||u.handleEvent,!1,u.h||u);if(!P)break;u.g[P.key]=P}u=o.H?m(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Lr(),uv(o.i,o.u,o.A,o.l,o.R,o.m)}kt.prototype.ca=function(o){o=o.target;let u=this.M;u&&yt(o)==3?u.j():this.Y(o)},kt.prototype.Y=function(o){try{if(o==this.g)e:{let De=yt(this.g);var u=this.g.Ba();let Un=this.g.Z();if(!(3>De)&&(De!=3||this.g&&(this.h.h||this.g.oa()||Df(this.g)))){this.J||De!=4||u==7||(u==8||0>=Un?Lr(3):Lr(2)),Fa(this);var h=this.g.Z();this.X=h;t:if(uf(this)){var f=Df(this.g);o="";var b=f.length,S=yt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nn(this),Ur(this);var P="";break t}this.h.i=new c.TextDecoder}for(u=0;u<b;u++)this.h.h=!0,o+=this.h.i.decode(f[u],{stream:!(S&&u==b-1)});f.length=0,this.h.g+=o,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=h==200,lv(this.i,this.u,this.A,this.l,this.R,De,h),this.o){if(this.T&&!this.K){t:{if(this.g){var ie,be=this.g;if((ie=be.g?be.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(ie)){var Z=ie;break t}}Z=null}if(h=Z)Ln(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ua(this,h);else{this.o=!1,this.s=3,Me(12),nn(this),Ur(this);break e}}if(this.P){h=!0;let Je;for(;!this.J&&this.C<P.length;)if(Je=fv(this,P),Je==La){De==4&&(this.s=4,Me(14),h=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(Je==af){this.s=4,Me(15),Ln(this.i,this.l,P,"[Invalid Chunk]"),h=!1;break}else Ln(this.i,this.l,Je,null),Ua(this,Je);if(uf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||P.length!=0||this.h.h||(this.s=1,Me(16),h=!1),this.o=this.o&&h,!h)Ln(this.i,this.l,P,"[Invalid Chunked Response]"),nn(this),Ur(this);else if(0<P.length&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.ba&&!Ce.M&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Ga(Ce),Ce.M=!0,Me(11))}}else Ln(this.i,this.l,P,null),Ua(this,P);De==4&&nn(this),this.o&&!this.J&&(De==4?Lf(this.j,this):(this.o=!1,_s(this)))}else Pv(this.g),h==400&&0<P.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),nn(this),Ur(this)}}}catch{}finally{}};function uf(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function fv(o,u){var h=o.C,f=u.indexOf(`
`,h);return f==-1?La:(h=Number(u.substring(h,f)),isNaN(h)?af:(f+=1,f+h>u.length?La:(u=u.slice(f,f+h),o.C=f+h,u)))}kt.prototype.cancel=function(){this.J=!0,nn(this)};function _s(o){o.S=Date.now()+o.I,lf(o,o.I)}function lf(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Vr(E(o.ba,o),u)}function Fa(o){o.B&&(c.clearTimeout(o.B),o.B=null)}kt.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(hv(this.i,this.A),this.L!=2&&(Lr(),Me(17)),nn(this),this.s=2,Ur(this)):lf(this,this.S-o)};function Ur(o){o.j.G==0||o.J||Lf(o.j,o)}function nn(o){Fa(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Jd(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Ua(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||ja(h.h,o))){if(!o.K&&ja(h.h,o)&&h.G==3){try{var f=h.Da.g.parse(u)}catch{f=null}if(Array.isArray(f)&&f.length==3){var b=f;if(b[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Ss(h),bs(h);else break e;za(h),Me(18)}}else h.za=b[1],0<h.za-h.T&&37500>b[2]&&h.F&&h.v==0&&!h.C&&(h.C=Vr(E(h.Za,h),6e3));if(1>=ff(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else sn(h,11)}else if((o.K||h.g==o)&&Ss(h),!W(u))for(b=h.Da.g.parse(u),u=0;u<b.length;u++){let Z=b[u];if(h.T=Z[0],Z=Z[1],h.G==2)if(Z[0]=="c"){h.K=Z[1],h.ia=Z[2];let Ce=Z[3];Ce!=null&&(h.la=Ce,h.j.info("VER="+h.la));let De=Z[4];De!=null&&(h.Aa=De,h.j.info("SVER="+h.Aa));let Un=Z[5];Un!=null&&typeof Un=="number"&&0<Un&&(f=1.5*Un,h.L=f,h.j.info("backChannelRequestTimeoutMs_="+f)),f=h;let Je=o.g;if(Je){let Cs=Je.g?Je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var S=f.h;S.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Ba(S,S.h),S.h=null))}if(f.D){let Wa=Je.g?Je.g.getResponseHeader("X-HTTP-Session-Id"):null;Wa&&(f.ya=Wa,oe(f.I,f.D,Wa))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),f=h;var P=o;if(f.qa=Uf(f,f.J?f.ia:null,f.W),P.K){pf(f.h,P);var ie=P,be=f.L;be&&(ie.I=be),ie.B&&(Fa(ie),_s(ie)),f.g=P}else Of(f);0<h.i.length&&As(h)}else Z[0]!="stop"&&Z[0]!="close"||sn(h,7);else h.G==3&&(Z[0]=="stop"||Z[0]=="close"?Z[0]=="stop"?sn(h,7):qa(h):Z[0]!="noop"&&h.l&&h.l.ta(Z),h.v=0)}}Lr(4)}catch{}}var pv=class{constructor(o,u){this.g=o,this.map=u}};function hf(o){this.l=o||10,c.PerformanceNavigationTiming?(o=c.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function df(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function ff(o){return o.h?1:o.g?o.g.size:0}function ja(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Ba(o,u){o.g?o.g.add(u):o.h=u}function pf(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}hf.prototype.cancel=function(){if(this.i=mf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function mf(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let h of o.g.values())u=u.concat(h.D);return u}return x(o.i)}function mv(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(l(o)){for(var u=[],h=o.length,f=0;f<h;f++)u.push(o[f]);return u}u=[],h=0;for(f in o)u[h++]=o[f];return u}function gv(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(l(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(let f in o)u[h++]=f;return u}}}function gf(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(l(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=gv(o),f=mv(o),b=f.length,S=0;S<b;S++)u.call(void 0,f[S],h&&h[S],o)}var yf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yv(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var f=o[h].indexOf("="),b=null;if(0<=f){var S=o[h].substring(0,f);b=o[h].substring(f+1)}else S=o[h];u(S,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function rn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof rn){this.h=o.h,vs(this,o.j),this.o=o.o,this.g=o.g,Is(this,o.s),this.l=o.l;var u=o.i,h=new $r;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),_f(this,h),this.m=o.m}else o&&(u=String(o).match(yf))?(this.h=!1,vs(this,u[1]||"",!0),this.o=jr(u[2]||""),this.g=jr(u[3]||"",!0),Is(this,u[4]),this.l=jr(u[5]||"",!0),_f(this,u[6]||"",!0),this.m=jr(u[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}rn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Br(u,vf,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Br(u,vf,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Br(h,h.charAt(0)=="/"?Iv:vv,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Br(h,Ev)),o.join("")};function gt(o){return new rn(o)}function vs(o,u,h){o.j=h?jr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Is(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function _f(o,u,h){u instanceof $r?(o.i=u,Tv(o.i,o.h)):(h||(u=Br(u,wv)),o.i=new $r(u,o.h))}function oe(o,u,h){o.i.set(u,h)}function ws(o){return oe(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function jr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Br(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,_v),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function _v(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var vf=/[#\/\?@]/g,vv=/[#\?:]/g,Iv=/[#\?]/g,wv=/[#\?@]/g,Ev=/#/g;function $r(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Nt(o){o.g||(o.g=new Map,o.h=0,o.i&&yv(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=$r.prototype,n.add=function(o,u){Nt(this),this.i=null,o=Vn(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function If(o,u){Nt(o),u=Vn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function wf(o,u){return Nt(o),u=Vn(o,u),o.g.has(u)}n.forEach=function(o,u){Nt(this),this.g.forEach(function(h,f){h.forEach(function(b){o.call(u,b,f,this)},this)},this)},n.na=function(){Nt(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let f=0;f<u.length;f++){let b=o[f];for(let S=0;S<b.length;S++)h.push(u[f])}return h},n.V=function(o){Nt(this);let u=[];if(typeof o=="string")wf(this,o)&&(u=u.concat(this.g.get(Vn(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},n.set=function(o,u){return Nt(this),this.i=null,o=Vn(this,o),wf(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Ef(o,u,h){If(o,u),0<h.length&&(o.i=null,o.g.set(Vn(o,u),x(h)),o.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var f=u[h];let S=encodeURIComponent(String(f)),P=this.V(f);for(f=0;f<P.length;f++){var b=S;P[f]!==""&&(b+="="+encodeURIComponent(String(P[f]))),o.push(b)}}return this.i=o.join("&")};function Vn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function Tv(o,u){u&&!o.j&&(Nt(o),o.i=null,o.g.forEach(function(h,f){var b=f.toLowerCase();f!=b&&(If(this,f),Ef(this,b,h))},o)),o.j=u}function bv(o,u){let h=new Fr;if(c.Image){let f=new Image;f.onload=R(xt,h,"TestLoadImage: loaded",!0,u,f),f.onerror=R(xt,h,"TestLoadImage: error",!1,u,f),f.onabort=R(xt,h,"TestLoadImage: abort",!1,u,f),f.ontimeout=R(xt,h,"TestLoadImage: timeout",!1,u,f),c.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=o}else u(!1)}function Av(o,u){let h=new Fr,f=new AbortController,b=setTimeout(()=>{f.abort(),xt(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:f.signal}).then(S=>{clearTimeout(b),S.ok?xt(h,"TestPingServer: ok",!0,u):xt(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(b),xt(h,"TestPingServer: error",!1,u)})}function xt(o,u,h,f,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),f(h)}catch{}}function Sv(){this.g=new cv}function Rv(o,u,h){let f=h||"";try{gf(o,function(b,S){let P=b;d(b)&&(P=ka(b)),u.push(f+S+"="+encodeURIComponent(P))})}catch(b){throw u.push(f+"type="+encodeURIComponent("_badmap")),b}}function qr(o){this.l=o.Ub||null,this.j=o.eb||!1}N(qr,Na),qr.prototype.g=function(){return new Es(this.l,this.j)},qr.prototype.i=function(o){return function(){return o}}({});function Es(o,u){Re.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Es,Re),n=Es.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Gr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Gr(this)),this.g&&(this.readyState=3,Gr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tf(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tf(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?zr(this):Gr(this),this.readyState==3&&Tf(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,zr(this))},n.Qa=function(o){this.g&&(this.response=o,zr(this))},n.ga=function(){this.g&&zr(this)};function zr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Gr(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function Gr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function bf(o){let u="";return ne(o,function(h,f){u+=f,u+=":",u+=h,u+=`\r
`}),u}function $a(o,u,h){e:{for(f in h){var f=!1;break e}f=!0}f||(h=bf(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):oe(o,u,h))}function ue(o){Re.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(ue,Re);var Cv=/^https?$/i,Dv=["POST","PUT"];n=ue.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,h,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ma.g(),this.v=this.o?Xd(this.o):Xd(Ma),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(S){Af(this,S);return}if(o=h||"",h=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var b in f)h.set(b,f[b]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let S of f.keys())h.set(S,f.get(S));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),b=c.FormData&&o instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Dv,u,void 0))||f||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,P]of h)this.g.setRequestHeader(S,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cf(this),this.u=!0,this.g.send(o),this.u=!1}catch(S){Af(this,S)}};function Af(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Sf(o),Ts(o)}function Sf(o){o.A||(o.A=!0,Oe(o,"complete"),Oe(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Oe(this,"complete"),Oe(this,"abort"),Ts(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),ue.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Rf(this):this.bb())},n.bb=function(){Rf(this)};function Rf(o){if(o.h&&typeof a<"u"&&(!o.v[1]||yt(o)!=4||o.Z()!=2)){if(o.u&&yt(o)==4)Hd(o.Ea,0,o);else if(Oe(o,"readystatechange"),yt(o)==4){o.h=!1;try{let P=o.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var f;if(f=P===0){var b=String(o.D).match(yf)[1]||null;!b&&c.self&&c.self.location&&(b=c.self.location.protocol.slice(0,-1)),f=!Cv.test(b?b.toLowerCase():"")}h=f}if(h)Oe(o,"complete"),Oe(o,"success");else{o.m=6;try{var S=2<yt(o)?o.g.statusText:""}catch{S=""}o.l=S+" ["+o.Z()+"]",Sf(o)}}finally{Ts(o)}}}}function Ts(o,u){if(o.g){Cf(o);let h=o.g,f=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Oe(o,"ready");try{h.onreadystatechange=f}catch{}}}function Cf(o){o.I&&(c.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function yt(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<yt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),av(u)}};function Df(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Pv(o){let u={};o=(o.g&&2<=yt(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<o.length;f++){if(W(o[f]))continue;var h=T(o[f]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=u[b]||[];u[b]=S,S.push(h)}w(u,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function Pf(o){this.Aa=0,this.i=[],this.j=new Fr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,o),this.cb=Wr("retryDelaySeedMs",1e4,o),this.Wa=Wr("forwardChannelMaxRetries",2,o),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new hf(o&&o.concurrentRequestLimit),this.Da=new Sv,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Pf.prototype,n.la=8,n.G=1,n.connect=function(o,u,h,f){Me(0),this.W=o,this.H=u||{},h&&f!==void 0&&(this.H.OSID=h,this.H.OAID=f),this.F=this.X,this.I=Uf(this,null,this.W),As(this)};function qa(o){if(kf(o),o.G==3){var u=o.U++,h=gt(o.I);if(oe(h,"SID",o.K),oe(h,"RID",u),oe(h,"TYPE","terminate"),Kr(o,h),u=new kt(o,o.j,u),u.L=2,u.v=ws(gt(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=jf(u.j,null),u.g.ea(u.v)),u.F=Date.now(),_s(u)}Ff(o)}function bs(o){o.g&&(Ga(o),o.g.cancel(),o.g=null)}function kf(o){bs(o),o.u&&(c.clearTimeout(o.u),o.u=null),Ss(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&c.clearTimeout(o.s),o.s=null)}function As(o){if(!df(o.h)&&!o.s){o.s=!0;var u=o.Ga;Pr||$d(),kr||(Pr(),kr=!0),Ea.add(u,o),o.B=0}}function kv(o,u){return ff(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Vr(E(o.Ga,o,u),Vf(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let b=new kt(this,this.j,o),S=this.o;if(this.S&&(S?(S=m(S),v(S,this.S)):S=this.S),this.m!==null||this.O||(b.H=S,S=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var f=this.i[h];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(u+=f,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=xf(this,b,u),h=gt(this.I),oe(h,"RID",o),oe(h,"CVER",22),this.D&&oe(h,"X-HTTP-Session-Id",this.D),Kr(this,h),S&&(this.O?u="headers="+encodeURIComponent(String(bf(S)))+"&"+u:this.m&&$a(h,this.m,S)),Ba(this.h,b),this.Ua&&oe(h,"TYPE","init"),this.P?(oe(h,"$req",u),oe(h,"SID","null"),b.T=!0,Va(b,h,null)):Va(b,h,u),this.G=2}}else this.G==3&&(o?Nf(this,o):this.i.length==0||df(this.h)||Nf(this))};function Nf(o,u){var h;u?h=u.l:h=o.U++;let f=gt(o.I);oe(f,"SID",o.K),oe(f,"RID",h),oe(f,"AID",o.T),Kr(o,f),o.m&&o.o&&$a(f,o.m,o.o),h=new kt(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=xf(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Ba(o.h,h),Va(h,f,u)}function Kr(o,u){o.H&&ne(o.H,function(h,f){oe(u,f,h)}),o.l&&gf({},function(h,f){oe(u,f,h)})}function xf(o,u,h){h=Math.min(o.i.length,h);var f=o.l?E(o.l.Na,o.l,o):null;e:{var b=o.i;let S=-1;for(;;){let P=["count="+h];S==-1?0<h?(S=b[0].g,P.push("ofs="+S)):S=0:P.push("ofs="+S);let ie=!0;for(let be=0;be<h;be++){let Z=b[be].g,Ce=b[be].map;if(Z-=S,0>Z)S=Math.max(0,b[be].g-100),ie=!1;else try{Rv(Ce,P,"req"+Z+"_")}catch{f&&f(Ce)}}if(ie){f=P.join("&");break e}}}return o=o.i.splice(0,h),u.D=o,f}function Of(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;Pr||$d(),kr||(Pr(),kr=!0),Ea.add(u,o),o.v=0}}function za(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Vr(E(o.Fa,o),Vf(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Mf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Vr(E(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),bs(this),Mf(this))};function Ga(o){o.A!=null&&(c.clearTimeout(o.A),o.A=null)}function Mf(o){o.g=new kt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=gt(o.qa);oe(u,"RID","rpc"),oe(u,"SID",o.K),oe(u,"AID",o.T),oe(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&oe(u,"TO",o.ja),oe(u,"TYPE","xmlhttp"),Kr(o,u),o.m&&o.o&&$a(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=ws(gt(u)),h.m=null,h.P=!0,cf(h,o)}n.Za=function(){this.C!=null&&(this.C=null,bs(this),za(this),Me(19))};function Ss(o){o.C!=null&&(c.clearTimeout(o.C),o.C=null)}function Lf(o,u){var h=null;if(o.g==u){Ss(o),Ga(o),o.g=null;var f=2}else if(ja(o.h,u))h=u.D,pf(o.h,u),f=1;else return;if(o.G!=0){if(u.o)if(f==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var b=o.B;f=ms(),Oe(f,new rf(f,h)),As(o)}else Of(o);else if(b=u.s,b==3||b==0&&0<u.X||!(f==1&&kv(o,u)||f==2&&za(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),b){case 1:sn(o,5);break;case 4:sn(o,10);break;case 3:sn(o,6);break;default:sn(o,2)}}}function Vf(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function sn(o,u){if(o.j.info("Error code "+u),u==2){var h=E(o.fb,o),f=o.Xa;let b=!f;f=new rn(f||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||vs(f,"https"),ws(f),b?bv(f.toString(),h):Av(f.toString(),h)}else Me(2);o.G=0,o.l&&o.l.sa(u),Ff(o),kf(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function Ff(o){if(o.G=0,o.ka=[],o.l){let u=mf(o.h);(u.length!=0||o.i.length!=0)&&(k(o.ka,u),k(o.ka,o.i),o.h.i.length=0,x(o.i),o.i.length=0),o.l.ra()}}function Uf(o,u,h){var f=h instanceof rn?gt(h):new rn(h);if(f.g!="")u&&(f.g=u+"."+f.g),Is(f,f.s);else{var b=c.location;f=b.protocol,u=u?u+"."+b.hostname:b.hostname,b=+b.port;var S=new rn(null);f&&vs(S,f),u&&(S.g=u),b&&Is(S,b),h&&(S.l=h),f=S}return h=o.D,u=o.ya,h&&u&&oe(f,h,u),oe(f,"VER",o.la),Kr(o,f),f}function jf(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new ue(new qr({eb:h})):new ue(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bf(){}n=Bf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Rs(){}Rs.prototype.g=function(o,u){return new Fe(o,u)};function Fe(o,u){Re.call(this),this.g=new Pf(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!W(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!W(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Fn(this)}N(Fe,Re),Fe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fe.prototype.close=function(){qa(this.g)},Fe.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=ka(o),o=h);u.i.push(new pv(u.Ya++,o)),u.G==3&&As(u)},Fe.prototype.N=function(){this.g.l=null,delete this.j,qa(this.g),delete this.g,Fe.aa.N.call(this)};function $f(o){xa.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let h in u){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}N($f,xa);function qf(){Oa.call(this),this.status=1}N(qf,Oa);function Fn(o){this.g=o}N(Fn,Bf),Fn.prototype.ua=function(){Oe(this.g,"a")},Fn.prototype.ta=function(o){Oe(this.g,new $f(o))},Fn.prototype.sa=function(o){Oe(this.g,new qf)},Fn.prototype.ra=function(){Oe(this.g,"b")},Rs.prototype.createWebChannel=Rs.prototype.g,Fe.prototype.send=Fe.prototype.o,Fe.prototype.open=Fe.prototype.m,Fe.prototype.close=Fe.prototype.close,Cl=bt.createWebChannelTransport=function(){return new Rs},Rl=bt.getStatEventTarget=function(){return ms()},Sl=bt.Event=tn,Bo=bt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gs.NO_ERROR=0,gs.TIMEOUT=8,gs.HTTP_ERROR=6,Vi=bt.ErrorCode=gs,sf.COMPLETE="complete",Al=bt.EventType=sf,Zd.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",Re.prototype.listen=Re.prototype.K,sr=bt.WebChannel=Zd,bl=bt.FetchXmlHttpFactory=qr,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,Tl=bt.XhrIo=ue}).apply(typeof jo<"u"?jo:typeof self<"u"?self:typeof window<"u"?window:{});var Hg="@firebase/firestore";var Te=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Te.UNAUTHENTICATED=new Te(null),Te.GOOGLE_CREDENTIALS=new Te("google-credentials-uid"),Te.FIRST_PARTY=new Te("first-party-uid"),Te.MOCK_USER=new Te("mock-user");var Rr="10.12.1";var Cn=new zt("@firebase/firestore");function Fi(){return Cn.logLevel}function O(n,...e){if(Cn.logLevel<=H.DEBUG){let t=e.map(md);Cn.debug(`Firestore (${Rr}): ${n}`,...t)}}function Rt(n,...e){if(Cn.logLevel<=H.ERROR){let t=e.map(md);Cn.error(`Firestore (${Rr}): ${n}`,...t)}}function mr(n,...e){if(Cn.logLevel<=H.WARN){let t=e.map(md);Cn.warn(`Firestore (${Rr}): ${n}`,...t)}}function md(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function B(n="Unexpected state"){let e=`FIRESTORE (${Rr}) INTERNAL ASSERTION FAILED: `+n;throw Rt(e),new Error(e)}function _e(n,e){n||B()}function J(n,e){return n}var C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},M=class extends $e{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var St=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Go=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ol=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Te.UNAUTHENTICATED))}shutdown(){}},Ml=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Ll=class{constructor(e){this.t=e,this.currentUser=Te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),s=new St;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new St,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=s;e.enqueueRetryable(()=>I(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},c=l=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new St)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new Go(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new Te(e)}},Vl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Te.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Fl=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Vl(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Te.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ul=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},jl=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,O("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_e(typeof t.token=="string"),this.R=t.token,new Ul(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function XA(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Bl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=XA(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function te(n,e){return n<e?-1:n>e?1:0}function gr(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var ke=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?te(this.nanoseconds,e.nanoseconds):te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var z=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ke(0,0))}static max(){return new n(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Wo=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&B(),r===void 0?r=e.length-t:r>e.length-t&&B(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},de=class n extends Wo{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new M(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},ZA=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Qe=class n extends Wo{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return ZA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new M(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new M(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new M(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(s(),i++)}if(s(),a)throw new M(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var F=class n{constructor(e){this.path=e}static fromPath(e){return new n(de.fromString(e))}static fromName(e){return new n(de.fromString(e).popFirst(5))}static empty(){return new n(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return de.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new de(e.slice()))}};var $l=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};$l.UNKNOWN_ID=-1;function e0(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=z.fromTimestamp(r===1e9?new ke(t+1,0):new ke(t,r));return new Dn(i,F.empty(),e)}function t0(n){return new Dn(n.readTime,n.key,-1)}var Dn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(z.min(),F.empty(),-1)}static max(){return new n(z.max(),F.empty(),-1)}};function n0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=F.comparator(n.documentKey,e.documentKey),t!==0?t:te(n.largestBatchId,e.largestBatchId))}var r0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ql=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function gd(n){return I(this,null,function*(){if(n.code!==C.FAILED_PRECONDITION||n.message!==r0)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var D=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++s,a&&s===i&&t()},l=>r(l))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;t(e[d]).next(p=>{a[d]=p,++c,c===s&&r(a)},p=>i(p))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function i0(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function os(n){return n.name==="IndexedDbTransactionError"}var Ay=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ga(n){return n==null}function Gi(n){return n===0&&1/n==-1/0}function s0(n){return typeof n=="number"&&Number.isInteger(n)&&!Gi(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var o0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pP=[...o0,"documentOverlays"],a0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],c0=a0,mP=[...c0,"indexConfiguration","indexState","indexEntries"];function Qg(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function as(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Sy(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var fe=class n{constructor(e,t){this.comparator=e,this.root=t||dt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ur(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ur(this.root,e,this.comparator,!1)}getReverseIterator(){return new ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ur(this.root,e,this.comparator,!0)}},ur=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},dt=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();let e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}};dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(e,t,r,i,s){return this}insert(e,t,r){return new dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ne=class n{constructor(e){this.comparator=e,this.data=new fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ko(this.data.getIterator())}getIteratorFrom(e){return new Ko(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ko=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var An=class n{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ne(Qe.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gr(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ho=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Le=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ho("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Le.EMPTY_BYTE_STRING=new Le("");var u0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ct(n){if(_e(!!n),typeof n=="string"){let e=0,t=u0.exec(n);if(_e(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:le(n.seconds),nanos:le(n.nanos)}}function le(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xt(n){return typeof n=="string"?Le.fromBase64String(n):Le.fromUint8Array(n)}function yd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function _d(n){let e=n.mapValue.fields.__previous_value__;return yd(e)?_d(e):e}function Wi(n){let e=Ct(n.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}var zl=class{constructor(e,t,r,i,s,a,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d}},Qo=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var $o={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Pn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yd(n)?4:Ry(n)?9007199254740991:10:B()}function pt(n,e){if(n===e)return!0;let t=Pn(n);if(t!==Pn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wi(n).isEqual(Wi(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=Ct(i.timestampValue),c=Ct(s.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Xt(i.bytesValue).isEqual(Xt(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return le(i.geoPointValue.latitude)===le(s.geoPointValue.latitude)&&le(i.geoPointValue.longitude)===le(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return le(i.integerValue)===le(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=le(i.doubleValue),c=le(s.doubleValue);return a===c?Gi(a)===Gi(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return gr(n.arrayValue.values||[],e.arrayValue.values||[],pt);case 10:return function(i,s){let a=i.mapValue.fields||{},c=s.mapValue.fields||{};if(Qg(a)!==Qg(c))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(c[l]===void 0||!pt(a[l],c[l])))return!1;return!0}(n,e);default:return B()}}function Ki(n,e){return(n.values||[]).find(t=>pt(t,e))!==void 0}function yr(n,e){if(n===e)return 0;let t=Pn(n),r=Pn(e);if(t!==r)return te(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return te(n.booleanValue,e.booleanValue);case 2:return function(s,a){let c=le(s.integerValue||s.doubleValue),l=le(a.integerValue||a.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Yg(n.timestampValue,e.timestampValue);case 4:return Yg(Wi(n),Wi(e));case 5:return te(n.stringValue,e.stringValue);case 6:return function(s,a){let c=Xt(s),l=Xt(a);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){let c=s.split("/"),l=a.split("/");for(let d=0;d<c.length&&d<l.length;d++){let p=te(c[d],l[d]);if(p!==0)return p}return te(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){let c=te(le(s.latitude),le(a.latitude));return c!==0?c:te(le(s.longitude),le(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,a){let c=s.values||[],l=a.values||[];for(let d=0;d<c.length&&d<l.length;++d){let p=yr(c[d],l[d]);if(p)return p}return te(c.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,a){if(s===$o.mapValue&&a===$o.mapValue)return 0;if(s===$o.mapValue)return 1;if(a===$o.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=a.fields||{},p=Object.keys(d);l.sort(),p.sort();for(let _=0;_<l.length&&_<p.length;++_){let E=te(l[_],p[_]);if(E!==0)return E;let R=yr(c[l[_]],d[p[_]]);if(R!==0)return R}return te(l.length,p.length)}(n.mapValue,e.mapValue);default:throw B()}}function Yg(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return te(n,e);let t=Ct(n),r=Ct(e),i=te(t.seconds,r.seconds);return i!==0?i:te(t.nanos,r.nanos)}function _r(n){return Gl(n)}function Gl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ct(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Xt(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return F.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=Gl(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${Gl(t.fields[a])}`;return i+"}"}(n.mapValue):B()}function Jg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wl(n){return!!n&&"integerValue"in n}function vd(n){return!!n&&"arrayValue"in n}function Xg(n){return!!n&&"nullValue"in n}function Zg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dl(n){return!!n&&"mapValue"in n}function ji(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return as(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ji(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ji(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ry(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var At=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Dl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ji(t)}setAll(e){let t=Qe.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}a?r[c.lastSegment()]=ji(a):i.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Dl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Dl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){as(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(ji(this.value))}};var rt=class n{constructor(e,t,r,i,s,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=c}static newInvalidDocument(e){return new n(e,0,z.min(),z.min(),z.min(),At.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,z.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,z.min(),z.min(),At.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,z.min(),z.min(),At.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var vr=class{constructor(e,t){this.position=e,this.inclusive=t}};function ey(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=F.comparator(F.fromName(a.referenceValue),t.key):r=yr(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ty(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pt(n.position[t],e.position[t]))return!1;return!0}var Ir=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function l0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Yo=class{},ye=class n extends Yo{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Hl(e,t,r):t==="array-contains"?new Jl(e,r):t==="in"?new Xl(e,r):t==="not-in"?new Zl(e,r):t==="array-contains-any"?new eh(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ql(e,r):new Yl(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(yr(t,this.value)):t!==null&&Pn(this.value)===Pn(t)&&this.matchesComparison(yr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},it=class n extends Yo{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Cy(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Cy(n){return n.op==="and"}function Dy(n){return h0(n)&&Cy(n)}function h0(n){for(let e of n.filters)if(e instanceof it)return!1;return!0}function Kl(n){if(n instanceof ye)return n.field.canonicalString()+n.op.toString()+_r(n.value);if(Dy(n))return n.filters.map(e=>Kl(e)).join(",");{let e=n.filters.map(t=>Kl(t)).join(",");return`${n.op}(${e})`}}function Py(n,e){return n instanceof ye?function(r,i){return i instanceof ye&&r.op===i.op&&r.field.isEqual(i.field)&&pt(r.value,i.value)}(n,e):n instanceof it?function(r,i){return i instanceof it&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,c)=>s&&Py(a,i.filters[c]),!0):!1}(n,e):void B()}function ky(n){return n instanceof ye?function(t){return`${t.field.canonicalString()} ${t.op} ${_r(t.value)}`}(n):n instanceof it?function(t){return t.op.toString()+" {"+t.getFilters().map(ky).join(" ,")+"}"}(n):"Filter"}var Hl=class extends ye{constructor(e,t,r){super(e,t,r),this.key=F.fromName(r.referenceValue)}matches(e){let t=F.comparator(e.key,this.key);return this.matchesComparison(t)}},Ql=class extends ye{constructor(e,t){super(e,"in",t),this.keys=Ny("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Yl=class extends ye{constructor(e,t){super(e,"not-in",t),this.keys=Ny("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Ny(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>F.fromName(r.referenceValue))}var Jl=class extends ye{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return vd(t)&&Ki(t.arrayValue,this.value)}},Xl=class extends ye{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ki(this.value.arrayValue,t)}},Zl=class extends ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ki(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Ki(this.value.arrayValue,t)}},eh=class extends ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!vd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ki(this.value.arrayValue,r))}};var th=class{constructor(e,t=null,r=[],i=[],s=null,a=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=c,this.ue=null}};function ny(n,e=null,t=[],r=[],i=null,s=null,a=null){return new th(n,e,t,r,i,s,a)}function Id(n){let e=J(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Kl(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ga(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_r(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_r(r)).join(",")),e.ue=t}return e.ue}function wd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!l0(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Py(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ty(n.startAt,e.startAt)&&ty(n.endAt,e.endAt)}function nh(n){return F.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var kn=class{constructor(e,t=null,r=[],i=[],s=null,a="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function d0(n,e,t,r,i,s,a,c){return new kn(n,e,t,r,i,s,a,c)}function xy(n){return new kn(n)}function ry(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Oy(n){return n.collectionGroup!==null}function Bi(n){let e=J(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Ne(Qe.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ir(s,r))}),t.has(Qe.keyField().canonicalString())||e.ce.push(new Ir(Qe.keyField(),r))}return e.ce}function ft(n){let e=J(n);return e.le||(e.le=f0(e,Bi(n))),e.le}function f0(n,e){if(n.limitType==="F")return ny(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ir(i.field,s)});let t=n.endAt?new vr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new vr(n.startAt.position,n.startAt.inclusive):null;return ny(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function rh(n,e){let t=n.filters.concat([e]);return new kn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ih(n,e,t){return new kn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ya(n,e){return wd(ft(n),ft(e))&&n.limitType===e.limitType}function My(n){return`${Id(ft(n))}|lt:${n.limitType}`}function or(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ky(i)).join(", ")}]`),ga(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>_r(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>_r(i)).join(",")),`Target(${r})`}(ft(n))}; limitType=${n.limitType})`}function _a(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):F.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Bi(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,c,l){let d=ey(a,c,l);return a.inclusive?d<=0:d<0}(r.startAt,Bi(r),i)||r.endAt&&!function(a,c,l){let d=ey(a,c,l);return a.inclusive?d>=0:d>0}(r.endAt,Bi(r),i))}(n,e)}function p0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ly(n){return(e,t)=>{let r=!1;for(let i of Bi(n)){let s=m0(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function m0(n,e,t){let r=n.field.isKeyField()?F.comparator(e.key,t.key):function(s,a,c){let l=a.data.field(s),d=c.data.field(s);return l!==null&&d!==null?yr(l,d):B()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}var Zt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Sy(this.inner)}size(){return this.innerSize}};var g0=new fe(F.comparator);function en(){return g0}var Vy=new fe(F.comparator);function Ui(...n){let e=Vy;for(let t of n)e=e.insert(t.key,t);return e}function y0(n){let e=Vy;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Sn(){return $i()}function Fy(){return $i()}function $i(){return new Zt(n=>n.toString(),(n,e)=>n.isEqual(e))}var yP=new fe(F.comparator),_0=new Ne(F.comparator);function Y(...n){let e=_0;for(let t of n)e=e.add(t);return e}var v0=new Ne(te);function I0(){return v0}function Uy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gi(e)?"-0":e}}function jy(n){return{integerValue:""+n}}function w0(n,e){return s0(e)?jy(e):Uy(n,e)}var wr=class{constructor(){this._=void 0}};function E0(n,e,t){return n instanceof Hi?function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yd(s)&&(s=_d(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Er?By(n,e):n instanceof Tr?$y(n,e):function(i,s){let a=b0(i,s),c=iy(a)+iy(i.Pe);return Wl(a)&&Wl(i.Pe)?jy(c):Uy(i.serializer,c)}(n,e)}function T0(n,e,t){return n instanceof Er?By(n,e):n instanceof Tr?$y(n,e):t}function b0(n,e){return n instanceof Qi?function(r){return Wl(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Hi=class extends wr{},Er=class extends wr{constructor(e){super(),this.elements=e}};function By(n,e){let t=qy(e);for(let r of n.elements)t.some(i=>pt(i,r))||t.push(r);return{arrayValue:{values:t}}}var Tr=class extends wr{constructor(e){super(),this.elements=e}};function $y(n,e){let t=qy(e);for(let r of n.elements)t=t.filter(i=>!pt(i,r));return{arrayValue:{values:t}}}var Qi=class extends wr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function iy(n){return le(n.integerValue||n.doubleValue)}function qy(n){return vd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function A0(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Er&&i instanceof Er||r instanceof Tr&&i instanceof Tr?gr(r.elements,i.elements,pt):r instanceof Qi&&i instanceof Qi?pt(r.Pe,i.Pe):r instanceof Hi&&i instanceof Hi}(n.transform,e.transform)}var qi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zo(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Yi=class{};function zy(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sh(n.key,qi.none()):new Ji(n.key,n.data,qi.none());{let t=n.data,r=At.empty(),i=new Ne(Qe.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new br(n.key,r,new An(i.toArray()),qi.none())}}function S0(n,e,t){n instanceof Ji?function(i,s,a){let c=i.value.clone(),l=oy(i.fieldTransforms,s,a.transformResults);c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof br?function(i,s,a){if(!zo(i.precondition,s))return void s.convertToUnknownDocument(a.version);let c=oy(i.fieldTransforms,s,a.transformResults),l=s.data;l.setAll(Gy(i)),l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function zi(n,e,t,r){return n instanceof Ji?function(s,a,c,l){if(!zo(s.precondition,a))return c;let d=s.value.clone(),p=ay(s.fieldTransforms,l,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof br?function(s,a,c,l){if(!zo(s.precondition,a))return c;let d=ay(s.fieldTransforms,l,a),p=a.data;return p.setAll(Gy(s)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(n,e,t,r):function(s,a,c){return zo(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(n,e,t)}function sy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gr(r,i,(s,a)=>A0(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ji=class extends Yi{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},br=class extends Yi{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Gy(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function oy(n,e,t){let r=new Map;_e(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,c=e.data.field(s.field);r.set(s.field,T0(a,c,t[i]))}return r}function ay(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,E0(s,a,e))}return r}var sh=class extends Yi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var oh=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&S0(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=zi(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=zi(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Fy();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,c=this.applyToLocalView(a,s.mutatedFields);c=t.has(i.key)?null:c;let l=zy(a,c);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(z.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Y())}isEqual(e){return this.batchId===e.batchId&&gr(this.mutations,e.mutations,(t,r)=>sy(t,r))&&gr(this.baseMutations,e.baseMutations,(t,r)=>sy(t,r))}};var ah=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ch=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var me,Q;function Wy(n){if(n===void 0)return Rt("GRPC error has no .code"),C.UNKNOWN;switch(n){case me.OK:return C.OK;case me.CANCELLED:return C.CANCELLED;case me.UNKNOWN:return C.UNKNOWN;case me.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case me.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case me.INTERNAL:return C.INTERNAL;case me.UNAVAILABLE:return C.UNAVAILABLE;case me.UNAUTHENTICATED:return C.UNAUTHENTICATED;case me.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case me.NOT_FOUND:return C.NOT_FOUND;case me.ALREADY_EXISTS:return C.ALREADY_EXISTS;case me.PERMISSION_DENIED:return C.PERMISSION_DENIED;case me.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case me.ABORTED:return C.ABORTED;case me.OUT_OF_RANGE:return C.OUT_OF_RANGE;case me.UNIMPLEMENTED:return C.UNIMPLEMENTED;case me.DATA_LOSS:return C.DATA_LOSS;default:return B()}}(Q=me||(me={}))[Q.OK=0]="OK",Q[Q.CANCELLED=1]="CANCELLED",Q[Q.UNKNOWN=2]="UNKNOWN",Q[Q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Q[Q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Q[Q.NOT_FOUND=5]="NOT_FOUND",Q[Q.ALREADY_EXISTS=6]="ALREADY_EXISTS",Q[Q.PERMISSION_DENIED=7]="PERMISSION_DENIED",Q[Q.UNAUTHENTICATED=16]="UNAUTHENTICATED",Q[Q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Q[Q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Q[Q.ABORTED=10]="ABORTED",Q[Q.OUT_OF_RANGE=11]="OUT_OF_RANGE",Q[Q.UNIMPLEMENTED=12]="UNIMPLEMENTED",Q[Q.INTERNAL=13]="INTERNAL",Q[Q.UNAVAILABLE=14]="UNAVAILABLE",Q[Q.DATA_LOSS=15]="DATA_LOSS";var cy=null;function R0(){return new TextEncoder}var C0=new Jt([4294967295,4294967295],0);function uy(n){let e=R0().encode(n),t=new El;return t.update(e),new Uint8Array(t.digest())}function ly(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jt([t,r],0),new Jt([i,s],0)]}var uh=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Rn(`Invalid padding: ${t}`);if(r<0)throw new Rn(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rn(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Rn(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Jt.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Jt.fromNumber(r)));return i.compare(C0)===1&&(i=new Jt([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=uy(e),[r,i]=ly(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,i,t);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let t=uy(e),[r,i]=ly(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Rn=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Jo=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Xi.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(z.min(),i,new fe(te),en(),Y())}},Xi=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Y(),Y(),Y())}};var hr=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Xo=class{constructor(e,t){this.targetId=e,this.me=t}},Zo=class{constructor(e,t,r=Le.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ea=class{constructor(){this.fe=0,this.ge=dy(),this.pe=Le.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Y(),t=Y(),r=Y();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:B()}}),new Xi(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=dy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},lh=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=en(),this.qe=hy(),this.Qe=new fe(te)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:B()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(nh(s))if(r===0){let a=new F(s.path);this.Ue(t,a,rt.newNoDocument(a,z.min()))}else _e(r===1);else{let a=this.Ye(t);if(a!==r){let c=this.Ze(e),l=c?this.Xe(c,e,a):1;if(l!==0){this.je(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}cy?.et(function(p,_,E,R,N){var x,k,$,W,X,se;let xe={localCacheCount:p,existenceFilterCount:_.count,databaseId:E.database,projectId:E.projectId},ne=_.unchangedNames;return ne&&(xe.bloomFilter={applied:N===0,hashCount:(x=ne?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(W=($=(k=ne?.bits)===null||k===void 0?void 0:k.bitmap)===null||$===void 0?void 0:$.length)!==null&&W!==void 0?W:0,padding:(se=(X=ne?.bits)===null||X===void 0?void 0:X.padding)!==null&&se!==void 0?se:0,mightContain:w=>{var m;return(m=R?.mightContain(w))!==null&&m!==void 0&&m}}),xe}(a,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,a,c;try{a=Xt(r).toUint8Array()}catch(l){if(l instanceof Ho)return mr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new uh(a,i,s)}catch(l){return mr(l instanceof Rn?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,a)=>{let c=this.Je(a);if(c){if(s.current&&nh(c.target)){let l=new F(c.target.path);this.ke.get(l)!==null||this.it(a,l)||this.Ue(a,l,rt.newNoDocument(l,e))}s.be&&(t.set(a,s.Ce()),s.ve())}});let r=Y();this.qe.forEach((s,a)=>{let c=!0;a.forEachWhile(l=>{let d=this.Je(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));let i=new Jo(e,t,this.Qe,this.ke,r);return this.ke=en(),this.qe=hy(),this.Qe=new fe(te),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ea,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ne(te),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ea),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function hy(){return new fe(F.comparator)}function dy(){return new fe(F.comparator)}var D0={asc:"ASCENDING",desc:"DESCENDING"},P0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k0={and:"AND",or:"OR"},hh=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function dh(n,e){return n.useProto3Json||ga(e)?e:{value:e}}function fh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ky(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dr(n){return _e(!!n),z.fromTimestamp(function(t){let r=Ct(t);return new ke(r.seconds,r.nanos)}(n))}function Hy(n,e){return ph(n,e).canonicalString()}function ph(n,e){let t=function(i){return new de(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Qy(n){let e=de.fromString(n);return _e(e_(e)),e}function Pl(n,e){let t=Qy(e);if(t.get(1)!==n.databaseId.projectId)throw new M(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new M(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new F(Jy(t))}function Yy(n,e){return Hy(n.databaseId,e)}function N0(n){let e=Qy(n);return e.length===4?de.emptyPath():Jy(e)}function fy(n){return new de(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Jy(n){return _e(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function x0(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,p){return d.useProto3Json?(_e(p===void 0||typeof p=="string"),Le.fromBase64String(p||"")):(_e(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Le.fromUint8Array(p||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){let p=d.code===void 0?C.UNKNOWN:Wy(d.code);return new M(p,d.message||"")}(a);t=new Zo(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Pl(n,r.document.name),s=dr(r.document.updateTime),a=r.document.createTime?dr(r.document.createTime):z.min(),c=new At({mapValue:{fields:r.document.fields}}),l=rt.newFoundDocument(i,s,a,c),d=r.targetIds||[],p=r.removedTargetIds||[];t=new hr(d,p,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Pl(n,r.document),s=r.readTime?dr(r.readTime):z.min(),a=rt.newNoDocument(i,s),c=r.removedTargetIds||[];t=new hr([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Pl(n,r.document),s=r.removedTargetIds||[];t=new hr([],s,i,null)}else{if(!("filter"in e))return B();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new ch(i,s),c=r.targetId;t=new Xo(c,a)}}return t}function O0(n,e){return{documents:[Yy(n,e.path)]}}function M0(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Yy(n,i);let s=function(d){if(d.length!==0)return Zy(it.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let a=function(d){if(d.length!==0)return d.map(p=>function(E){return{field:ar(E.field),direction:F0(E.dir)}}(p))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let c=dh(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:i}}function L0(n){let e=N0(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){_e(r===1);let p=t.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];t.where&&(s=function(_){let E=Xy(_);return E instanceof it&&Dy(E)?E.getFilters():[E]}(t.where));let a=[];t.orderBy&&(a=function(_){return _.map(E=>function(N){return new Ir(cr(N.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(E))}(t.orderBy));let c=null;t.limit&&(c=function(_){let E;return E=typeof _=="object"?_.value:_,ga(E)?null:E}(t.limit));let l=null;t.startAt&&(l=function(_){let E=!!_.before,R=_.values||[];return new vr(R,E)}(t.startAt));let d=null;return t.endAt&&(d=function(_){let E=!_.before,R=_.values||[];return new vr(R,E)}(t.endAt)),d0(e,i,a,s,c,"F",l,d)}function V0(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Xy(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=cr(t.unaryFilter.field);return ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=cr(t.unaryFilter.field);return ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=cr(t.unaryFilter.field);return ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=cr(t.unaryFilter.field);return ye.create(a,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(n):n.fieldFilter!==void 0?function(t){return ye.create(cr(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return it.create(t.compositeFilter.filters.map(r=>Xy(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B()}}(t.compositeFilter.op))}(n):B()}function F0(n){return D0[n]}function U0(n){return P0[n]}function j0(n){return k0[n]}function ar(n){return{fieldPath:n.canonicalString()}}function cr(n){return Qe.fromServerFormat(n.fieldPath)}function Zy(n){return n instanceof ye?function(t){if(t.op==="=="){if(Zg(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NAN"}};if(Xg(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Zg(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NOT_NAN"}};if(Xg(t.value))return{unaryFilter:{field:ar(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ar(t.field),op:U0(t.op),value:t.value}}}(n):n instanceof it?function(t){let r=t.getFilters().map(i=>Zy(i));return r.length===1?r[0]:{compositeFilter:{op:j0(t.op),filters:r}}}(n):B()}function e_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Zi=class n{constructor(e,t,r,i,s=z.min(),a=z.min(),c=Le.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var mh=class{constructor(e){this.ct=e}};function B0(n){let e=L0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ih(e,e.limit,"L"):e}var ta=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(le(e.integerValue));else if("doubleValue"in e){let r=le(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Gi(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"&&(r=Ct(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Xt(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?Ry(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):B()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let r=e.fields||{};this.Et(t,55);for(let i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){let r=e.values||[];this.Et(t,50);for(let i of r)this.It(i,t)}gt(e,t){this.Et(t,37),F.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};ta.bt=new ta;var gh=class{constructor(){this._n=new yh}addToCollectionParentIndex(e,t){return this._n.add(t),D.resolve()}getCollectionParents(e,t){return D.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return D.resolve()}deleteFieldIndex(e,t){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,t){return D.resolve()}getDocumentsMatchingTarget(e,t){return D.resolve(null)}getIndexType(e,t){return D.resolve(0)}getFieldIndexes(e,t){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,t){return D.resolve(Dn.min())}getMinOffsetFromCollectionGroup(e,t){return D.resolve(Dn.min())}updateCollectionGroup(e,t,r){return D.resolve()}updateIndexEntries(e,t){return D.resolve()}},yh=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ne(de.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ne(de.comparator)).toArray()}};var _P=new Uint8Array(0);var ht=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ht.DEFAULT_COLLECTION_PERCENTILE=10,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ht.DEFAULT=new ht(41943040,ht.DEFAULT_COLLECTION_PERCENTILE,ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ht.DISABLED=new ht(-1,0,0);var es=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var _h=class{constructor(){this.changes=new Zt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?D.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var vh=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ih=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&zi(r.mutation,i,An.empty(),ke.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Y()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Y()){let i=Sn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=Ui();return s.forEach((c,l)=>{a=a.insert(c,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Sn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Y()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,c)=>{t.set(a,c)})})}computeViews(e,t,r,i){let s=en(),a=$i(),c=function(){return $i()}();return t.forEach((l,d)=>{let p=r.get(d.key);i.has(d.key)&&(p===void 0||p.mutation instanceof br)?s=s.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),zi(p.mutation,d,p.mutation.getFieldMask(),ke.now())):a.set(d.key,An.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,p)=>a.set(d,p)),t.forEach((d,p)=>{var _;return c.set(d,new vh(p,(_=a.get(d))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,t){let r=$i(),i=new fe((a,c)=>a-c),s=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let c of a)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let p=r.get(l)||An.empty();p=c.applyToLocalView(d,p),r.set(l,p);let _=(i.get(c.batchId)||Y()).add(l);i=i.insert(c.batchId,_)})}).next(()=>{let a=[],c=i.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,p=l.value,_=Fy();p.forEach(E=>{if(!s.has(E)){let R=zy(t.get(E),r.get(E));R!==null&&_.set(E,R),s=s.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,_))}return D.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return F.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Oy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):D.resolve(Sn()),c=-1,l=s;return a.next(d=>D.forEach(d,(p,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),s.get(p)?D.resolve():this.remoteDocumentCache.getEntry(e,p).next(E=>{l=l.insert(p,E)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,Y())).next(p=>({batchId:c,changes:y0(p)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new F(t)).next(r=>{let i=Ui();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=Ui();return this.indexManager.getCollectionParents(e,s).next(c=>D.forEach(c,l=>{let d=function(_,E){return new kn(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(p=>{p.forEach((_,E)=>{a=a.insert(_,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((l,d)=>{let p=d.getKey();a.get(p)===null&&(a=a.insert(p,rt.newInvalidDocument(p)))});let c=Ui();return a.forEach((l,d)=>{let p=s.get(l);p!==void 0&&zi(p.mutation,d,An.empty(),ke.now()),_a(t,d)&&(c=c.insert(l,d))}),c})}};var wh=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return D.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}}(t)),D.resolve()}getNamedQuery(e,t){return D.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:B0(i.bundledQuery),readTime:dr(i.readTime)}}(t)),D.resolve()}};var Eh=class{constructor(){this.overlays=new fe(F.comparator),this.hr=new Map}getOverlay(e,t){return D.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Sn();return D.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),D.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),D.resolve()}getOverlaysForCollection(e,t,r){let i=Sn(),s=t.length+1,a=new F(t.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return D.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new fe((d,p)=>d-p),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let p=s.get(d.largestBatchId);p===null&&(p=Sn(),s=s.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}let c=Sn(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,p)=>c.set(d,p)),!(c.size()>=i)););return D.resolve(c)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ah(t,r));let s=this.hr.get(t);s===void 0&&(s=Y(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}};var ts=class{constructor(){this.Pr=new Ne(ge.Ir),this.Tr=new Ne(ge.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let r=new ge(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new ge(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){let t=new F(new de([])),r=new ge(t,e),i=new ge(t,e+1),s=[];return this.Tr.forEachInRange([r,i],a=>{this.Ar(a),s.push(a.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new F(new de([])),r=new ge(t,e),i=new ge(t,e+1),s=Y();return this.Tr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new ge(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ge=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return F.comparator(e.key,t.key)||te(e.pr,t.pr)}static Er(e,t){return te(e.pr,t.pr)||F.comparator(e.key,t.key)}};var Th=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Ne(ge.Ir)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new oh(s,t,r,i);this.mutationQueue.push(a);for(let c of i)this.wr=this.wr.add(new ge(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return D.resolve(a)}lookupMutationBatch(e,t){return D.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.br(r),s=i<0?0:i;return D.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ge(t,0),i=new ge(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],a=>{let c=this.Sr(a.pr);s.push(c)}),D.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ne(te);return t.forEach(i=>{let s=new ge(i,0),a=new ge(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,a],c=>{r=r.add(c.pr)})}),D.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;F.isDocumentKey(s)||(s=s.child(""));let a=new ge(new F(s),0),c=new Ne(te);return this.wr.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(l.pr)),!0)},a),D.resolve(this.Dr(c))}Dr(e){let t=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){_e(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return D.forEach(t.mutations,i=>{let s=new ge(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){let r=new ge(t,0),i=this.wr.firstAfterOrEqual(r);return D.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var bh=class{constructor(e){this.vr=e,this.docs=function(){return new fe(F.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return D.resolve(r?r.document.mutableCopy():rt.newInvalidDocument(t))}getEntries(e,t){let r=en();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():rt.newInvalidDocument(i))}),D.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=en(),a=t.path,c=new F(a.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:p}}=l.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||n0(t0(p),r)<=0||(i.has(p.key)||_a(t,p))&&(s=s.insert(p.key,p.mutableCopy()))}return D.resolve(s)}getAllFromCollectionGroup(e,t,r,i){B()}Fr(e,t){return D.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ah(this)}getSize(e){return D.resolve(this.size)}},Ah=class extends _h{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),D.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var Sh=class{constructor(e){this.persistence=e,this.Mr=new Zt(t=>Id(t),wd),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ts,this.targetCount=0,this.Lr=es.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),D.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new es(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,D.resolve()}updateTargetData(e,t){return this.qn(t),D.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Mr.forEach((a,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Mr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),D.waitFor(s).next(()=>i)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,t){let r=this.Mr.get(t)||null;return D.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),D.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),D.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),D.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Nr.gr(t);return D.resolve(r)}containsKey(e,t){return D.resolve(this.Nr.containsKey(t))}};var Rh=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new Ay(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Sh(this),this.indexManager=new gh,this.remoteDocumentCache=function(i){return new bh(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new mh(t),this.$r=new wh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Eh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new Th(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new Ch(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return D.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}},Ch=class extends ql{constructor(e){super(),this.currentSequenceNumber=e}},Dh=class n{constructor(e){this.persistence=e,this.zr=new ts,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw B()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),D.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),D.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Jr,r=>{let i=F.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,z.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return D.or([()=>D.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var Ph=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=Y(),i=Y();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var kh=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Nh=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Lm()?8:i0(Ie())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ji(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new kh;return this.Ji(e,t,a).next(c=>{if(s.result=c,this.Ui)return this.Yi(e,t,a,c.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Fi()<=H.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",or(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),D.resolve()):(Fi()<=H.DEBUG&&O("QueryEngine","Query:",or(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Fi()<=H.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",or(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ft(t))):D.resolve())}ji(e,t){if(ry(t))return D.resolve(null);let r=ft(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ih(t,null,"F"),r=ft(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=Y(...s);return this.zi.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{let d=this.Zi(t,c);return this.Xi(t,d,a,l.readTime)?this.ji(e,ih(t,null,"F")):this.es(e,d,t,l)}))})))}Hi(e,t,r,i){return ry(t)||i.isEqual(z.min())?D.resolve(null):this.zi.getDocuments(e,r).next(s=>{let a=this.Zi(t,s);return this.Xi(t,a,r,i)?D.resolve(null):(Fi()<=H.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),or(t)),this.es(e,a,t,e0(i,-1)).next(c=>c))})}Zi(e,t){let r=new Ne(Ly(e));return t.forEach((i,s)=>{_a(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Fi()<=H.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",or(t)),this.zi.getDocumentsMatchingQuery(e,t,Dn.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var xh=class{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new fe(te),this.rs=new Zt(s=>Id(s),wd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ih(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function $0(n,e,t,r){return new xh(n,e,t,r)}function t_(n,e){return I(this,null,function*(){let t=J(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],c=[],l=Y();for(let d of i){a.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}for(let d of s){c.push(d.batchId);for(let p of d.mutations)l=l.add(p.key)}return t.localDocuments.getDocuments(r,l).next(d=>({us:d,removedBatchIds:a,addedBatchIds:c}))})})})}function n_(n){let e=J(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function q0(n,e){let t=J(n),r=e.snapshotVersion,i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;let c=[];e.targetChanges.forEach((p,_)=>{let E=i.get(_);if(!E)return;c.push(t.Qr.removeMatchingKeys(s,p.removedDocuments,_).next(()=>t.Qr.addMatchingKeys(s,p.addedDocuments,_)));let R=E.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(_)!==null?R=R.withResumeToken(Le.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):p.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(p.resumeToken,r)),i=i.insert(_,R),function(x,k,$){return x.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(E,R,p)&&c.push(t.Qr.updateTargetData(s,R))});let l=en(),d=Y();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,p))}),c.push(z0(s,a,e.documentUpdates).next(p=>{l=p.cs,d=p.ls})),!r.isEqual(z.min())){let p=t.Qr.getLastRemoteSnapshotVersion(s).next(_=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(p)}return D.waitFor(c).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(t.ns=i,s))}function z0(n,e,t){let r=Y(),i=Y();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=en();return t.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(z.min())?(e.removeEntry(c,l.readTime),a=a.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),a=a.insert(c,l)):O("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{cs:a,ls:i}})}function G0(n,e){let t=J(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,D.resolve(i)):t.Qr.allocateTargetId(r).next(a=>(i=new Zi(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Oh(n,e,t){return I(this,null,function*(){let r=J(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!os(a))throw a;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function py(n,e,t){let r=J(n),i=z.min(),s=Y();return r.persistence.runTransaction("Execute query","readwrite",a=>function(l,d,p){let _=J(l),E=_.rs.get(p);return E!==void 0?D.resolve(_.ns.get(E)):_.Qr.getTargetData(d,p)}(r,a,ft(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(a,c.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(a,e,t?i:z.min(),t?s:Y())).next(c=>(W0(r,p0(e),c),{documents:c,hs:s})))}function W0(n,e,t){let r=n.ss.get(e)||z.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}var na=class{constructor(){this.activeTargetIds=I0()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Mh=class{constructor(){this.no=new na,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new na,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Lh=class{io(e){}shutdown(){}};var ra=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var qo=null;function kl(){return qo===null?qo=function(){return 268435456+Math.round(2147483648*Math.random())}():qo++,"0x"+qo.toString(16)}var K0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Vh=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Pe="WebChannelConnection",Fh=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,a){let c=kl(),l=this.vo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${c}:`,l,i);let d={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(d,s,a),this.Mo(t,l,d,i).then(p=>(O("RestConnection",`Received RPC '${t}' ${c}: `,p),p),p=>{throw mr("RestConnection",`RPC '${t}' ${c} failed with error: `,p,"url: ",l,"request:",i),p})}xo(t,r,i,s,a,c){return this.Co(t,r,i,s,a)}Fo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}vo(t,r){let i=K0[t];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){let s=kl();return new Promise((a,c)=>{let l=new Tl;l.setWithCredentials(!0),l.listenOnce(Al.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Vi.NO_ERROR:let p=l.getResponseJson();O(Pe,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Vi.TIMEOUT:O(Pe,`RPC '${e}' ${s} timed out`),c(new M(C.DEADLINE_EXCEEDED,"Request time out"));break;case Vi.HTTP_ERROR:let _=l.getStatus();if(O(Pe,`RPC '${e}' ${s} failed with status:`,_,"response text:",l.getResponseText()),_>0){let E=l.getResponseJson();Array.isArray(E)&&(E=E[0]);let R=E?.error;if(R&&R.status&&R.message){let N=function(k){let $=k.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf($)>=0?$:C.UNKNOWN}(R.status);c(new M(N,R.message))}else c(new M(C.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new M(C.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{O(Pe,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);O(Pe,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",d,r,15)})}Oo(e,t,r){let i=kl(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Cl(),c=Rl(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.xmlHttpFactory=new bl({})),this.Fo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let p=s.join("");O(Pe,`Creating RPC '${e}' stream ${i}: ${p}`,l);let _=a.createWebChannel(p,l),E=!1,R=!1,N=new Vh({lo:k=>{R?O(Pe,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(E||(O(Pe,`Opening RPC '${e}' stream ${i} transport.`),_.open(),E=!0),O(Pe,`RPC '${e}' stream ${i} sending:`,k),_.send(k))},ho:()=>_.close()}),x=(k,$,W)=>{k.listen($,X=>{try{W(X)}catch(se){setTimeout(()=>{throw se},0)}})};return x(_,sr.EventType.OPEN,()=>{R||(O(Pe,`RPC '${e}' stream ${i} transport opened.`),N.mo())}),x(_,sr.EventType.CLOSE,()=>{R||(R=!0,O(Pe,`RPC '${e}' stream ${i} transport closed`),N.po())}),x(_,sr.EventType.ERROR,k=>{R||(R=!0,mr(Pe,`RPC '${e}' stream ${i} transport errored:`,k),N.po(new M(C.UNAVAILABLE,"The operation could not be completed")))}),x(_,sr.EventType.MESSAGE,k=>{var $;if(!R){let W=k.data[0];_e(!!W);let X=W,se=X.error||(($=X[0])===null||$===void 0?void 0:$.error);if(se){O(Pe,`RPC '${e}' stream ${i} received error:`,se);let xe=se.status,ne=function(y){let v=me[y];if(v!==void 0)return Wy(v)}(xe),w=se.message;ne===void 0&&(ne=C.INTERNAL,w="Unknown error status: "+xe+" with message "+se.message),R=!0,N.po(new M(ne,w)),_.close()}else O(Pe,`RPC '${e}' stream ${i} received:`,W),N.yo(W)}}),x(c,Sl.STAT_EVENT,k=>{k.stat===Bo.PROXY?O(Pe,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Bo.NOPROXY&&O(Pe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.fo()},0),N}};function Nl(){return typeof document<"u"?document:null}function va(n){return new hh(n,!0)}var ia=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Uh=class{constructor(e,t,r,i,s,a,c,l){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ia(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return I(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return I(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){return I(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===C.RESOURCE_EXHAUSTED?(Rt(t.toString()),Rt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(t)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{let i=new M(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){let r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>I(this,null,function*(){this.state=0,this.start()}))}c_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},jh=class extends Uh{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();let t=x0(this.serializer,e),r=function(s){if(!("targetChange"in s))return z.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?z.min():a.readTime?dr(a.readTime):z.min()}(e);return this.listener.h_(t,r)}P_(e){let t={};t.database=fy(this.serializer),t.addTarget=function(s,a){let c,l=a.target;if(c=nh(l)?{documents:O0(s,l)}:{query:M0(s,l)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Ky(s,a.resumeToken);let d=dh(s,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(z.min())>0){c.readTime=fh(s,a.snapshotVersion.toTimestamp());let d=dh(s,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let r=V0(this.serializer,e);r&&(t.labels=r),this.i_(t)}I_(e){let t={};t.database=fy(this.serializer),t.removeTarget=e,this.i_(t)}};var Bh=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new M(C.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,ph(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new M(C.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.xo(e,ph(t,r),i,a,c,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new M(C.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},$h=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Rt(t),this.y_=!1):O("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var qh=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(a=>{r.enqueueAndForget(()=>I(this,null,function*(){us(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(l){return I(this,null,function*(){let d=J(l);d.M_.add(4),yield cs(d),d.N_.set("Unknown"),d.M_.delete(4),yield Ia(d)})}(this))}))}),this.N_=new $h(r,i)}};function Ia(n){return I(this,null,function*(){if(us(n))for(let e of n.x_)yield e(!0)})}function cs(n){return I(this,null,function*(){for(let e of n.x_)yield e(!1)})}function r_(n,e){let t=J(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),Ad(t)?bd(t):Cr(t).Xo()&&Td(t,e))}function Ed(n,e){let t=J(n),r=Cr(t);t.F_.delete(e),r.Xo()&&i_(t,e),t.F_.size===0&&(r.Xo()?r.n_():us(t)&&t.N_.set("Unknown"))}function Td(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cr(n).P_(e)}function i_(n,e){n.L_.xe(e),Cr(n).I_(e)}function bd(n){n.L_=new lh({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Cr(n).start(),n.N_.w_()}function Ad(n){return us(n)&&!Cr(n).Zo()&&n.F_.size>0}function us(n){return J(n).M_.size===0}function s_(n){n.L_=void 0}function H0(n){return I(this,null,function*(){n.N_.set("Online")})}function Q0(n){return I(this,null,function*(){n.F_.forEach((e,t)=>{Td(n,e)})})}function Y0(n,e){return I(this,null,function*(){s_(n),Ad(n)?(n.N_.D_(e),bd(n)):n.N_.set("Unknown")})}function J0(n,e,t){return I(this,null,function*(){if(n.N_.set("Online"),e instanceof Zo&&e.state===2&&e.cause)try{yield function(i,s){return I(this,null,function*(){let a=s.cause;for(let c of s.targetIds)i.F_.has(c)&&(yield i.remoteSyncer.rejectListen(c,a),i.F_.delete(c),i.L_.removeTarget(c))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield my(n,r)}else if(e instanceof hr?n.L_.Ke(e):e instanceof Xo?n.L_.He(e):n.L_.We(e),!t.isEqual(z.min()))try{let r=yield n_(n.localStore);t.compareTo(r)>=0&&(yield function(s,a){let c=s.L_.rt(a);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let p=s.F_.get(d);p&&s.F_.set(d,p.withResumeToken(l.resumeToken,a))}}),c.targetMismatches.forEach((l,d)=>{let p=s.F_.get(l);if(!p)return;s.F_.set(l,p.withResumeToken(Le.EMPTY_BYTE_STRING,p.snapshotVersion)),i_(s,l);let _=new Zi(p.target,l,d,p.sequenceNumber);Td(s,_)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield my(n,r)}})}function my(n,e,t){return I(this,null,function*(){if(!os(e))throw e;n.M_.add(1),yield cs(n),n.N_.set("Offline"),t||(t=()=>n_(n.localStore)),n.asyncQueue.enqueueRetryable(()=>I(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Ia(n)}))})}function gy(n,e){return I(this,null,function*(){let t=J(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=us(t);t.M_.add(3),yield cs(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Ia(t)})}function X0(n,e){return I(this,null,function*(){let t=J(n);e?(t.M_.delete(2),yield Ia(t)):e||(t.M_.add(2),yield cs(t),t.N_.set("Unknown"))})}function Cr(n){return n.B_||(n.B_=function(t,r,i){let s=J(t);return s.f_(),new jh(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:H0.bind(null,n),To:Q0.bind(null,n),Ao:Y0.bind(null,n),h_:J0.bind(null,n)}),n.x_.push(e=>I(this,null,function*(){e?(n.B_.t_(),Ad(n)?bd(n):n.N_.set("Unknown")):(yield n.B_.stop(),s_(n))}))),n.B_}var zh=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new St,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,c=new n(e,t,a,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function o_(n,e){if(Rt("AsyncQueue",`${e}: ${n}`),os(n))return new M(C.UNAVAILABLE,`${e}: ${n}`);throw n}var sa=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||F.comparator(t.key,r.key):(t,r)=>F.comparator(t.key,r.key),this.keyedMap=Ui(),this.sortedSet=new fe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var oa=class{constructor(){this.q_=new fe(F.comparator)}track(e){let t=e.doc.key,r=this.q_.get(t);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(t,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(t):e.type===1&&r.type===2?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):B():this.q_=this.q_.insert(t,e)}Q_(){let e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ar=class n{constructor(e,t,r,i,s,a,c,l,d){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,r,i,s){let a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new n(e,t,sa.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ya(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Gh=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},Wh=class{constructor(){this.queries=new Zt(e=>My(e),ya),this.onlineState="Unknown",this.z_=new Set}};function Z0(n,e){return I(this,null,function*(){let t=J(n),r=3,i=e.query,s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new Gh,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let c=o_(a,`Initialization of query '${or(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&Sd(t)})}function eS(n,e){return I(this,null,function*(){let t=J(n),r=e.query,i=3,s=t.queries.get(r);if(s){let a=s.U_.indexOf(e);a>=0&&(s.U_.splice(a,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function tS(n,e){let t=J(n),r=!1;for(let i of e){let s=i.query,a=t.queries.get(s);if(a){for(let c of a.U_)c.H_(i)&&(r=!0);a.K_=i}}r&&Sd(t)}function nS(n,e,t){let r=J(n),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(t);r.queries.delete(e)}function Sd(n){n.z_.forEach(e=>{e.next()})}var Kh,yy;(yy=Kh||(Kh={})).J_="default",yy.Cache="cache";var Hh=class{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ar(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;let r=t!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=Ar.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Kh.Cache}};var aa=class{constructor(e){this.key=e}},ca=class{constructor(e){this.key=e}},Qh=class{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Y(),this.mutatedKeys=Y(),this.Ia=Ly(e),this.Ta=new sa(this.Ia)}get Ea(){return this.la}da(e,t){let r=t?t.Aa:new oa,i=t?t.Ta:this.Ta,s=t?t.mutatedKeys:this.mutatedKeys,a=i,c=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,_)=>{let E=i.get(p),R=_a(this.query,_)?_:null,N=!!E&&this.mutatedKeys.has(E.key),x=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations),k=!1;E&&R?E.data.isEqual(R.data)?N!==x&&(r.track({type:3,doc:R}),k=!0):this.Ra(E,R)||(r.track({type:2,doc:R}),k=!0,(l&&this.Ia(R,l)>0||d&&this.Ia(R,d)<0)&&(c=!0)):!E&&R?(r.track({type:0,doc:R}),k=!0):E&&!R&&(r.track({type:1,doc:E}),k=!0,(l||d)&&(c=!0)),k&&(R?(a=a.add(R),s=x?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ta:a,Aa:r,Xi:c,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let a=e.Aa.Q_();a.sort((p,_)=>function(R,N){let x=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return x(R)-x(N)}(p.type,_.type)||this.Ia(p.doc,_.doc)),this.Va(r),i=i!=null&&i;let c=t&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,d=l!==this.ha;return this.ha=l,a.length!==0||d?{snapshot:new Ar(this.query,e.Ta,s,a,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new oa,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Y(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new ca(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new aa(r))}),t}pa(e){this.la=e.hs,this.Pa=Y();let t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Ar.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Yh=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Jh=class{constructor(e){this.key=e,this.wa=!1}},Xh=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new Zt(c=>My(c),ya),this.Da=new Map,this.Ca=new Set,this.va=new fe(F.comparator),this.Fa=new Map,this.Ma=new ts,this.xa={},this.Oa=new Map,this.Na=es.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function rS(n,e,t=!0){return I(this,null,function*(){let r=h_(n),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield a_(r,e,t,!0),i})}function iS(n,e){return I(this,null,function*(){let t=h_(n);yield a_(t,e,!0,!1)})}function a_(n,e,t,r){return I(this,null,function*(){let i=yield G0(n.localStore,ft(e)),s=i.targetId,a=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",c;return r&&(c=yield sS(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&r_(n.remoteStore,i),c})}function sS(n,e,t,r,i){return I(this,null,function*(){n.Ba=(_,E,R)=>function(x,k,$,W){return I(this,null,function*(){let X=k.view.da($);X.Xi&&(X=yield py(x.localStore,k.query,!1).then(({documents:w})=>k.view.da(w,X)));let se=W&&W.targetChanges.get(k.targetId),xe=W&&W.targetMismatches.get(k.targetId)!=null,ne=k.view.applyChanges(X,x.isPrimaryClient,se,xe);return vy(x,k.targetId,ne.fa),ne.snapshot})}(n,_,E,R);let s=yield py(n.localStore,e,!0),a=new Qh(e,s.hs),c=a.da(s.documents),l=Xi.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),d=a.applyChanges(c,n.isPrimaryClient,l);vy(n,t,d.fa);let p=new Yh(e,t,a);return n.ba.set(e,p),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),d.snapshot})}function oS(n,e,t){return I(this,null,function*(){let r=J(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(a=>!ya(a,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Oh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ed(r.remoteStore,i.targetId),Zh(r,i.targetId)}).catch(gd))):(Zh(r,i.targetId),yield Oh(r.localStore,i.targetId,!0))})}function aS(n,e){return I(this,null,function*(){let t=J(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ed(t.remoteStore,r.targetId))})}function c_(n,e){return I(this,null,function*(){let t=J(n);try{let r=yield q0(t.localStore,e);e.targetChanges.forEach((i,s)=>{let a=t.Fa.get(s);a&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.wa=!0:i.modifiedDocuments.size>0?_e(a.wa):i.removedDocuments.size>0&&(_e(a.wa),a.wa=!1))}),yield l_(t,r,e)}catch(r){yield gd(r)}})}function _y(n,e,t){let r=J(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ba.forEach((s,a)=>{let c=a.view.j_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){let l=J(a);l.onlineState=c;let d=!1;l.queries.forEach((p,_)=>{for(let E of _.U_)E.j_(c)&&(d=!0)}),d&&Sd(l)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cS(n,e,t){return I(this,null,function*(){let r=J(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Fa.get(e),s=i&&i.key;if(s){let a=new fe(F.comparator);a=a.insert(s,rt.newNoDocument(s,z.min()));let c=Y().add(s),l=new Jo(z.min(),new Map,new fe(te),a,c);yield c_(r,l),r.va=r.va.remove(s),r.Fa.delete(e),Rd(r)}else yield Oh(r.localStore,e,!1).then(()=>Zh(r,e,t)).catch(gd)})}function Zh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||u_(n,r)})}function u_(n,e){n.Ca.delete(e.path.canonicalString());let t=n.va.get(e);t!==null&&(Ed(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),Rd(n))}function vy(n,e,t){for(let r of t)r instanceof aa?(n.Ma.addReference(r.key,e),uS(n,r)):r instanceof ca?(O("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||u_(n,r.key)):B()}function uS(n,e){let t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(O("SyncEngine","New document in limbo: "+t),n.Ca.add(r),Rd(n))}function Rd(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let e=n.Ca.values().next().value;n.Ca.delete(e);let t=new F(de.fromString(e)),r=n.Na.next();n.Fa.set(r,new Jh(t)),n.va=n.va.insert(t,r),r_(n.remoteStore,new Zi(ft(xy(t.path)),r,"TargetPurposeLimboResolution",Ay.oe))}}function l_(n,e,t){return I(this,null,function*(){let r=J(n),i=[],s=[],a=[];r.ba.isEmpty()||(r.ba.forEach((c,l)=>{a.push(r.Ba(l,e,t).then(d=>{if((d||t)&&r.isPrimaryClient){let p=d&&!d.fromCache;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(d){i.push(d);let p=Ph.Ki(l.targetId,d);s.push(p)}}))}),yield Promise.all(a),r.Sa.h_(i),yield function(l,d){return I(this,null,function*(){let p=J(l);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>D.forEach(d,E=>D.forEach(E.qi,R=>p.persistence.referenceDelegate.addReference(_,E.targetId,R)).next(()=>D.forEach(E.Qi,R=>p.persistence.referenceDelegate.removeReference(_,E.targetId,R)))))}catch(_){if(!os(_))throw _;O("LocalStore","Failed to update sequence numbers: "+_)}for(let _ of d){let E=_.targetId;if(!_.fromCache){let R=p.ns.get(E),N=R.snapshotVersion,x=R.withLastLimboFreeSnapshotVersion(N);p.ns=p.ns.insert(E,x)}}})}(r.localStore,s))})}function lS(n,e){return I(this,null,function*(){let t=J(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield t_(t.localStore,e);t.currentUser=e,function(s,a){s.Oa.forEach(c=>{c.forEach(l=>{l.reject(new M(C.CANCELLED,a))})}),s.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield l_(t,r.us)}})}function hS(n,e){let t=J(n),r=t.Fa.get(e);if(r&&r.wa)return Y().add(r.key);{let i=Y(),s=t.Da.get(e);if(!s)return i;for(let a of s){let c=t.ba.get(a);i=i.unionWith(c.view.Ea)}return i}}function h_(n){let e=J(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=c_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cS.bind(null,e),e.Sa.h_=tS.bind(null,e.eventManager),e.Sa.ka=nS.bind(null,e.eventManager),e}var ua=class{constructor(){this.synchronizeTabs=!1}initialize(e){return I(this,null,function*(){this.serializer=va(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return $0(this.persistence,new Nh,e.initialUser,this.serializer)}createPersistence(e){return new Rh(Dh.Hr,this.serializer)}createSharedClientState(e){return new Mh}terminate(){return I(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var ed=class{initialize(e,t){return I(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_y(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lS.bind(null,this.syncEngine),yield X0(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Wh}()}createDatastore(e){let t=va(e.databaseInfo.databaseId),r=function(s){return new Fh(s)}(e.databaseInfo);return function(s,a,c,l){return new Bh(s,a,c,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,c){return new qh(r,i,s,a,c)}(this.localStore,this.datastore,e.asyncQueue,t=>_y(this.syncEngine,t,0),function(){return ra.D()?new ra:new Lh}())}createSyncEngine(e,t){return function(i,s,a,c,l,d,p){let _=new Xh(i,s,a,c,l,d);return p&&(_.La=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return I(this,null,function*(){var e;yield function(r){return I(this,null,function*(){let i=J(r);O("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield cs(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var td=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Rt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var nd=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Te.UNAUTHENTICATED,this.clientId=Bl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>I(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new St;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=o_(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function xl(n,e){return I(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>I(this,null,function*(){r.isEqual(i)||(yield t_(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Iy(n,e){return I(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield fS(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>gy(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>gy(e.remoteStore,i)),n._onlineComponents=e})}function dS(n){return n.name==="FirebaseError"?n.code===C.FAILED_PRECONDITION||n.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function fS(n){return I(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xl(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!dS(t))throw t;mr("Error using user provided cache. Falling back to memory cache: "+t),yield xl(n,new ua)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield xl(n,new ua);return n._offlineComponents})}function pS(n){return I(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield Iy(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield Iy(n,new ed))),n._onlineComponents})}function mS(n){return I(this,null,function*(){let e=yield pS(n),t=e.eventManager;return t.onListen=rS.bind(null,e.syncEngine),t.onUnlisten=oS.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iS.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aS.bind(null,e.syncEngine),t})}function gS(n,e,t={}){let r=new St;return n.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return function(s,a,c,l,d){let p=new td({next:E=>{a.enqueueAndForget(()=>eS(s,_)),E.fromCache&&l.source==="server"?d.reject(new M(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(E)},error:E=>d.reject(E)}),_=new Hh(c,p,{includeMetadataChanges:!0,ra:!0});return Z0(s,_)}(yield mS(n),n.asyncQueue,e,t,r)})),r.promise}function d_(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var wy=new Map;function yS(n,e,t){if(!t)throw new M(C.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _S(n,e,t,r){if(e===!0&&r===!0)throw new M(C.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ey(n){if(F.isDocumentKey(n))throw new M(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function wa(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":B()}function rd(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new M(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=wa(n);throw new M(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var la=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new M(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_S("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=d_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ns=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new la({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new M(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new la(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ol;switch(r.type){case"firstParty":return new Fl(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=wy.get(t);r&&(O("ComponentProvider","Removing Datastore"),wy.delete(t),r.terminate())}(this),Promise.resolve()}};function f_(n,e,t,r={}){var i;let s=(n=rd(n,ns))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=Te.MOCK_USER;else{c=km(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new M(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Te(d)}n._authCredentials=new Ml(new Go(c,l))}}var Sr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Dt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},fr=class n extends Sr{constructor(e,t,r){super(e,t,xy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new F(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function p_(n,e,...t){if(n=Ke(n),yS("collection","path",e),n instanceof ns){let r=de.fromString(e,...t);return Ey(r),new fr(n,null,r)}{if(!(n instanceof Dt||n instanceof fr))throw new M(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(de.fromString(e,...t));return Ey(r),new fr(n.firestore,null,r)}}var id=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ia(this,"async_queue_retry"),this.hu=()=>{let t=Nl();t&&O("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=Nl();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=Nl();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new St;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return I(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!os(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Rt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let i=zh.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&B()}verifyOperationInProgress(){}du(){return I(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};var ha=class extends ns{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new id}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||g_(this),this._firestoreClient.terminate()}};function m_(n,e){let t=typeof n=="object"?n:Zn(),r=typeof n=="string"?n:e||"(default)",i=Ri(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Pm("firestore");s&&f_(i,...s)}return i}function vS(n){return n._firestoreClient||g_(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function g_(n){var e,t,r;let i=n._freezeSettings(),s=function(c,l,d,p){return new zl(c,l,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,d_(p.experimentalLongPollingOptions),p.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new nd(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var rs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Le.fromBase64String(e))}catch(t){throw new M(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Le.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var da=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new M(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var fa=class{constructor(e){this._methodName=e}};var is=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return te(this._lat,e._lat)||te(this._long,e._long)}};var IS=/^__.*__$/;function y_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}var sd=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return ad(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(y_(this.fu)&&IS.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},od=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||va(e)}Fu(e,t,r,i=!1){return new sd({fu:e,methodName:t,vu:r,path:Qe.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wS(n){let e=n._freezeSettings(),t=va(n._databaseId);return new od(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ES(n,e,t,r=!1){return Cd(t,n.Fu(r?4:3,e))}function Cd(n,e){if(__(n=Ke(n)))return bS("Unsupported field value:",e,n),TS(n,e);if(n instanceof fa)return function(r,i){if(!y_(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],a=0;for(let c of r){let l=Cd(c,i.bu(a));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w0(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ke.fromDate(r);return{timestampValue:fh(i.serializer,s)}}if(r instanceof ke){let s=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fh(i.serializer,s)}}if(r instanceof is)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rs)return{bytesValue:Ky(i.serializer,r._byteString)};if(r instanceof Dt){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Du(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Hy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${wa(r)}`)}(n,e)}function TS(n,e){let t={};return Sy(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(n,(r,i)=>{let s=Cd(i,e.pu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function __(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ke||n instanceof is||n instanceof rs||n instanceof Dt||n instanceof fa)}function bS(n,e,t){if(!__(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=wa(t);throw r==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+r)}}var AS=new RegExp("[~\\*/\\[\\]]");function SS(n,e,t){if(e.search(AS)>=0)throw ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new da(...e.split("."))._internalPath}catch{throw ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ad(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new M(C.INVALID_ARGUMENT,c+n+l)}var pa=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new cd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Dd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},cd=class extends pa{data(){return super.data()}};function Dd(n,e){return typeof e=="string"?SS(n,e):e instanceof da?e._internalPath:e._delegate._internalPath}function RS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new M(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ss=class{},ud=class extends ss{};function v_(n,e,...t){let r=[];e instanceof ss&&r.push(e),r=r.concat(t),function(s){let a=s.filter(l=>l instanceof ld).length,c=s.filter(l=>l instanceof ma).length;if(a>1||a>0&&c>0)throw new M(C.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var ma=class n extends ud{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return w_(e._query,t),new Sr(e.firestore,e.converter,rh(e._query,t))}_parse(e){let t=wS(e.firestore);return function(s,a,c,l,d,p,_){let E;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new M(C.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){by(_,p);let R=[];for(let N of _)R.push(Ty(l,s,N));E={arrayValue:{values:R}}}else E=Ty(l,s,_)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||by(_,p),E=ES(c,a,_,p==="in"||p==="not-in");return ye.create(d,p,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function I_(n,e,t){let r=e,i=Dd("where",n);return ma._create(i,r,t)}var ld=class n extends ss{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:it.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i,c=s.getFlattenedFilters();for(let l of c)w_(a,l),a=rh(a,l)}(e._query,t),new Sr(e.firestore,e.converter,rh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Ty(n,e,t){if(typeof(t=Ke(t))=="string"){if(t==="")throw new M(C.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Oy(e)&&t.indexOf("/")!==-1)throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(de.fromString(t));if(!F.isDocumentKey(r))throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jg(n,new F(r))}if(t instanceof Dt)return Jg(n,t._key);throw new M(C.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wa(t)}.`)}function by(n,e){if(!Array.isArray(n)||n.length===0)throw new M(C.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w_(n,e){let t=function(i,s){for(let a of i)for(let c of a.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new M(C.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new M(C.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var hd=class{convertValue(e,t="none"){switch(Pn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw B()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return as(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new is(le(e.latitude),le(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=_d(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Wi(e));default:return null}}convertTimestamp(e){let t=Ct(e);return new ke(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=de.fromString(e);_e(e_(r));let i=new Qo(r.get(1),r.get(3)),s=new F(r.popFirst(5));return i.isEqual(t)||Rt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var lr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dd=class extends pa{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new pr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Dd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},pr=class extends dd{data(e={}){return super.data(e)}},fd=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pr(this._firestore,this._userDataWriter,r.key,r,new lr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new M(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{let l=new pr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new lr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new pr(i._firestore,i._userDataWriter,c.doc.key,c.doc,new lr(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),d=-1,p=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:CS(c.type),doc:l,oldIndex:d,newIndex:p}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function CS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}var pd=class extends hd{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,t)}};function E_(n){n=rd(n,Sr);let e=rd(n.firestore,ha),t=vS(e),r=new pd(e);return RS(n._query),gS(t,n._query).then(i=>new fd(e,r,n,i))}(function(e,t=!0){(function(i){Rr=i})(Kt),Wt(new He("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),c=new ha(new Ll(r.getProvider("auth-internal")),new jl(r.getProvider("app-check-internal")),function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new M(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qo(d.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),we(Hg,"4.6.3",e),we(Hg,"4.6.3","esm2017")})();var Nn=class{constructor(e){return e}},T_="firestore",Pd=class{constructor(){return Ci(T_)}};var kd=new ce("angularfire2.firestore-instances");function DS(n,e){let t=Io(T_,n,e);return t&&new Nn(t)}function PS(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Nn(r)}}var kS={provide:Pd,deps:[[new Ve,kd]]},NS={provide:Nn,useFactory:DS,deps:[[new Ve,kd],wt]};function b_(n,...e){return we("angularfire",vn.full,"fst"),Ue([NS,kS,{provide:kd,useFactory:PS(n),multi:!0,deps:[ae,Ut,nr,In,[new Ve,Li],[new Ve,tr],...e]}])}var A_=ut(p_,!0);var S_=ut(E_,!0);var R_=ut(m_,!0);var C_=ut(v_,!0);var D_=ut(I_,!0);var P_={production:!0,firebaseConfig:{apiKey:"AIzaSyATgCP-L090V221ytPLZS3IWmrP5mBQpcs",authDomain:"growth-tutorials-saas.firebaseapp.com",projectId:"growth-tutorials-saas",storageBucket:"growth-tutorials-saas.appspot.com",messagingSenderId:"112132007998",appId:"1:112132007998:web:a21348190de17b6e0f896f",measurementId:"G-7170ZK3RHF"}};var k_={providers:[bm(Am),Fp(),Sm(),eg(()=>tg(P_.firebaseConfig)),zg(()=>Gg()),b_(()=>R_())]};var Nd;try{Nd=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Nd=!1}var xn=(()=>{let e=class e{constructor(r){this._platformId=r,this.isBrowser=this._platformId?vp(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Nd)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(i){return new(i||e)(G(tt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ls;function OS(){if(ls==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ls=!0}))}finally{ls=ls||!1}return ls}function xd(n){return OS()?n:!!n.capture}function N_(n){return n.composedPath?n.composedPath()[0]:n.target}function x_(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Md(n){return Array.isArray(n)?n:[n]}function Ld(n){return n instanceof jt?n.nativeElement:n}var O_=new Set,On,MS=(()=>{let e=class e{constructor(r,i){this._platform=r,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):VS}matchMedia(r){return(this._platform.WEBKIT||this._platform.BLINK)&&LS(r,this._nonce),this._matchMedia(r)}};e.\u0275fac=function(i){return new(i||e)(G(xn),G(Xr,8))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function LS(n,e){if(!O_.has(n))try{On||(On=document.createElement("style"),e&&On.setAttribute("nonce",e),On.setAttribute("type","text/css"),document.head.appendChild(On)),On.sheet&&(On.sheet.insertRule(`@media ${n} {body{ }}`,0),O_.add(n))}catch(t){console.error(t)}}function VS(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var L_=(()=>{let e=class e{constructor(r,i){this._mediaMatcher=r,this._zone=i,this._queries=new Map,this._destroySubject=new _t}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(r){return M_(Md(r)).some(s=>this._registerQuery(s).mql.matches)}observe(r){let s=M_(Md(r)).map(c=>this._registerQuery(c).observable),a=Qr(s);return a=Ds(a.pipe(Lt(1)),a.pipe(tp(1),Jf(0))),a.pipe(re(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:d,query:p})=>{l.matches=l.matches||d,l.breakpoints[p]=d}),l}))}_registerQuery(r){if(this._queries.has(r))return this._queries.get(r);let i=this._mediaMatcher.matchMedia(r),a={observable:new jn(c=>{let l=d=>this._zone.run(()=>c.next(d));return i.addListener(l),()=>{i.removeListener(l)}}).pipe(Ps(i),re(({matches:c})=>({query:r,matches:c})),ks(this._destroySubject)),mql:i};return this._queries.set(r,a),a}};e.\u0275fac=function(i){return new(i||e)(G(MS),G(ae))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function M_(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function U_(n){return n.buttons===0||n.detail===0}function j_(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Mn=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Mn||{}),V_="cdk-high-contrast-black-on-white",F_="cdk-high-contrast-white-on-black",Vd="cdk-high-contrast-active",B_=(()=>{let e=class e{constructor(r,i){this._platform=r,this._document=i,this._breakpointSubscription=V(L_).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Mn.NONE;let r=this._document.createElement("div");r.style.backgroundColor="rgb(1,2,3)",r.style.position="absolute",this._document.body.appendChild(r);let i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(r):null,a=(s&&s.backgroundColor||"").replace(/ /g,"");switch(r.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Mn.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Mn.BLACK_ON_WHITE}return Mn.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let r=this._document.body.classList;r.remove(Vd,V_,F_),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Mn.BLACK_ON_WHITE?r.add(Vd,V_):i===Mn.WHITE_ON_BLACK&&r.add(Vd,F_)}}};e.\u0275fac=function(i){return new(i||e)(G(xn),G(ve))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Fd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Ze({});let n=e;return n})();function jS(){return!0}var BS=new ce("mat-sanity-checks",{providedIn:"root",factory:jS}),Bd=(()=>{let e=class e{constructor(r,i,s){this._sanityChecks=i,this._document=s,this._hasDoneGlobalChecks=!1,r._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(r){return x_()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[r]}};e.\u0275fac=function(i){return new(i||e)(G(B_),G(BS,8),G(ve))},e.\u0275mod=et({type:e}),e.\u0275inj=Ze({imports:[Fd,Fd]});let n=e;return n})();var Ye=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Ye||{}),Ud=class{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=Ye.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},$_=xd({passive:!0,capture:!0}),jd=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=N_(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){let s=this._events.get(t);if(s){let a=s.get(r);a?a.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,$_)})}removeHandler(e,t,r){let i=this._events.get(e);if(!i)return;let s=i.get(t);s&&(s.delete(r),s.size===0&&i.delete(t),i.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,$_)))}},q_={enterDuration:225,exitDuration:150},$S=800,z_=xd({passive:!0,capture:!0}),G_=["mousedown","touchstart"],W_=["mouseup","mouseleave","touchend","touchcancel"],hs=class hs{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Ld(r))}fadeInRipple(e,t,r={}){let i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=L(L({},q_),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);let a=r.radius||qS(e,t,i),c=e-i.left,l=t-i.top,d=s.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=`${c-a}px`,p.style.top=`${l-a}px`,p.style.height=`${a*2}px`,p.style.width=`${a*2}px`,r.color!=null&&(p.style.backgroundColor=r.color),p.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(p);let _=window.getComputedStyle(p),E=_.transitionProperty,R=_.transitionDuration,N=E==="none"||R==="0s"||R==="0s, 0s"||i.width===0&&i.height===0,x=new Ud(this,p,r,N);p.style.transform="scale3d(1, 1, 1)",x.state=Ye.FADING_IN,r.persistent||(this._mostRecentTransientRipple=x);let k=null;return!N&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let $=()=>this._finishRippleTransition(x),W=()=>this._destroyRipple(x);p.addEventListener("transitionend",$),p.addEventListener("transitioncancel",W),k={onTransitionEnd:$,onTransitionCancel:W}}),this._activeRipples.set(x,k),(N||!d)&&this._finishRippleTransition(x),x}fadeOutRipple(e){if(e.state===Ye.FADING_OUT||e.state===Ye.HIDDEN)return;let t=e.element,r=L(L({},q_),e.config.animation);t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=Ye.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=Ld(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,G_.forEach(r=>{hs._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{W_.forEach(t=>{this._triggerElement.addEventListener(t,this,z_)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ye.FADING_IN?this._startFadeOutTransition(e):e.state===Ye.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Ye.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ye.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){let t=U_(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+$S;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!j_(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===Ye.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ye.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(G_.forEach(t=>hs._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(W_.forEach(t=>e.removeEventListener(t,this,z_)),this._pointerUpEventsRegistered=!1))}};hs._eventManager=new jd;var K_=hs;function qS(n,e,t){let r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}var zS=["*",[["mat-toolbar-row"]]],GS=["*","mat-toolbar-row"],WS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=cn({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0});let n=e;return n})(),H_=(()=>{let e=class e{constructor(r,i,s){this._elementRef=r,this._platform=i,this._document=s}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}};e.\u0275fac=function(i){return new(i||e)(st(jt),st(xn),st(ve))},e.\u0275cmp=an({type:e,selectors:[["mat-toolbar"]],contentQueries:function(i,s,a){if(i&1&&fc(a,WS,5),i&2){let c;Fs(c=Us())&&(s._toolbarRows=c)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(i,s){i&2&&(lp(s.color?"mat-"+s.color:""),uc("mat-toolbar-multiple-rows",s._toolbarRows.length>0)("mat-toolbar-single-row",s._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[ln],ngContentSelectors:GS,decls:2,vars:0,template:function(i,s){i&1&&(dc(zS),Vs(0),Vs(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0});let n=e;return n})();var Q_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=et({type:e}),e.\u0275inj=Ze({imports:[Bd,Bd]});let n=e;return n})();var Y_=(()=>{let e=class e{constructor(r){this.firestore=r}getCustomization(r){return I(this,null,function*(){let i=this.getCachedCustomization(r);if(i)return i;let s=A_(this.firestore,"registrations"),a=C_(s,D_("subdomain","==",r)),c=yield S_(a);if(c.empty)throw new Error("Subdomain not registered");let l=c.docs.map(d=>d.data())[0];return this.cacheCustomization(r,l),l})}getCachedCustomization(r){let i=localStorage.getItem(`customization_${r}`);return i?JSON.parse(i):null}cacheCustomization(r,i){localStorage.setItem(`customization_${r}`,JSON.stringify(i))}};e.\u0275fac=function(i){return new(i||e)(G(Nn))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var J_=(()=>{let e=class e{constructor(r,i){this.customizationService=r,this.titleService=i,this.title="Fetching...",this.themeColor="defaultColor",this.header="defaultHeader"}ngOnInit(){return I(this,null,function*(){if(typeof window<"u"){let r=this.getSubdomainFromUrl();try{let i=yield this.customizationService.getCustomization(r);i&&(this.title=i.websiteTitle,this.themeColor=i.themeColor,this.header=i.header,this.applyThemeColor(),this.setTitle(i.websiteTitle))}catch(i){i.message==="Subdomain not registered"?this.redirectToRegistration(r):console.error(i)}}})}getSubdomainFromUrl(){return window.location.host.split(".")[0]}applyThemeColor(){document.documentElement.style.setProperty("--theme-color",this.themeColor)}setTitle(r){this.titleService.setTitle(r)}redirectToRegistration(r){window.location.href=`https://register.growthtutorials.in/register?request=${r}`}};e.\u0275fac=function(i){return new(i||e)(st(Y_),st(Ys))},e.\u0275cmp=an({type:e,selectors:[["app-root"]],standalone:!0,features:[ln],decls:6,vars:1,consts:[[1,"navbar"],["href","/home"],["src","../assets/GT Logo.jpg",1,"logo"]],template:function(i,s){i&1&&(lc(0,"mat-toolbar",0)(1,"a",1)(2,"span"),qn(3,"img",2),pc(4),hc()()(),qn(5,"router-outlet")),i&2&&(oc(4),mc(" ",s.title,""))},dependencies:[cu,Q_,H_],styles:[".navbar[_ngcontent-%COMP%]{border-top:8px solid #3f51b5;color:#3f51b5;padding:20px;font-size:24px}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}.logo[_ngcontent-%COMP%]{height:36px;width:36px;border-radius:50%;float:left;padding:0 8px 0 0;margin-top:-2px}.footer[_ngcontent-%COMP%]{text-align:center;background-color:#00000003;padding:8px 0;box-shadow:0 0 1px #0003;border-bottom:16px solid #3f51b5;margin:60px 0 0}@media screen and (max-width: 425px){.footer[_ngcontent-%COMP%]{margin:100px 0 0}}"]});let n=e;return n})();Vp(J_,k_).catch(n=>console.error(n));

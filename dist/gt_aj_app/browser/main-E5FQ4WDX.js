import{$ as Rs,$a as vt,A as Xi,Aa as Ve,Ab as Yb,B as mi,Ba as G,Bb as Jb,C as As,Ca as nr,Cb as ye,D as Wu,Da as jb,Db as Xb,E as dn,Ea as xa,Eb as cd,F as xb,Fa as ka,Fb as Zb,G as Ku,Ga as Pa,Gb as e_,H as Cs,Ha as re,Hb as pn,I as Ln,Ia as Zu,Ib as ld,J as Qu,Ja as Bb,Jb as t_,K as kb,Ka as ed,Kb as n_,L as Yu,La as ks,Lb as Ba,M as Aa,Ma as zb,Mb as gn,N as Ss,Na as td,Nb as i_,O as ct,Oa as nd,Ob as za,P as Zi,Pa as ir,Pb as Ms,Q as xe,Qa as Un,Qb as $a,R as ve,Ra as Mt,Rb as r_,S as q,Sa as Rt,T as Te,Ta as Na,U as Pb,Ua as Z,V as W,Va as te,W as Ju,Wa as Ue,X as F,Xa as $b,Y as V,Ya as fn,Z as Ye,Za as gi,_ as Nb,_a as jn,a as Uu,aa as Je,ab as id,b as ju,ba as fe,bb as Ma,c as Bt,ca as Ae,cb as Oa,d as Bu,da as Xe,db as ce,e as zu,ea as bt,eb as qt,f as Ct,fa as Mb,fb as Fa,g as ht,ga as er,gb as me,h as Ab,ha as hn,hb as Va,i as Cb,ia as Ca,ib as qb,j as Vn,ja as Ob,jb as Gb,k as $u,ka as Fb,kb as rr,l as Ea,la as Sa,lb as rd,m as qu,ma as zt,mb as La,n as De,na as Xu,nb as Ua,o as $,oa as _t,ob as sd,p as Ts,pa as $t,pb as Ps,q as Sb,qa as Vb,qb as Ns,r as Rb,ra as Ra,rb as Hb,s as ee,sa as Lb,sb as ja,t as Ji,ta as Ze,tb as od,u as gt,ua as pi,ub as sr,v as Gu,va as Ds,vb as Wb,w as Ta,wa as Da,wb as Kb,x as Hu,xa as tr,xb as mn,y as Db,ya as Ub,yb as Qb,z as St,za as xs,zb as ad}from"./chunk-U7HSNL3I.js";import{a as N,b as _e,c as Tb,e as kT,f as Fn,g as _}from"./chunk-ETK6FJ3D.js";var Ga=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var h_=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(h_||{}),ud=class{constructor(e,n=f_.Ok,i="OK"){this.headers=e.headers||new Ga,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Ha=class t extends ud{constructor(e={}){super(e),this.type=h_.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var f_=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(f_||{});var MT=new W("");var s_="b",o_="h",a_="s",c_="st",l_="u",u_="rt",qa=new W(""),OT=["GET","HEAD"];function FT(t,e){let p=V(qa),{isCacheActive:n}=p,i=Tb(p,["isCacheActive"]),{transferCache:r,method:s}=t;if(!n||s==="POST"&&!i.includePostRequests&&!r||s!=="POST"&&!OT.includes(s)||r===!1||i.filter?.(t)===!1)return e(t);let o=V(Da),c=LT(t),l=o.get(c,null),d=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(d=r.includeHeaders),l){let{[s_]:b,[u_]:T,[o_]:x,[a_]:k,[c_]:D,[l_]:L}=l,j=b;switch(T){case"arraybuffer":j=new TextEncoder().encode(b).buffer;break;case"blob":j=new Blob([b]);break}let z=new Ga(x);return $(new Ha({body:j,headers:z,status:k,statusText:D,url:L}))}let f=Ms(V(Ze));return e(t).pipe(xe(b=>{b instanceof Ha&&f&&o.set(c,{[s_]:b.body,[o_]:VT(b.headers,d),[a_]:b.status,[c_]:b.statusText,[l_]:b.url||"",[u_]:t.responseType})}))}function VT(t,e){if(!e)return{};let n={};for(let i of e){let r=t.getAll(i);r!==null&&(n[i]=r)}return n}function d_(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function LT(t){let{params:e,method:n,responseType:i,url:r}=t,s=d_(e),o=t.serializeBody();o instanceof URLSearchParams?o=d_(o):typeof o!="string"&&(o="");let c=[n,i,r,o,s].join("|"),l=UT(c);return l}function UT(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function m_(t){return[{provide:qa,useFactory:()=>(Pa("NgHttpTransferCache"),N({isCacheActive:!0},t))},{provide:MT,useValue:FT,multi:!0,deps:[Da,qa]},{provide:Ps,multi:!0,useFactory:()=>{let e=V(Ns),n=V(qa);return()=>{Hb(e).then(()=>{n.isCacheActive=!1})}}}]}var fd=class extends Jb{constructor(){super(...arguments),this.supportsDOMEvents=!0}},md=class t extends fd{static makeCurrent(){Yb(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=BT();return n==null?null:zT(n)}resetBaseElement(){Os=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ld(document.cookie,e)}},Os=null;function BT(){return Os=Os||document.querySelector("base"),Os?Os.getAttribute("href"):null}function zT(t){return new URL(t,document.baseURI).pathname}var $T=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),pd=new W(""),b_=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new ve(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(F(pd),F(re))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Wa=class{constructor(e){this._doc=e}},dd="ng-app-id",__=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ms(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${dd}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(dd),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(dd,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(F(ye),F(Ra),F(Ds,8),F(Ze))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),hd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_d=/%COMP%/g,v_="%COMP%",qT=`_nghost-${v_}`,GT=`_ngcontent-${v_}`,HT=!0,WT=new W("",{providedIn:"root",factory:()=>HT});function KT(t){return GT.replace(_d,t)}function QT(t){return qT.replace(_d,t)}function y_(t,e){return e.map(n=>n.replace(_d,t))}var Ka=(()=>{let e=class e{constructor(i,r,s,o,c,l,d,f=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=l,this.ngZone=d,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Ms(l),this.defaultRenderer=new Fs(i,c,d,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Rs.ShadowDom&&(r=_e(N({},r),{encapsulation:Rs.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Qa?s.applyToHost(i):s instanceof Vs&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let c=this.doc,l=this.ngZone,d=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(r.encapsulation){case Rs.Emulated:o=new Qa(d,f,r,this.appId,p,c,l,b);break;case Rs.ShadowDom:return new gd(d,f,i,r,c,l,this.nonce,b);default:o=new Vs(d,f,r,p,c,l,b);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(F(b_),F(__),F(Ra),F(WT),F(ye),F(Ze),F(re),F(Ds))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Fs=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(hd[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(p_(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(p_(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ve(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=hd[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=hd[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(xs.DashCase|xs.Important)?e.style.setProperty(n,i,r&xs.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&xs.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=ad().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function p_(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var gd=class extends Fs{constructor(e,n,i,r,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=y_(r.id,r.styles);for(let f of d){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vs=class extends Fs{constructor(e,n,i,r,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?y_(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Qa=class extends Vs{constructor(e,n,i,r,s,o,c,l){let d=r+"-"+i.id;super(e,n,i,s,o,c,l,d),this.contentAttr=KT(d),this.hostAttr=QT(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},YT=(()=>{let e=class e extends Wa{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(F(ye))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),g_=["alt","control","meta","shift"],JT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},XT={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},ZT=(()=>{let e=class e extends Wa{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),c=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ad().onAndCancel(i,o.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),c="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),c="code."),g_.forEach(f=>{let p=r.indexOf(f);p>-1&&(r.splice(p,1),c+=f+".")}),c+=o,r.length!=0||o.length===0)return null;let d={};return d.domEventName=s,d.fullKey=c,d}static matchEventFullKeyCode(i,r){let s=JT[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),g_.forEach(c=>{if(c!==s){let l=XT[c];l(i)&&(o+=c+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(F(ye))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})();function w_(t,e){return Wb(N({rootComponent:t},eA(e)))}function eA(t){return{appProviders:[...sA,...t?.providers??[]],platformProviders:rA}}function tA(){md.makeCurrent()}function nA(){return new Xu}function iA(){return Vb(document),document}var rA=[{provide:Ze,useValue:i_},{provide:Lb,useValue:tA,multi:!0},{provide:ye,useFactory:iA,deps:[]}];var sA=[{provide:Mb,useValue:"root"},{provide:Xu,useFactory:nA,deps:[]},{provide:pd,useClass:YT,multi:!0,deps:[ye,re,Ze]},{provide:pd,useClass:ZT,multi:!0,deps:[ye]},Ka,__,b_,{provide:xa,useExisting:Ka},{provide:r_,useClass:$T,deps:[]},[]];var Ya=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(F(ye))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var bd=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(bd||{});function I_(...t){let e=[],n=new Set,i=n.has(bd.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:s}of t)n.add(s),r.length&&e.push(r);return bt([[],Kb(),n.has(bd.NoHttpTransferCache)||i?[]:m_({}),e])}var X="primary",Zs=Symbol("RouteTitle"),Ed=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ur(t){return new Ed(t)}function oA(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=t[s];if(o.startsWith(":"))r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function aA(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Gt(t[n],e[n]))return!1;return!0}function Gt(t,e){let n=t?Td(t):void 0,i=e?Td(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!P_(t[r],e[r]))return!1;return!0}function Td(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function P_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function N_(t){return t.length>0?t[t.length-1]:null}function qn(t){return Sb(t)?t:Ua(t)?De(Promise.resolve(t)):$(t)}var cA={exact:O_,subset:F_},M_={exact:lA,subset:uA,ignored:()=>!0};function T_(t,e,n){return cA[n.paths](t.root,e.root,n.matrixParams)&&M_[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function lA(t,e){return Gt(t,e)}function O_(t,e,n){if(!_i(t.segments,e.segments)||!Za(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!O_(t.children[i],e.children[i],n))return!1;return!0}function uA(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>P_(t[n],e[n]))}function F_(t,e,n){return V_(t,e,e.segments,n)}function V_(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!_i(r,n)||e.hasChildren()||!Za(r,n,i))}else if(t.segments.length===n.length){if(!_i(t.segments,n)||!Za(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!F_(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!_i(t.segments,r)||!Za(t.segments,r,i)||!t.children[X]?!1:V_(t.children[X],e,s,i)}}function Za(t,e,n){return e.every((i,r)=>M_[n](t[r].parameters,i.parameters))}var Bn=class{constructor(e=new de([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=ur(this.queryParams),this._queryParamMap}toString(){return fA.serialize(this)}},de=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ec(this)}},bi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ur(this.parameters),this._parameterMap}toString(){return U_(this)}};function dA(t,e){return _i(t,e)&&t.every((n,i)=>Gt(n.parameters,e[i].parameters))}function _i(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function hA(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===X&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==X&&(n=n.concat(e(r,i)))}),n}var eo=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>new qs,providedIn:"root"});let t=e;return t})(),qs=class{parse(e){let n=new Cd(e);return new Bn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ls(e.root,!0)}`,i=gA(e.queryParams),r=typeof e.fragment=="string"?`#${mA(e.fragment)}`:"";return`${n}${i}${r}`}},fA=new qs;function ec(t){return t.segments.map(e=>U_(e)).join("/")}function Ls(t,e){if(!t.hasChildren())return ec(t);if(e){let n=t.children[X]?Ls(t.children[X],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==X&&i.push(`${r}:${Ls(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=hA(t,(i,r)=>r===X?[Ls(t.children[X],!1)]:[`${r}:${Ls(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${ec(t)}/${n[0]}`:`${ec(t)}/(${n.join("//")})`}}function L_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ja(t){return L_(t).replace(/%3B/gi,";")}function mA(t){return encodeURI(t)}function Ad(t){return L_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tc(t){return decodeURIComponent(t)}function A_(t){return tc(t.replace(/\+/g,"%20"))}function U_(t){return`${Ad(t.path)}${pA(t.parameters)}`}function pA(t){return Object.entries(t).map(([e,n])=>`;${Ad(e)}=${Ad(n)}`).join("")}function gA(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Ja(n)}=${Ja(r)}`).join("&"):`${Ja(n)}=${Ja(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var bA=/^[^\/()?;#]+/;function vd(t){let e=t.match(bA);return e?e[0]:""}var _A=/^[^\/()?;=#]+/;function vA(t){let e=t.match(_A);return e?e[0]:""}var yA=/^[^=?&#]+/;function wA(t){let e=t.match(yA);return e?e[0]:""}var IA=/^[^&#]+/;function EA(t){let e=t.match(IA);return e?e[0]:""}var Cd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new de([],{}):new de([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[X]=new de(e,n)),i}parseSegment(){let e=vd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ve(4009,!1);return this.capture(e),new bi(tc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=vA(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=vd(this.remaining);r&&(i=r,this.capture(i))}e[tc(n)]=tc(i)}parseQueryParam(e){let n=wA(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=EA(this.remaining);o&&(i=o,this.capture(i))}let r=A_(n),s=A_(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=vd(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ve(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=X);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[X]:new de([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ve(4011,!1)}};function j_(t){return t.segments.length>0?new de([],{[X]:t}):t}function B_(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=B_(r);if(i===X&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new de(t.segments,e);return TA(n)}function TA(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new de(t.segments.concat(e.segments),e.children)}return t}function dr(t){return t instanceof Bn}function AA(t,e,n=null,i=null){let r=z_(t);return $_(r,e,n,i)}function z_(t){let e;function n(s){let o={};for(let l of s.children){let d=n(l);o[l.outlet]=d}let c=new de(s.url,o);return s===t&&(e=c),c}let i=n(t.root),r=j_(i);return e??r}function $_(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return yd(r,r,r,n,i);let s=CA(e);if(s.toRoot())return yd(r,r,new de([],{}),n,i);let o=SA(s,r,t),c=o.processChildren?Bs(o.segmentGroup,o.index,s.commands):G_(o.segmentGroup,o.index,s.commands);return yd(r,o.segmentGroup,c,n,i)}function nc(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Gs(t){return typeof t=="object"&&t!=null&&t.outlets}function yd(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;t===e?o=n:o=q_(t,e,n);let c=j_(B_(o));return new Bn(c,s,r)}function q_(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=q_(s,e,n)}),new de(t.segments,i)}var ic=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&nc(i[0]))throw new ve(4003,!1);let r=i.find(Gs);if(r&&r!==N_(i))throw new ve(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function CA(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new ic(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?n=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new ic(n,e,i)}var cr=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function SA(t,e,n){if(t.isAbsolute)return new cr(e,!0,0);if(!n)return new cr(e,!1,NaN);if(n.parent===null)return new cr(n,!0,0);let i=nc(t.commands[0])?0:1,r=n.segments.length-1+i;return RA(n,r,t.numberOfDoubleDots)}function RA(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ve(4005,!1);r=i.segments.length}return new cr(i,!1,r-s)}function DA(t){return Gs(t[0])?t[0].outlets:{[X]:t}}function G_(t,e,n){if(t??=new de([],{}),t.segments.length===0&&t.hasChildren())return Bs(t,e,n);let i=xA(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new de(t.segments.slice(0,i.pathIndex),{});return s.children[X]=new de(t.segments.slice(i.pathIndex),t.children),Bs(s,0,r)}else return i.match&&r.length===0?new de(t.segments,{}):i.match&&!t.hasChildren()?Sd(t,e,n):i.match?Bs(t,0,r):Sd(t,e,n)}function Bs(t,e,n){if(n.length===0)return new de(t.segments,{});{let i=DA(n),r={};if(Object.keys(i).some(s=>s!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let s=Bs(t.children[X],e,n);return new de(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=G_(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new de(t.segments,r)}}function xA(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],c=n[i];if(Gs(c))break;let l=`${c}`,d=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!S_(l,d,o))return s;i+=2}else{if(!S_(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Sd(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(Gs(s)){let l=kA(s.outlets);return new de(i,l)}if(r===0&&nc(n[0])){let l=t.segments[e];i.push(new bi(l.path,C_(n[0]))),r++;continue}let o=Gs(s)?s.outlets[X]:`${s}`,c=r<n.length-1?n[r+1]:null;o&&c&&nc(c)?(i.push(new bi(o,C_(c))),r+=2):(i.push(new bi(o,{})),r++)}return new de(i,{})}function kA(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=Sd(new de([],{}),0,i))}),e}function C_(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function S_(t,e,n){return t==n.path&&Gt(e,n.parameters)}var zs="imperative",je=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(je||{}),Dt=class{constructor(e,n){this.id=e,this.url=n}},hr=class extends Dt{constructor(e,n,i="imperative",r=null){super(e,n),this.type=je.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ot=class extends Dt{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=je.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},wt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(wt||{}),rc=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(rc||{}),zn=class extends Dt{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=je.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$n=class extends Dt{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=je.NavigationSkipped}},Hs=class extends Dt{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=je.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sc=class extends Dt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=je.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rd=class extends Dt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=je.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dd=class extends Dt{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=je.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xd=class extends Dt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=je.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kd=class extends Dt{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=je.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pd=class{constructor(e){this.route=e,this.type=je.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Nd=class{constructor(e){this.route=e,this.type=je.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Md=class{constructor(e){this.snapshot=e,this.type=je.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Od=class{constructor(e){this.snapshot=e,this.type=je.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fd=class{constructor(e){this.snapshot=e,this.type=je.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vd=class{constructor(e){this.snapshot=e,this.type=je.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oc=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=je.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ws=class{},Ks=class{constructor(e){this.url=e}};var Ld=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new to,this.attachRef=null}},to=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Ld,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ac=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ud(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=Ud(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=jd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return jd(e,this._root).map(n=>n.value)}};function Ud(t,e){if(t===e.value)return e;for(let n of e.children){let i=Ud(t,n);if(i)return i}return null}function jd(t,e){if(t===e.value)return[e];for(let n of e.children){let i=jd(t,n);if(i.length)return i.unshift(e),i}return[]}var yt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ar(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var cc=class extends ac{constructor(e,n){super(e),this.snapshot=n,Yd(this,e)}toString(){return this.snapshot.toString()}};function H_(t){let e=PA(t),n=new ht([new bi("",{})]),i=new ht({}),r=new ht({}),s=new ht({}),o=new ht(""),c=new bn(n,i,s,o,r,X,t,e.root);return c.snapshot=e.root,new cc(new yt(c,[]),e)}function PA(t){let e={},n={},i={},r="",s=new Qs([],e,i,r,n,X,t,null,{});return new lc("",new yt(s,[]))}var bn=class{constructor(e,n,i,r,s,o,c,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ee(d=>d[Zs]))??$(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>ur(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>ur(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Qd(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:N(N({},e.params),t.params),data:N(N({},e.data),t.data),resolve:N(N(N(N({},t.data),e.data),r?.data),t._resolvedData)}:i={params:N({},t.params),data:N({},t.data),resolve:N(N({},t.data),t._resolvedData??{})},r&&K_(r)&&(i.resolve[Zs]=r.title),i}var Qs=class{get title(){return this.data?.[Zs]}constructor(e,n,i,r,s,o,c,l,d){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ur(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ur(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},lc=class extends ac{constructor(e,n){super(n),this.url=e,Yd(this,n)}toString(){return W_(this._root)}};function Yd(t,e){e.value._routerState=t,e.children.forEach(n=>Yd(t,n))}function W_(t){let e=t.children.length>0?` { ${t.children.map(W_).join(", ")} } `:"";return`${t.value}${e}`}function wd(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Gt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Gt(e.params,n.params)||t.paramsSubject.next(n.params),aA(e.url,n.url)||t.urlSubject.next(n.url),Gt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Bd(t,e){let n=Gt(t.params,e.params)&&dA(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||Bd(t.parent,e.parent))}function K_(t){return typeof t.title=="string"||t.title===null}var Jd=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new $t,this.deactivateEvents=new $t,this.attachEvents=new $t,this.detachEvents=new $t,this.parentContexts=V(to),this.location=V(Bb),this.changeDetector=V(sr),this.environmentInjector=V(er),this.inputBinder=V(fc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ve(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ve(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ve(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new ve(4013,!1);this._activatedRoute=i;let s=this.location,c=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new zd(i,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:d,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Xe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ca]});let t=e;return t})(),zd=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===bn?this.route:e===to?this.childContexts:this.parent.get(e,n)}},fc=new W(""),R_=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=Ji([r.queryParams,r.params,r.data]).pipe(ct(([o,c,l],d)=>(l=N(N(N({},o),c),l),d===0?$(l):Promise.resolve(l)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let c=Qb(r.component);if(!c){this.unsubscribeFromRouteData(i);return}for(let{templateName:l}of c.inputs)i.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(i,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})();function NA(t,e,n){let i=Ys(t,e._root,n?n._root:void 0);return new cc(i,e)}function Ys(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=MA(t,e,n);return new yt(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>Ys(t,c)),o}}let i=OA(e.value),r=e.children.map(s=>Ys(t,s));return new yt(i,r)}}function MA(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Ys(t,i,r);return Ys(t,i)})}function OA(t){return new bn(new ht(t.url),new ht(t.params),new ht(t.queryParams),new ht(t.fragment),new ht(t.data),t.outlet,t.component,t)}var Q_="ngNavigationCancelingError";function Y_(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=dr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=J_(!1,wt.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function J_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Q_]=!0,n.cancellationCode=e,n}function FA(t){return X_(t)&&dr(t.url)}function X_(t){return!!t&&t[Q_]}var VA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["ng-component"]],standalone:!0,features:[me],decls:1,vars:0,template:function(r,s){r&1&&Ue(0,"router-outlet")},dependencies:[Jd],encapsulation:2});let t=e;return t})();function LA(t,e){return t.providers&&!t._injector&&(t._injector=td(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Xd(t){let e=t.children&&t.children.map(Xd),n=e?_e(N({},t),{children:e}):N({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=VA),n}function Ht(t){return t.outlet||X}function UA(t,e){let n=t.filter(i=>Ht(i)===e);return n.push(...t.filter(i=>Ht(i)!==e)),n}function no(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var jA=(t,e,n,i)=>ee(r=>(new $d(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),$d=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),wd(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=ar(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=ar(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=ar(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=ar(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Vd(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Od(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(wd(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),wd(c.route.value),this.activateChildRoutes(e,null,o.children)}else{let c=no(r.snapshot);o.attachRef=null,o.route=r,o.injector=c,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},uc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},lr=class{constructor(e,n){this.component=e,this.route=n}};function BA(t,e,n){let i=t._root,r=e?e._root:null;return Us(i,r,n,[i.value])}function zA(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function mr(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!Pb(t)?t:e.get(t):i}function Us(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ar(e);return t.children.forEach(o=>{$A(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>$s(c,n.getContext(o),r)),r}function $A(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=qA(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new uc(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Us(t,e,c?c.children:null,i,r):Us(t,e,n,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new lr(c.outlet.component,o))}else o&&$s(e,c,r),r.canActivateChecks.push(new uc(i)),s.component?Us(t,null,c?c.children:null,i,r):Us(t,null,n,i,r);return r}function qA(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!_i(t.url,e.url);case"pathParamsOrQueryParamsChange":return!_i(t.url,e.url)||!Gt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bd(t,e)||!Gt(t.queryParams,e.queryParams);case"paramsChange":default:return!Bd(t,e)}}function $s(t,e,n){let i=ar(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?$s(o,e.children.getContext(s),n):$s(o,null,n):$s(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new lr(e.outlet.component,r)):n.canDeactivateChecks.push(new lr(null,r)):n.canDeactivateChecks.push(new lr(null,r))}function io(t){return typeof t=="function"}function GA(t){return typeof t=="boolean"}function HA(t){return t&&io(t.canLoad)}function WA(t){return t&&io(t.canActivate)}function KA(t){return t&&io(t.canActivateChild)}function QA(t){return t&&io(t.canDeactivate)}function YA(t){return t&&io(t.canMatch)}function Z_(t){return t instanceof Rb||t?.name==="EmptyError"}var Xa=Symbol("INITIAL_VALUE");function fr(){return ct(t=>Ji(t.map(e=>e.pipe(dn(1),Ss(Xa)))).pipe(ee(e=>{for(let n of e)if(n!==!0){if(n===Xa)return Xa;if(n===!1||n instanceof Bn)return n}return!0}),St(e=>e!==Xa),dn(1)))}function JA(t,e){return gt(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?$(_e(N({},n),{guardsResult:!0})):XA(o,i,r,t).pipe(gt(c=>c&&GA(c)?ZA(i,s,t,e):$(c)),ee(c=>_e(N({},n),{guardsResult:c})))})}function XA(t,e,n,i){return De(t).pipe(gt(r=>rC(r.component,r.route,n,e,i)),Ln(r=>r!==!0,!0))}function ZA(t,e,n,i){return De(e).pipe(mi(r=>Ta(tC(r.route.parent,i),eC(r.route,i),iC(t,r.path,n),nC(t,r.route,n))),Ln(r=>r!==!0,!0))}function eC(t,e){return t!==null&&e&&e(new Fd(t)),$(!0)}function tC(t,e){return t!==null&&e&&e(new Md(t)),$(!0)}function nC(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return $(!0);let r=i.map(s=>Hu(()=>{let o=no(e)??n,c=mr(s,o),l=WA(c)?c.canActivate(e,t):hn(o,()=>c(e,t));return qn(l).pipe(Ln())}));return $(r).pipe(fr())}function iC(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>zA(o)).filter(o=>o!==null).map(o=>Hu(()=>{let c=o.guards.map(l=>{let d=no(o.node)??n,f=mr(l,d),p=KA(f)?f.canActivateChild(i,t):hn(d,()=>f(i,t));return qn(p).pipe(Ln())});return $(c).pipe(fr())}));return $(s).pipe(fr())}function rC(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return $(!0);let o=s.map(c=>{let l=no(e)??r,d=mr(c,l),f=QA(d)?d.canDeactivate(t,e,n,i):hn(l,()=>d(t,e,n,i));return qn(f).pipe(Ln())});return $(o).pipe(fr())}function sC(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return $(!0);let s=r.map(o=>{let c=mr(o,t),l=HA(c)?c.canLoad(e,n):hn(t,()=>c(e,n));return qn(l)});return $(s).pipe(fr(),ev(i))}function ev(t){return ju(xe(e=>{if(dr(e))throw Y_(t,e)}),ee(e=>e===!0))}function oC(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return $(!0);let s=r.map(o=>{let c=mr(o,t),l=YA(c)?c.canMatch(e,n):hn(t,()=>c(e,n));return qn(l)});return $(s).pipe(fr(),ev(i))}var Js=class{constructor(e){this.segmentGroup=e||null}},dc=class extends Error{constructor(e){super(),this.urlTree=e}};function or(t){return Ts(new Js(t))}function aC(t){return Ts(new ve(4e3,!1))}function cC(t){return Ts(J_(!1,wt.GuardRejected))}var qd=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return $(i);if(r.numberOfChildren>1||!r.children[X])return aC(e.redirectTo);r=r.children[X]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new dc(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new Bn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);i[r]=n[c]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,i,r)}),new de(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new ve(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Gd={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lC(t,e,n,i,r){let s=Zd(t,e,n);return s.matched?(i=LA(e,i),oC(i,e,n,r).pipe(ee(o=>o===!0?s:N({},Gd)))):$(s)}function Zd(t,e,n){if(e.path==="**")return uC(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?N({},Gd):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||oA)(n,t,e);if(!r)return N({},Gd);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?N(N({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function uC(t){return{matched:!0,parameters:t.length>0?N_(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function D_(t,e,n,i){return n.length>0&&fC(t,n,i)?{segmentGroup:new de(e,hC(i,new de(n,t.children))),slicedSegments:[]}:n.length===0&&mC(t,n,i)?{segmentGroup:new de(t.segments,dC(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new de(t.segments,t.children),slicedSegments:n}}function dC(t,e,n,i){let r={};for(let s of n)if(mc(t,e,s)&&!i[Ht(s)]){let o=new de([],{});r[Ht(s)]=o}return N(N({},i),r)}function hC(t,e){let n={};n[X]=e;for(let i of t)if(i.path===""&&Ht(i)!==X){let r=new de([],{});n[Ht(i)]=r}return n}function fC(t,e,n){return n.some(i=>mc(t,e,i)&&Ht(i)!==X)}function mC(t,e,n){return n.some(i=>mc(t,e,i))}function mc(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function pC(t,e,n,i){return Ht(t)!==i&&(i===X||!mc(e,n,t))?!1:Zd(e,t,n).matched}function gC(t,e,n){return e.length===0&&!t.children[n]}var Hd=class{};function bC(t,e,n,i,r,s,o="emptyOnly"){return new Wd(t,e,n,i,r,o,s).recognize()}var _C=31,Wd=class{constructor(e,n,i,r,s,o,c){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new qd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ve(4002,`'${e.segmentGroup}'`)}recognize(){let e=D_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(n=>{let i=new Qs([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,{},X,this.rootComponentType,null,{}),r=new yt(i,n),s=new lc("",r),o=AA(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,X).pipe(Xi(i=>{if(i instanceof dc)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Js?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=Qd(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(ee(s=>s instanceof yt?[s]:[]))}processChildren(e,n,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return De(r).pipe(mi(s=>{let o=i.children[s],c=UA(n,s);return this.processSegmentGroup(e,c,o,s)}),Yu((s,o)=>(s.push(...o),s)),Wu(null),kb(),gt(s=>{if(s===null)return or(i);let o=tv(s);return vC(o),$(o)}))}processSegment(e,n,i,r,s,o){return De(n).pipe(mi(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,i,r,s,o).pipe(Xi(l=>{if(l instanceof Js)return $(null);throw l}))),Ln(c=>!!c),Xi(c=>{if(Z_(c))return gC(i,r,s)?$(new Hd):or(i);throw c}))}processSegmentAgainstRoute(e,n,i,r,s,o,c){return pC(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o):or(r):or(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){let{matched:c,consumedSegments:l,positionalParamSegments:d,remainingSegments:f}=Zd(n,r,s);if(!c)return or(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_C&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,d);return this.applyRedirects.lineralizeSegments(r,p).pipe(gt(b=>this.processSegment(e,i,n,b.concat(f),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){let o=lC(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(ct(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(ct(({routes:l})=>{let d=i._loadedInjector??e,{consumedSegments:f,remainingSegments:p,parameters:b}=c,T=new Qs(f,b,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,wC(i),Ht(i),i.component??i._loadedComponent??null,i,IC(i)),{segmentGroup:x,slicedSegments:k}=D_(n,f,p,l);if(k.length===0&&x.hasChildren())return this.processChildren(d,l,x).pipe(ee(L=>L===null?null:new yt(T,L)));if(l.length===0&&k.length===0)return $(new yt(T,[]));let D=Ht(i)===s;return this.processSegment(d,l,x,k,D?X:s,!0).pipe(ee(L=>new yt(T,L instanceof yt?[L]:[])))}))):or(n)))}getChildConfig(e,n,i){return n.children?$({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?$({routes:n._loadedRoutes,injector:n._loadedInjector}):sC(e,n,i,this.urlSerializer).pipe(gt(r=>r?this.configLoader.loadChildren(e,n).pipe(xe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):cC(n))):$({routes:[],injector:e})}};function vC(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function yC(t){let e=t.value.routeConfig;return e&&e.path===""}function tv(t){let e=[],n=new Set;for(let i of t){if(!yC(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=tv(i.children);e.push(new yt(i.value,r))}return e.filter(i=>!n.has(i))}function wC(t){return t.data||{}}function IC(t){return t.resolve||{}}function EC(t,e,n,i,r,s){return gt(o=>bC(t,e,n,i,o.extractedUrl,r,s).pipe(ee(({state:c,tree:l})=>_e(N({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function TC(t,e){return gt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return $(n);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let d of nv(l))o.add(d);let c=0;return De(o).pipe(mi(l=>s.has(l)?AC(l,i,t,e):(l.data=Qd(l,l.parent,t).resolve,$(void 0))),xe(()=>c++),Qu(1),gt(l=>c===o.size?$(n):Vn))})}function nv(t){let e=t.children.map(n=>nv(n)).flat();return[t,...e]}function AC(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!K_(r)&&(s[Zs]=r.title),CC(s,t,e,i).pipe(ee(o=>(t._resolvedData=o,t.data=Qd(t,t.parent,n).resolve,null)))}function CC(t,e,n,i){let r=Td(t);if(r.length===0)return $({});let s={};return De(r).pipe(gt(o=>SC(t[o],e,n,i).pipe(Ln(),xe(c=>{s[o]=c}))),Qu(1),xb(s),Xi(o=>Z_(o)?Vn:Ts(o)))}function SC(t,e,n,i){let r=no(e)??i,s=mr(t,r),o=s.resolve?s.resolve(e,n):hn(r,()=>s(e,n));return qn(o)}function Id(t){return ct(e=>{let n=t(e);return n?De(n).pipe(ee(()=>e)):$(e)})}var iv=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(i){return i.data[Zs]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>V(RC),providedIn:"root"});let t=e;return t})(),RC=(()=>{let e=class e extends iv{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(F(Ya))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ro=new W("",{providedIn:"root",factory:()=>({})}),Xs=new W(""),eh=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(ja)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return $(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=qn(i.loadComponent()).pipe(ee(rv),xe(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Cs(()=>{this.componentLoaders.delete(i)})),s=new zu(r,()=>new Ct).pipe(Bu());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=DC(r,this.compiler,i,this.onLoadEndListener).pipe(Cs(()=>{this.childrenLoaders.delete(r)})),c=new zu(o,()=>new Ct).pipe(Bu());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function DC(t,e,n,i){return qn(t.loadChildren()).pipe(ee(rv),gt(r=>r instanceof zb||Array.isArray(r)?$(r):De(e.compileModuleAsync(r))),ee(r=>{i&&i(t);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(n).injector,o=s.get(Xs,[],{optional:!0,self:!0}).flat()),{routes:o.map(Xd),injector:s}}))}function xC(t){return t&&typeof t=="object"&&"default"in t}function rv(t){return xC(t)?t.default:t}var th=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>V(kC),providedIn:"root"});let t=e;return t})(),kC=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sv=new W(""),ov=new W("");function PC(t,e,n){let i=t.get(ov),r=t.get(ye);return t.get(re).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s,o=new Promise(d=>{s=d}),c=r.startViewTransition(()=>(s(),NC(t))),{onViewTransitionCreated:l}=i;return l&&hn(t,()=>l({transition:c,from:e,to:n})),o})}function NC(t){return new Promise(e=>{Zu(e,{injector:t})})}var nh=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ct,this.transitionAbortSubject=new Ct,this.configLoader=V(eh),this.environmentInjector=V(er),this.urlSerializer=V(eo),this.rootContexts=V(to),this.location=V(pn),this.inputBindingEnabled=V(fc,{optional:!0})!==null,this.titleStrategy=V(iv),this.options=V(ro,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(th),this.createViewTransition=V(sv,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>$(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Pd(s)),r=s=>this.events.next(new Nd(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(_e(N(N({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new ht({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:zs,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(St(o=>o.id!==0),ee(o=>_e(N({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ct(o=>{let c=!1,l=!1;return $(o).pipe(ct(d=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",wt.SupersededByNewNavigation),Vn;this.currentTransition=o,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?_e(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=d.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!f&&p!=="reload"){let b="";return this.events.next(new $n(d.id,this.urlSerializer.serialize(d.rawUrl),b,rc.IgnoredSameUrlNavigation)),d.resolve(null),Vn}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return $(d).pipe(ct(b=>{let T=this.transitions?.getValue();return this.events.next(new hr(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),T!==this.transitions?.getValue()?Vn:Promise.resolve(b)}),EC(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),xe(b=>{o.targetSnapshot=b.targetSnapshot,o.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation=_e(N({},this.currentNavigation),{finalUrl:b.urlAfterRedirects});let T=new sc(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(T)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:b,extractedUrl:T,source:x,restoredState:k,extras:D}=d,L=new hr(b,this.urlSerializer.serialize(T),x,k);this.events.next(L);let j=H_(this.rootComponentType).snapshot;return this.currentTransition=o=_e(N({},d),{targetSnapshot:j,urlAfterRedirects:T,extras:_e(N({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=T,$(o)}else{let b="";return this.events.next(new $n(d.id,this.urlSerializer.serialize(d.extractedUrl),b,rc.IgnoredByUrlHandlingStrategy)),d.resolve(null),Vn}}),xe(d=>{let f=new Rd(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),ee(d=>(this.currentTransition=o=_e(N({},d),{guards:BA(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),o)),JA(this.environmentInjector,d=>this.events.next(d)),xe(d=>{if(o.guardsResult=d.guardsResult,dr(d.guardsResult))throw Y_(this.urlSerializer,d.guardsResult);let f=new Dd(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(f)}),St(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",wt.GuardRejected),!1)),Id(d=>{if(d.guards.canActivateChecks.length)return $(d).pipe(xe(f=>{let p=new xd(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),ct(f=>{let p=!1;return $(f).pipe(TC(this.paramsInheritanceStrategy,this.environmentInjector),xe({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(f,"",wt.NoDataFromResolver)}}))}),xe(f=>{let p=new kd(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}))}),Id(d=>{let f=p=>{let b=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(p.routeConfig).pipe(xe(T=>{p.component=T}),ee(()=>{})));for(let T of p.children)b.push(...f(T));return b};return Ji(f(d.targetSnapshot.root)).pipe(Wu(null),dn(1))}),Id(()=>this.afterPreactivation()),ct(()=>{let{currentSnapshot:d,targetSnapshot:f}=o,p=this.createViewTransition?.(this.environmentInjector,d.root,f.root);return p?De(p).pipe(ee(()=>o)):$(o)}),ee(d=>{let f=NA(i.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=o=_e(N({},d),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),xe(()=>{this.events.next(new Ws)}),jA(this.rootContexts,i.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),dn(1),xe({next:d=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ot(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{c=!0}}),Zi(this.transitionAbortSubject.pipe(xe(d=>{throw d}))),Cs(()=>{!c&&!l&&this.cancelNavigationTransition(o,"",wt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xi(d=>{if(l=!0,X_(d))this.events.next(new zn(o.id,this.urlSerializer.serialize(o.extractedUrl),d.message,d.cancellationCode)),FA(d)?this.events.next(new Ks(d.url)):o.resolve(!1);else{this.events.next(new Hs(o.id,this.urlSerializer.serialize(o.extractedUrl),d,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(d))}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return Vn}))}))}cancelNavigationTransition(i,r,s){let o=new zn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function MC(t){return t!==zs}var OC=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>V(FC),providedIn:"root"});let t=e;return t})(),Kd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},FC=(()=>{let e=class e extends Kd{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Sa(e)))(s||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),av=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>V(VC),providedIn:"root"});let t=e;return t})(),VC=(()=>{let e=class e extends av{constructor(){super(...arguments),this.location=V(pn),this.urlSerializer=V(eo),this.options=V(ro,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(th),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Bn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=H_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof hr)this.stateMemento=this.createStateMemento();else if(i instanceof $n)this.rawUrlTree=r.initialUrl;else if(i instanceof sc){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Ws?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof zn&&(i.code===wt.GuardRejected||i.code===wt.NoDataFromResolver)?this.restoreHistory(r):i instanceof Hs?this.restoreHistory(r,!0):i instanceof Ot&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,c=N(N({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",c)}else{let o=N(N({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Sa(e)))(s||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),js=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(js||{});function cv(t,e){t.events.pipe(St(n=>n instanceof Ot||n instanceof zn||n instanceof Hs||n instanceof $n),ee(n=>n instanceof Ot||n instanceof $n?js.COMPLETE:(n instanceof zn?n.code===wt.Redirect||n.code===wt.SupersededByNewNavigation:!1)?js.REDIRECTING:js.FAILED),St(n=>n!==js.REDIRECTING),dn(1)).subscribe(()=>{e()})}function LC(t){throw t}var UC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},jC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},et=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(La),this.stateManager=V(av),this.options=V(ro,{optional:!0})||{},this.pendingTasks=V(nd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(nh),this.urlSerializer=V(eo),this.location=V(pn),this.urlHandlingStrategy=V(th),this._events=new Ct,this.errorHandler=this.options.errorHandler||LC,this.navigated=!1,this.routeReuseStrategy=V(OC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(Xs,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(fc,{optional:!0}),this.eventsSubscription=new Uu,this.isNgZoneEnabled=V(re)instanceof re&&re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof zn&&r.code!==wt.Redirect&&r.code!==wt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ot)this.navigated=!0;else if(r instanceof Ks){let c=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||MC(s.source)};this.scheduleNavigation(c,zs,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}zC(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zs,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let d=N({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Xd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:l,preserveFragment:d}=r,f=d?this.currentUrlTree.fragment:c,p=null;switch(l){case"merge":p=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let b;try{let T=s?s.snapshot:this.routerState.snapshot.root;b=z_(T)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),b=this.currentUrlTree.root}return $_(b,i,p,f??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=dr(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,zs,null,r)}navigate(i,r={skipLocationChange:!1}){return BC(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=N({},UC):r===!1?s=N({},jC):s=r,dr(i))return T_(this.currentUrlTree,i,s);let o=this.parseUrl(i);return T_(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,c){if(this.disposed)return Promise.resolve(!1);let l,d,f;c?(l=c.resolve,d=c.reject,f=c.promise):f=new Promise((b,T)=>{l=b,d=T});let p=this.pendingTasks.add();return cv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:d,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(b=>Promise.reject(b))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function BC(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ve(4008,!1)}function zC(t){return!(t instanceof Ws)&&!(t instanceof Ks)}var hc=class{};var $C=(()=>{let e=class e{constructor(i,r,s,o,c){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(St(i=>i instanceof Ot),mi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=td(o.providers,i,`Route: ${o.path}`));let c=o._injector??i,l=o._loadedInjector??c;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(c,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return De(s).pipe(Gu())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=$(null);let o=s.pipe(gt(c=>c===null?$(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??i,c.routes))));if(r.loadComponent&&!r._loadedComponent){let c=this.loader.loadComponent(r);return De([o,c]).pipe(Gu())}else return o})}};e.\u0275fac=function(r){return new(r||e)(F(et),F(ja),F(er),F(hc),F(eh))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lv=new W(""),qC=(()=>{let e=class e{constructor(i,r,s,o,c={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=V(er),c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof hr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Ot?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof $n&&i.code===rc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof oc&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>_(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Zu(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new oc(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){nr()},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})();function uv(t,...e){return bt([{provide:Xs,multi:!0,useValue:t},[],{provide:bn,useFactory:dv,deps:[et]},{provide:Ps,multi:!0,useFactory:hv},e.map(n=>n.\u0275providers)])}function dv(t){return t.routerState.root}function so(t,e){return{\u0275kind:t,\u0275providers:e}}function hv(){let t=V(zt);return e=>{let n=t.get(Ns);if(e!==n.components[0])return;let i=t.get(et),r=t.get(fv);t.get(ih)===1&&i.initialNavigation(),t.get(mv,null,Ju.Optional)?.setUpPreloading(),t.get(lv,null,Ju.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var fv=new W("",{factory:()=>new Ct}),ih=new W("",{providedIn:"root",factory:()=>1});function GC(){return so(2,[{provide:ih,useValue:0},{provide:sd,multi:!0,deps:[zt],useFactory:e=>{let n=e.get(Xb,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(et),s=e.get(fv);cv(r,()=>{i(!0)}),e.get(nh).afterPreactivation=()=>(i(!0),s.closed?$(void 0):s),r.initialNavigation()}))}}])}function HC(){return so(3,[{provide:sd,multi:!0,useFactory:()=>{let e=V(et);return()=>{e.setUpLocationChangeListener()}}},{provide:ih,useValue:2}])}var mv=new W("");function WC(t){return so(0,[{provide:mv,useExisting:$C},{provide:hc,useExisting:t}])}function KC(){return so(8,[R_,{provide:fc,useExisting:R_}])}function QC(t){let e=[{provide:sv,useValue:PC},{provide:ov,useValue:N({skipNextTransition:!!t?.skipInitialTransition},t)}];return so(9,e)}var x_=new W("ROUTER_FORROOT_GUARD"),YC=[pn,{provide:eo,useClass:qs},et,to,{provide:bn,useFactory:dv,deps:[et]},eh,[]],pv=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[YC,[],{provide:Xs,multi:!0,useValue:i},{provide:x_,useFactory:eS,deps:[[et,new Ye,new Nb]]},{provide:ro,useValue:r||{}},r?.useHash?XC():ZC(),JC(),r?.preloadingStrategy?WC(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?tS(r):[],r?.bindToComponentInputs?KC().\u0275providers:[],r?.enableViewTransitions?QC().\u0275providers:[],nS()]}}static forChild(i){return{ngModule:e,providers:[{provide:Xs,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(F(x_,8))},e.\u0275mod=Ae({type:e}),e.\u0275inj=Te({});let t=e;return t})();function JC(){return{provide:lv,useFactory:()=>{let t=V($a),e=V(re),n=V(ro),i=V(nh),r=V(eo);return n.scrollOffset&&t.setOffset(n.scrollOffset),new qC(r,i,t,e,n)}}}function XC(){return{provide:cd,useClass:e_}}function ZC(){return{provide:cd,useClass:Zb}}function eS(t){return"guarded"}function tS(t){return[t.initialNavigation==="disabled"?HC().\u0275providers:[],t.initialNavigation==="enabledBlocking"?GC().\u0275providers:[]]}var k_=new W("");function nS(){return[{provide:k_,useFactory:hv},{provide:Ps,multi:!0,useExisting:k_}]}function gc(t){return t!=null&&`${t}`!="false"}function rh(t){return Array.isArray(t)?t:[t]}function vi(t){return t instanceof _t?t.nativeElement:t}var oh;try{oh=typeof Intl<"u"&&Intl.v8BreakIterator}catch{oh=!1}var lt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?za(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||oh)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(F(Ze))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oo;function iS(){if(oo==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>oo=!0}))}finally{oo=oo||!1}return oo}function pr(t){return iS()?t:!!t.capture}var sh;function rS(){if(sh==null){let t=typeof document<"u"?document.head:null;sh=!!(t&&(t.createShadowRoot||t.attachShadow))}return sh}function gv(t){if(rS()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Gn(t){return t.composedPath?t.composedPath()[0]:t.target}function bv(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var _v=new Set,yi,sS=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):aS}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&oS(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(F(lt),F(Ds,8))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function oS(t,e){if(!_v.has(t))try{yi||(yi=document.createElement("style"),e&&yi.setAttribute("nonce",e),yi.setAttribute("type","text/css"),document.head.appendChild(yi)),yi.sheet&&(yi.sheet.insertRule(`@media ${t} {body{ }}`,0),_v.add(t))}catch(n){console.error(n)}}function aS(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var yv=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Ct}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return vv(rh(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=vv(rh(i)).map(c=>this._registerQuery(c).observable),o=Ji(s);return o=Ta(o.pipe(dn(1)),o.pipe(Aa(1),As(0))),o.pipe(ee(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:d,query:f})=>{l.matches=l.matches||d,l.breakpoints[f]=d}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new Bt(c=>{let l=d=>this._zone.run(()=>c.next(d));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(Ss(r),ee(({matches:c})=>({query:i,matches:c})),Zi(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(F(sS),F(re))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vv(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}function ch(t){return t.buttons===0||t.detail===0}function lh(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var cS=new W("cdk-input-modality-detector-options"),lS={ignoreKeys:[18,17,224,91,16]},Ev=650,gr=pr({passive:!0,capture:!0}),uS=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new ht(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(l=>l===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Gn(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<Ev||(this._modality.next(ch(c)?"keyboard":"mouse"),this._mostRecentTarget=Gn(c))},this._onTouchstart=c=>{if(lh(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Gn(c)},this._options=N(N({},lS),o),this.modalityDetected=this._modality.pipe(Aa(1)),this.modalityChanged=this.modalityDetected.pipe(Ku()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,gr),s.addEventListener("mousedown",this._onMousedown,gr),s.addEventListener("touchstart",this._onTouchstart,gr)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,gr),document.removeEventListener("mousedown",this._onMousedown,gr),document.removeEventListener("touchstart",this._onTouchstart,gr))}};e.\u0275fac=function(r){return new(r||e)(F(lt),F(re),F(ye),F(cS,8))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _c=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(_c||{}),dS=new W("cdk-focus-monitor-default-options"),bc=pr({passive:!0,capture:!0}),Tv=(()=>{let e=class e{constructor(i,r,s,o,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ct,this._rootNodeFocusAndBlurListener=l=>{let d=Gn(l);for(let f=d;f;f=f.parentElement)l.type==="focus"?this._onFocus(l,f):this._onBlur(l,f)},this._document=o,this._detectionMode=c?.detectionMode||_c.IMMEDIATE}monitor(i,r=!1){let s=vi(i);if(!this._platform.isBrowser||s.nodeType!==1)return $();let o=gv(s)||this._getDocument(),c=this._elementInfo.get(s);if(c)return r&&(c.checkChildren=!0),c.subject;let l={checkChildren:r,subject:new Ct,rootNode:o};return this._elementInfo.set(s,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(i){let r=vi(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=vi(i),c=this._getDocument().activeElement;o===c?this._getClosestElementsInfo(o).forEach(([l,d])=>this._originChanged(l,r,d)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===_c.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===_c.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?Ev:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=Gn(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,bc),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,bc)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Zi(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,bc),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,bc),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let c=0;c<o.length;c++)if(o[c].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(F(re),F(lt),F(uS),F(ye,8),F(dS,8))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wi=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(wi||{}),wv="cdk-high-contrast-black-on-white",Iv="cdk-high-contrast-white-on-black",ah="cdk-high-contrast-active",Av=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=V(yv).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return wi.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return wi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return wi.BLACK_ON_WHITE}return wi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(ah,wv,Iv),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===wi.BLACK_ON_WHITE?i.add(ah,wv):r===wi.WHITE_ON_BLACK&&i.add(ah,Iv)}}};e.\u0275fac=function(r){return new(r||e)(F(lt),F(ye))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var uh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ae({type:e}),e.\u0275inj=Te({});let t=e;return t})();function fS(){return!0}var mS=new W("mat-sanity-checks",{providedIn:"root",factory:fS}),ft=(()=>{let e=class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return bv()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(F(Av),F(mS,8),F(ye))},e.\u0275mod=Ae({type:e}),e.\u0275inj=Te({imports:[uh,uh]});let t=e;return t})();var xt=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(xt||{}),fh=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=xt.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Sv=pr({passive:!0,capture:!0}),mh=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Gn(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){let s=this._events.get(n);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,Sv)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let s=r.get(n);s&&(s.delete(i),s.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,Sv)))}},Rv={enterDuration:225,exitDuration:150},pS=800,Dv=pr({passive:!0,capture:!0}),xv=["mousedown","touchstart"],kv=["mouseup","mouseleave","touchend","touchcancel"],co=class co{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=vi(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=N(N({},Rv),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let o=i.radius||gS(e,n,r),c=e-r.left,l=n-r.top,d=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${l-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(f);let p=window.getComputedStyle(f),b=p.transitionProperty,T=p.transitionDuration,x=b==="none"||T==="0s"||T==="0s, 0s"||r.width===0&&r.height===0,k=new fh(this,f,i,x);f.style.transform="scale3d(1, 1, 1)",k.state=xt.FADING_IN,i.persistent||(this._mostRecentTransientRipple=k);let D=null;return!x&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let L=()=>this._finishRippleTransition(k),j=()=>this._destroyRipple(k);f.addEventListener("transitionend",L),f.addEventListener("transitioncancel",j),D={onTransitionEnd:L,onTransitionCancel:j}}),this._activeRipples.set(k,D),(x||!d)&&this._finishRippleTransition(k),k}fadeOutRipple(e){if(e.state===xt.FADING_OUT||e.state===xt.HIDDEN)return;let n=e.element,i=N(N({},Rv),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=xt.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=vi(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,xv.forEach(i=>{co._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{kv.forEach(n=>{this._triggerElement.addEventListener(n,this,Dv)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===xt.FADING_IN?this._startFadeOutTransition(e):e.state===xt.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=xt.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=xt.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=ch(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+pS;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!lh(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===xt.VISIBLE||e.config.terminateOnPointerUp&&e.state===xt.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(xv.forEach(n=>co._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(kv.forEach(n=>e.removeEventListener(n,this,Dv)),this._pointerUpEventsRegistered=!1))}};co._eventManager=new mh;var ph=co;function gS(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var Ov=new W("mat-ripple-global-options"),gh=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,c){this._elementRef=i,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new ph(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:N(N(N({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,N(N({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,N(N({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(G(_t),G(re),G(lt),G(Ov,8),G(pi,8))},e.\u0275dir=Xe({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&Rt("mat-ripple-unbounded",s.unbounded)},inputs:{color:[Je.None,"matRippleColor","color"],unbounded:[Je.None,"matRippleUnbounded","unbounded"],centered:[Je.None,"matRippleCentered","centered"],radius:[Je.None,"matRippleRadius","radius"],animation:[Je.None,"matRippleAnimation","animation"],disabled:[Je.None,"matRippleDisabled","disabled"],trigger:[Je.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),yc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ae({type:e}),e.\u0275inj=Te({imports:[ft,ft]});let t=e;return t})();var Pv={capture:!0},Nv=["focus","click","mouseenter","touchstart"],dh="mat-ripple-loader-uninitialized",hh="mat-ripple-loader-class-name",Mv="mat-ripple-loader-centered",vc="mat-ripple-loader-disabled",Fv=(()=>{let e=class e{constructor(){this._document=V(ye,{optional:!0}),this._animationMode=V(pi,{optional:!0}),this._globalRippleOptions=V(Ov,{optional:!0}),this._platform=V(lt),this._ngZone=V(re),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let s=i.target.closest(`[${dh}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let i of Nv)this._document?.addEventListener(i,this._onInteraction,Pv)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of Nv)this._document?.removeEventListener(r,this._onInteraction,Pv)}configureRipple(i,r){i.setAttribute(dh,""),(r.className||!i.hasAttribute(hh))&&i.setAttribute(hh,r.className||""),r.centered&&i.setAttribute(Mv,""),r.disabled&&i.setAttribute(vc,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(vc,""):i.removeAttribute(vc)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(hh)),i.append(s);let o=new gh(new _t(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,o.centered=i.hasAttribute(Mv),o.disabled=i.hasAttribute(vc),this.attachRipple(i,o),o}attachRipple(i,r){i.removeAttribute(dh),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var br=(()=>{let e=class e{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(i){this._vertical=gc(i)}get inset(){return this._inset}set inset(i){this._inset=gc(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,s){r&2&&(Un("aria-orientation",s.vertical?"vertical":"horizontal"),Rt("mat-divider-vertical",s.vertical)("mat-divider-horizontal",!s.vertical)("mat-divider-inset",s.inset))},inputs:{vertical:"vertical",inset:"inset"},standalone:!0,features:[me],decls:0,vars:0,template:function(r,s){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0});let t=e;return t})(),_r=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ae({type:e}),e.\u0275inj=Te({imports:[ft,ft]});let t=e;return t})();var Bh={};kT(Bh,{FirebaseError:()=>tt,SDK_VERSION:()=>It,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>wr,_addOrOverwriteComponent:()=>jh,_apps:()=>Hn,_clearComponents:()=>bR,_components:()=>yr,_getProvider:()=>_n,_isFirebaseApp:()=>ay,_isFirebaseServerApp:()=>Qt,_registerComponent:()=>nt,_removeServiceInstance:()=>oy,_serverApps:()=>vr,deleteApp:()=>bo,getApp:()=>vn,getApps:()=>go,initializeApp:()=>Ir,initializeServerApp:()=>cy,onLog:()=>Dc,registerVersion:()=>le,setLogLevel:()=>xc});var Lv=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},_S=function(t){let e=[],n=0,i=0;for(;n<t.length;){let r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=t[n++],o=t[n++],c=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},wc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){let s=t[r],o=r+1<t.length,c=o?t[r+1]:0,l=r+2<t.length,d=l?t[r+2]:0,f=s>>2,p=(s&3)<<4|c>>4,b=(c&15)<<2|d>>6,T=d&63;l||(T=64,o||(b=64)),i.push(n[f],n[p],n[b],n[T])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_S(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){let s=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;let d=r<t.length?n[t.charAt(r)]:64;++r;let p=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||c==null||d==null||p==null)throw new vh;let b=s<<2|c>>4;if(i.push(b),d!==64){let T=c<<4&240|d>>2;if(i.push(T),p!==64){let x=d<<6&192|p;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},vh=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vS=function(t){let e=Lv(t);return wc.encodeByteArray(e,!0)},lo=function(t){return vS(t).replace(/\./g,"")},wh=function(t){try{return wc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uo(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!yS(n)||(t[n]=uo(t[n],e[n]));return t}function yS(t){return t!=="__proto__"}function Uv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var wS=()=>Uv().__FIREBASE_DEFAULTS__,IS=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ES=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&wh(t[1]);return e&&JSON.parse(e)},Ic=()=>{try{return wS()||IS()||ES()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ih=t=>{var e,n;return(n=(e=Ic())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Eh=t=>{let e=Ih(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Th=()=>{var t;return(t=Ic())===null||t===void 0?void 0:t.config},Ah=t=>{var e;return(e=Ic())===null||e===void 0?void 0:e[`_${t}`]};var Ii=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function Ec(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lo(JSON.stringify(n)),lo(JSON.stringify(o)),""].join(".")}function Le(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function TS(){var t;let e=(t=Ic())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Tc(){return typeof self=="object"&&self.self===self}function Bv(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $v(){let t=Le();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qv(){return!TS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ho(){try{return typeof indexedDB=="object"}catch{return!1}}function Gv(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var AS="FirebaseError",tt=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=AS,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mt.prototype.create)}},mt=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?CS(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new tt(r,c,i)}};function CS(t,e){return t.replace(SS,(n,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var SS=/\{\$([^}]+)}/g;function Ch(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Hv(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ei(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let r of n){if(!i.includes(r))return!1;let s=t[r],o=e[r];if(Vv(s)&&Vv(o)){if(!Ei(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function Vv(t){return t!==null&&typeof t=="object"}function fo(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ac(t,e){let n=new yh(t,e);return n.subscribe.bind(n)}var yh=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");RS(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=_h),r.error===void 0&&(r.error=_h),r.complete===void 0&&(r.complete=_h);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function RS(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _h(){}var fV=4*60*60*1e3;function pe(t){return t&&t._delegate?t._delegate:t}var Ne=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ti="[DEFAULT]";var Sh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new Ii;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xS(e))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ti){return this.instances.has(e)}getOptions(e=Ti){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,n){var i;let r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:DS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ti){return this.component?this.component.multipleInstances?e:Ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function DS(t){return t===Ti?void 0:t}function xS(t){return t.instantiationMode==="EAGER"}var mo=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Sh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Rh=[],ne=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ne||{}),Wv={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},kS=ne.INFO,PS={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},NS=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),r=PS[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},kt=class{constructor(e){this.name=e,this._logLevel=kS,this._logHandler=NS,this._userLogHandler=null,Rh.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};function Kv(t){Rh.forEach(e=>{e.setLogLevel(t)})}function Qv(t,e){for(let n of Rh){let i=null;e&&e.level&&(i=Wv[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(r,s,...o)=>{let c=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(i??r.logLevel)&&t({level:ne[s].toLowerCase(),message:c,args:o,type:r.name})}}}var MS=(t,e)=>e.some(n=>t instanceof n),Yv,Jv;function OS(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FS(){return Jv||(Jv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Xv=new WeakMap,xh=new WeakMap,Zv=new WeakMap,Dh=new WeakMap,Ph=new WeakMap;function VS(t){let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Wt(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Xv.set(n,t)}).catch(()=>{}),Ph.set(e,t),e}function LS(t){if(xh.has(t))return;let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});xh.set(t,e)}var kh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ey(t){kh=t(kh)}function US(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(Cc(this),e,...n);return Zv.set(i,e.sort?e.sort():[e]),Wt(i)}:FS().includes(t)?function(...e){return t.apply(Cc(this),e),Wt(Xv.get(this))}:function(...e){return Wt(t.apply(Cc(this),e))}}function jS(t){return typeof t=="function"?US(t):(t instanceof IDBTransaction&&LS(t),MS(t,OS())?new Proxy(t,kh):t)}function Wt(t){if(t instanceof IDBRequest)return VS(t);if(Dh.has(t))return Dh.get(t);let e=jS(t);return e!==t&&(Dh.set(t,e),Ph.set(e,t)),e}var Cc=t=>Ph.get(t);function ny(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(t,e),c=Wt(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Wt(o.result),l.oldVersion,l.newVersion,Wt(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var BS=["get","getKey","getAll","getAllKeys","count"],zS=["put","add","delete","clear"],Nh=new Map;function ty(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nh.get(e))return Nh.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,r=zS.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||BS.includes(n)))return;let s=function(o,...c){return _(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),d=l.store;return i&&(d=d.index(c.shift())),(yield Promise.all([d[n](...c),r&&l.done]))[0]})};return Nh.set(e,s),s}ey(t=>_e(N({},t),{get:(e,n,i)=>ty(e,n)||t.get(e,n,i),has:(e,n)=>!!ty(e,n)||t.has(e,n)}));var Oh=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($S(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function $S(t){let e=t.getComponent();return e?.type==="VERSION"}var Sc="@firebase/app",Fh="0.10.4";var Ai=new kt("@firebase/app"),qS="@firebase/app-compat",GS="@firebase/analytics-compat",HS="@firebase/analytics",WS="@firebase/app-check-compat",KS="@firebase/app-check",QS="@firebase/auth",YS="@firebase/auth-compat",JS="@firebase/database",XS="@firebase/database-compat",ZS="@firebase/functions",eR="@firebase/functions-compat",tR="@firebase/installations",nR="@firebase/installations-compat",iR="@firebase/messaging",rR="@firebase/messaging-compat",sR="@firebase/performance",oR="@firebase/performance-compat",aR="@firebase/remote-config",cR="@firebase/remote-config-compat",lR="@firebase/storage",uR="@firebase/storage-compat",dR="@firebase/firestore",hR="@firebase/vertexai-preview",fR="@firebase/firestore-compat",mR="firebase",pR="10.12.1";var Kt="[DEFAULT]",gR={[Sc]:"fire-core",[qS]:"fire-core-compat",[HS]:"fire-analytics",[GS]:"fire-analytics-compat",[KS]:"fire-app-check",[WS]:"fire-app-check-compat",[QS]:"fire-auth",[YS]:"fire-auth-compat",[JS]:"fire-rtdb",[XS]:"fire-rtdb-compat",[ZS]:"fire-fn",[eR]:"fire-fn-compat",[tR]:"fire-iid",[nR]:"fire-iid-compat",[iR]:"fire-fcm",[rR]:"fire-fcm-compat",[sR]:"fire-perf",[oR]:"fire-perf-compat",[aR]:"fire-rc",[cR]:"fire-rc-compat",[lR]:"fire-gcs",[uR]:"fire-gcs-compat",[dR]:"fire-fst",[fR]:"fire-fst-compat",[hR]:"fire-vertex","fire-js":"fire-js",[mR]:"fire-js-all"};var Hn=new Map,vr=new Map,yr=new Map;function wr(t,e){try{t.container.addComponent(e)}catch(n){Ai.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jh(t,e){t.container.addOrOverwriteComponent(e)}function nt(t){let e=t.name;if(yr.has(e))return Ai.debug(`There were multiple attempts to register component ${e}.`),!1;yr.set(e,t);for(let n of Hn.values())wr(n,t);for(let n of vr.values())wr(n,t);return!0}function _n(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function oy(t,e,n=Kt){_n(t,e).clearInstance(n)}function ay(t){return t.options!==void 0}function Qt(t){return t.settings!==void 0}function bR(){yr.clear()}var _R={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pt=new mt("app","Firebase",_R);var Rc=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ne("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pt.create("app-deleted",{appName:this._name})}};var Vh=class extends Rc{constructor(e,n,i,r){let s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:i,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,r);else{let c=e;super(c.options,o,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()}),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,le(Sc,Fh,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){bo(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Pt.create("server-app-deleted")}};var It=pR;function Ir(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Pt.create("bad-app-name",{appName:String(r)});if(n||(n=Th()),!n)throw Pt.create("no-options");let s=Hn.get(r);if(s){if(Ei(n,s.options)&&Ei(i,s.config))return s;throw Pt.create("duplicate-app",{appName:r})}let o=new mo(r);for(let l of yr.values())o.addComponent(l);let c=new Rc(n,i,o);return Hn.set(r,c),c}function cy(t,e){if(Tc())throw Pt.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;ay(t)?n=t.options:n=t;let i=Object.assign(Object.assign({},e),n);i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;let r=d=>[...d].reduce((f,p)=>Math.imul(31,f)+p.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Pt.create("finalization-registry-not-supported",{});let s=""+r(JSON.stringify(i)),o=vr.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;let c=new mo(s);for(let d of yr.values())c.addComponent(d);let l=new Vh(n,e,s,c);return vr.set(s,l),l}function vn(t=Kt){let e=Hn.get(t);if(!e&&t===Kt&&Th())return Ir();if(!e)throw Pt.create("no-app",{appName:t});return e}function go(){return Array.from(Hn.values())}function bo(t){return _(this,null,function*(){let e=!1,n=t.name;Hn.has(n)?(e=!0,Hn.delete(n)):vr.has(n)&&t.decRefCount()<=0&&(vr.delete(n),e=!0),e&&(yield Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)})}function le(t,e,n){var i;let r=(i=gR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ai.warn(c.join(" "));return}nt(new Ne(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function Dc(t,e){if(t!==null&&typeof t!="function")throw Pt.create("invalid-log-argument");Qv(t,e)}function xc(t){Kv(t)}var vR="firebase-heartbeat-database",yR=1,po="firebase-heartbeat-store",Mh=null;function ly(){return Mh||(Mh=ny(vR,yR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(po)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pt.create("idb-open",{originalErrorMessage:t.message})})),Mh}function wR(t){return _(this,null,function*(){try{let n=(yield ly()).transaction(po),i=yield n.objectStore(po).get(uy(t));return yield n.done,i}catch(e){if(e instanceof tt)Ai.warn(e.message);else{let n=Pt.create("idb-get",{originalErrorMessage:e?.message});Ai.warn(n.message)}}})}function iy(t,e){return _(this,null,function*(){try{let i=(yield ly()).transaction(po,"readwrite");yield i.objectStore(po).put(e,uy(t)),yield i.done}catch(n){if(n instanceof tt)Ai.warn(n.message);else{let i=Pt.create("idb-set",{originalErrorMessage:n?.message});Ai.warn(i.message)}}})}function uy(t){return`${t.name}!${t.options.appId}`}var IR=1024,ER=30*24*60*60*1e3,Lh=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Uh(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return _(this,null,function*(){var e,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ry();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=ER}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return _(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=ry(),{heartbeatsToSend:i,unsentEntries:r}=TR(this._heartbeatsCache.heartbeats),s=lo(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function ry(){return new Date().toISOString().substring(0,10)}function TR(t,e=IR){let n=[],i=t.slice();for(let r of t){let s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),sy(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),sy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var Uh=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return ho()?Gv().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield wR(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return iy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return iy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function sy(t){return lo(JSON.stringify({version:2,heartbeats:t})).length}function AR(t){nt(new Ne("platform-logger",e=>new Oh(e),"PRIVATE")),nt(new Ne("heartbeat",e=>new Lh(e),"PRIVATE")),le(Sc,Fh,t),le(Sc,Fh,"esm2017"),le("fire-js","")}AR("");var CR="firebase",SR="10.12.1";le(CR,SR,"app");var Wn=new rr("ANGULARFIRE2_VERSION");function Pc(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var _o=(t,e)=>{let n=e?[e]:go(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},yn=class{constructor(){return _o(RR)}},RR="app-check";function Er(){}var kc=class{zone;delegate;constructor(e,n=Cb){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},zh=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Er,{},Er,Er)),n.pipe(xe({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Kn=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new kc(Zone.current)),this.insideAngular=n.run(()=>new kc(Zone.current,Ab)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(F(re))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vo(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function DR(t){return vo().ngZone.runOutsideAngular(()=>t())}function Ci(t){return vo().ngZone.run(()=>t())}function $h(t){return t.pipe(Ea(vo().outsideAngular))}function Nc(t){return xR(vo())(t)}function xR(t){return function(n){return n=n.lift(new zh(t.ngZone)),n.pipe(qu(t.outsideAngular),Ea(t.insideAngular))}}var kR=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ci(()=>t.apply(void 0,i))},Be=(t,e)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(n||=Ci(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Er,{},Er,Er))),i[s]=kR(i[s],n));let r=DR(()=>t.apply(this,i));if(!e)if(r instanceof Bt){let s=vo();return r.pipe(qu(s.outsideAngular),Ea(s.insideAngular))}else return Ci(()=>r);return r instanceof Bt?r.pipe(Nc):r instanceof Promise?Ci(()=>new Promise((s,o)=>r.then(c=>Ci(()=>s(c)),c=>Ci(()=>o(c))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:Ci(()=>r)};var wn=class{constructor(e){return e}},Si=class{constructor(){return go()}};function NR(t){return t&&t.length===1?t[0]:new wn(vn())}var qh=new W("angularfire2._apps"),MR={provide:wn,useFactory:NR,deps:[[new Ye,qh]]},OR={provide:Si,deps:[[new Ye,qh]]};function FR(t){return(e,n)=>{let i=n.get(Ze);le("angularfire",Wn.full,"core"),le("angularfire",Wn.full,"app"),le("angular",rd.full,i.toString());let r=e.runOutsideAngular(()=>t(n));return new wn(r)}}function dy(t,...e){return bt([MR,OR,{provide:qh,useFactory:FR(t),multi:!0,deps:[re,zt,Kn,...e]}])}var hy=Be(Ir,!0);function Sy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Ry=Sy,Dy=new mt("auth","Firebase",Sy());var Uc=new kt("@firebase/auth");function VR(t,...e){Uc.logLevel<=ne.WARN&&Uc.warn(`Auth (${It}): ${t}`,...e)}function Oc(t,...e){Uc.logLevel<=ne.ERROR&&Uc.error(`Auth (${It}): ${t}`,...e)}function Yn(t,...e){throw df(t,...e)}function Di(t,...e){return df(t,...e)}function xy(t,e,n){let i=Object.assign(Object.assign({},Ry()),{[e]:n});return new mt("auth","Firebase",i).create(e,{appName:t.name})}function Ri(t){return xy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function df(t,...e){if(typeof t!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Dy.create(t,...e)}function K(t,e,...n){if(!t)throw df(e,...n)}function In(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Oc(e),new Error(e)}function Jn(t,e){t||In(e)}function Kh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function LR(){return fy()==="http:"||fy()==="https:"}function fy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function UR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LR()||Bv()||"connection"in navigator)?navigator.onLine:!0}function jR(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var xi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jn(n>e,"Short delay should be less than long delay!"),this.isMobile=jv()||zv()}get(){return UR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function hf(t,e){Jn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var jc=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;In("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;In("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;In("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var BR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var zR=new xi(3e4,6e4);function ff(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ar(s,o,c,l){return _(this,arguments,function*(t,e,n,i,r={}){return ky(t,r,()=>_(this,null,function*(){let d={},f={};i&&(e==="GET"?f=i:d={body:JSON.stringify(i)});let p=fo(Object.assign({key:t.config.apiKey},f)).slice(1),b=yield t._getAdditionalHeaders();return b["Content-Type"]="application/json",t.languageCode&&(b["X-Firebase-Locale"]=t.languageCode),jc.fetch()(Py(t,t.config.apiHost,n,p),Object.assign({method:e,headers:b,referrerPolicy:"no-referrer"},d))}))})}function ky(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let i=Object.assign(Object.assign({},BR),e);try{let r=new Qh(t),s=yield Promise.race([n(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Mc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Mc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Mc(t,"user-disabled",o);let f=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw xy(t,f,d);Yn(t,f)}}catch(r){if(r instanceof tt)throw r;Yn(t,"network-request-failed",{message:String(r)})}})}function $R(s,o,c,l){return _(this,arguments,function*(t,e,n,i,r={}){let d=yield Ar(t,e,n,i,r);return"mfaPendingCredential"in d&&Yn(t,"multi-factor-auth-required",{_serverResponse:d}),d})}function Py(t,e,n,i){let r=`${e}${n}?${i}`;return t.config.emulator?hf(t.config,r):`${t.config.apiScheme}://${r}`}var Qh=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Di(this.auth,"network-request-failed")),zR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Mc(t,e,n){let i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=Di(t,e,i);return r.customData._tokenResponse=n,r}function qR(t,e){return _(this,null,function*(){return Ar(t,"POST","/v1/accounts:delete",e)})}function Ny(t,e){return _(this,null,function*(){return Ar(t,"POST","/v1/accounts:lookup",e)})}function yo(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function mf(t,e=!1){return _(this,null,function*(){let n=pe(t),i=yield n.getIdToken(e),r=pf(i);K(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:yo(Gh(r.auth_time)),issuedAtTime:yo(Gh(r.iat)),expirationTime:yo(Gh(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Gh(t){return Number(t)*1e3}function pf(t){let[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Oc("JWT malformed, contained fewer than 3 sections"),null;try{let r=wh(n);return r?JSON.parse(r):(Oc("Failed to decode base64 JWT payload"),null)}catch(r){return Oc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function my(t){let e=pf(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Io(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof tt&&GR(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function GR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Yh=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Eo=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yo(this.lastLoginAt),this.creationTime=yo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Bc(t){return _(this,null,function*(){var e;let n=t.auth,i=yield t.getIdToken(),r=yield Io(t,Ny(n,{idToken:i}));K(r?.users.length,n,"internal-error");let s=r.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?My(s.providerUserInfo):[],c=HR(t.providerData,o),l=t.isAnonymous,d=!(t.email&&s.passwordHash)&&!c?.length,f=l?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Eo(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function gf(t){return _(this,null,function*(){let e=pe(t);yield Bc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function HR(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function My(t){return t.map(e=>{var{providerId:n}=e,i=$u(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function WR(t,e){return _(this,null,function*(){let n=yield ky(t,{},()=>_(this,null,function*(){let i=fo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=Py(t,r,"/v1/token",`key=${s}`),c=yield t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",jc.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function KR(t,e){return _(this,null,function*(){return Ar(t,"POST","/v2/accounts:revokeToken",ff(t,e))})}var wo=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):my(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");let n=my(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield WR(e,n);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new t;return i&&(K(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(K(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return In("not implemented")}};function Qn(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Tr=class t{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=$u(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Eo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Io(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return mf(this,e)}reload(){return gf(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield Bc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Qt(this.auth.app))return Promise.reject(Ri(this.auth));let e=yield this.getIdToken();return yield Io(this,qR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,c,l,d,f;let p=(i=n.displayName)!==null&&i!==void 0?i:void 0,b=(r=n.email)!==null&&r!==void 0?r:void 0,T=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,D=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,L=(d=n.createdAt)!==null&&d!==void 0?d:void 0,j=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:z,emailVerified:Q,isAnonymous:Se,providerData:ie,stsTokenManager:I}=n;K(z&&I,e,"internal-error");let g=wo.fromJSON(this.name,I);K(typeof z=="string",e,"internal-error"),Qn(p,e.name),Qn(b,e.name),K(typeof Q=="boolean",e,"internal-error"),K(typeof Se=="boolean",e,"internal-error"),Qn(T,e.name),Qn(x,e.name),Qn(k,e.name),Qn(D,e.name),Qn(L,e.name),Qn(j,e.name);let v=new t({uid:z,auth:e,email:b,emailVerified:Q,displayName:p,isAnonymous:Se,photoURL:x,phoneNumber:T,tenantId:k,stsTokenManager:g,createdAt:L,lastLoginAt:j});return ie&&Array.isArray(ie)&&(v.providerData=ie.map(w=>Object.assign({},w))),D&&(v._redirectEventId=D),v}static _fromIdTokenResponse(e,n,i=!1){return _(this,null,function*(){let r=new wo;r.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Bc(s),s})}static _fromGetAccountInfoResponse(e,n,i){return _(this,null,function*(){let r=n.users[0];K(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?My(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new wo;c.updateFromIdToken(i);let l=new t({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Eo(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var py=new Map;function En(t){Jn(t instanceof Function,"Expected a class definition");let e=py.get(t);return e?(Jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,py.set(t,e),e)}var QR=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,i){return _(this,null,function*(){this.storage[n]=i})}_get(n){return _(this,null,function*(){let i=this.storage[n];return i===void 0?null:i})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,i){}_removeListener(n,i){}}return t.type="NONE",t})(),Jh=QR;function Fc(t,e,n){return`firebase:${t}:${e}:${n}`}var zc=class t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Fc(this.userKey,r.apiKey,s),this.fullPersistenceKey=Fc("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Tr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return _(this,null,function*(){if(!n.length)return new t(En(Jh),e,i);let r=(yield Promise.all(n.map(d=>_(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=r[0]||En(Jh),o=Fc(i,e.config.apiKey,e.name),c=null;for(let d of n)try{let f=yield d._get(o);if(f){let p=Tr._fromJSON(e,f);d!==s&&(c=p),s=d;break}}catch{}let l=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new t(s,e,i):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(n.map(d=>_(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new t(s,e,i))})}};function gy(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Oy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uy(e))return"Blackberry";if(jy(e))return"Webos";if(bf(e))return"Safari";if((e.includes("chrome/")||Fy(e))&&!e.includes("edge/"))return"Chrome";if(Ly(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function Oy(t=Le()){return/firefox\//i.test(t)}function bf(t=Le()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fy(t=Le()){return/crios\//i.test(t)}function Vy(t=Le()){return/iemobile/i.test(t)}function Ly(t=Le()){return/android/i.test(t)}function Uy(t=Le()){return/blackberry/i.test(t)}function jy(t=Le()){return/webos/i.test(t)}function Yc(t=Le()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function YR(t=Le()){var e;return Yc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JR(){return $v()&&document.documentMode===10}function By(t=Le()){return Yc(t)||Ly(t)||jy(t)||Uy(t)||/windows phone/i.test(t)||Vy(t)}function XR(){try{return!!(window&&window!==window.top)}catch{return!1}}function zy(t,e=[]){let n;switch(t){case"Browser":n=gy(Le());break;case"Worker":n=`${gy(Le())}-${t}`;break;default:n=t}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${It}/${i}`}var Xh=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});i.onAbort=n,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function ZR(n){return _(this,arguments,function*(t,e={}){return Ar(t,"GET","/v2/passwordPolicy",ff(t,e))})}var eD=6,Zh=class{constructor(e){var n,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:eD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var ef=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $c(this),this.idTokenSubscription=new $c(this),this.beforeStateQueue=new Xh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Dy,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=En(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield zc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield Ny(this,{idToken:e}),i=yield Tr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(Qt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Bc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=jR()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Qt(this.app))return Promise.reject(Ri(this));let n=e?pe(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Qt(this.app)?Promise.reject(Ri(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Qt(this.app)?Promise.reject(Ri(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(En(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield ZR(this),n=new Zh(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mt("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield KR(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&En(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=yield zc.create(this,[En(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{let l=e.addObserver(n);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&VR(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function _f(t){return pe(t)}var $c=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ac(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var vf={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tD(t){vf=t}function nD(t){return vf.loadJS(t)}function iD(){return vf.gapiScript}function $y(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function yf(t,e){let n=_n(t,"auth");if(n.isInitialized()){let r=n.getImmediate(),s=n.getOptions();if(Ei(s,e??{}))return r;Yn(r,"already-initialized")}return n.initialize({options:e})}function rD(t,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(En);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function wf(t,e,n){let i=_f(t);K(i._canInitEmulator,i,"emulator-config-failed"),K(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!n?.disableWarnings,s=qy(e),{host:o,port:c}=sD(e),l=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||oD()}function qy(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sD(t){let e=qy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:by(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:by(o)}}}function by(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function oD(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var qc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return In("not implemented")}_getIdTokenResponse(e){return In("not implemented")}_linkToIdToken(e,n){return In("not implemented")}_getReauthenticationResolver(e){return In("not implemented")}};function Hh(t,e){return _(this,null,function*(){return $R(t,"POST","/v1/accounts:signInWithIdp",ff(t,e))})}var Gc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var tf=class extends Gc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var To=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,i,r=!1){return _(this,null,function*(){let s=yield Tr._fromIdTokenResponse(e,i,r),o=_y(i);return new t({user:s,providerId:o,_tokenResponse:i,operationType:n})})}static _forOperation(e,n,i){return _(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=_y(i);return new t({user:e,providerId:r,_tokenResponse:i,operationType:n})})}};function _y(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var nf=class t extends tt{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new t(e,n,i,r)}};function Gy(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?nf._fromErrorAndOperation(t,s,e,i):s})}function aD(t,e,n=!1){return _(this,null,function*(){let i=yield Io(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return To._forOperation(t,"link",i)})}function cD(t,e,n=!1){return _(this,null,function*(){let{auth:i}=t;if(Qt(i.app))return Promise.reject(Ri(i));let r="reauthenticate";try{let s=yield Io(t,Gy(i,r,e,t),n);K(s.idToken,i,"internal-error");let o=pf(s.idToken);K(o,i,"internal-error");let{sub:c}=o;return K(t.uid===c,i,"user-mismatch"),To._forOperation(t,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Yn(i,"user-mismatch"),s}})}function lD(t,e,n=!1){return _(this,null,function*(){if(Qt(t.app))return Promise.reject(Ri(t));let i="signIn",r=yield Gy(t,i,e),s=yield To._fromIdTokenResponse(t,i,r);return n||(yield t._updateCurrentUser(s.user)),s})}function If(t,e,n,i){return pe(t).onIdTokenChanged(e,n,i)}function Ef(t,e,n){return pe(t).beforeAuthStateChanged(e,n)}var Hc="__sak";var Wc=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hc,"1"),this.storage.removeItem(Hc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function uD(){let t=Le();return bf(t)||Yc(t)}var dD=1e3,hD=10,fD=(()=>{class t extends Wc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=uD()&&XR(),this.fallbackToPolling=By(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&n(i,s,r)}}onStorageEvent(n,i=!1){if(!n.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let r=n.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(r);if(n.newValue!==c)n.newValue!==null?this.storage.setItem(r,n.newValue):this.storage.removeItem(r);else if(this.localCache[r]===n.newValue&&!i)return}let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);JR()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,hD):s()}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:r}),!0)})},dD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,i){return _(this,null,function*(){yield Fn(t.prototype,this,"_set").call(this,n,i),this.localCache[n]=JSON.stringify(i)})}_get(n){return _(this,null,function*(){let i=yield Fn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(i),i})}_remove(n){return _(this,null,function*(){yield Fn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Hy=fD;var mD=(()=>{class t extends Wc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}return t.type="SESSION",t})(),Tf=mD;function pD(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var gD=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let i=this.receivers.find(s=>s.isListeningto(n));if(i)return i;let r=new t(n);return this.receivers.push(r),r}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let i=n,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(f=>_(this,null,function*(){return f(i.origin,o)})),d=yield pD(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})})}_subscribe(n,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Wy(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}var rf=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,i=50){return _(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let d=Wy("",20);r.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(p){let b=p;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(b.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Yt(){return window}function bD(t){Yt().location.href=t}function Ky(){return typeof Yt().WorkerGlobalScope<"u"&&typeof Yt().importScripts=="function"}function _D(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function vD(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function yD(){return Ky()?self:null}var Qy="firebaseLocalStorageDb",wD=1,Kc="firebaseLocalStorage",Yy="fbase_key",ki=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Jc(t,e){return t.transaction([Kc],e?"readwrite":"readonly").objectStore(Kc)}function ID(){let t=indexedDB.deleteDatabase(Qy);return new ki(t).toPromise()}function sf(){let t=indexedDB.open(Qy,wD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let i=t.result;try{i.createObjectStore(Kc,{keyPath:Yy})}catch(r){n(r)}}),t.addEventListener("success",()=>_(this,null,function*(){let i=t.result;i.objectStoreNames.contains(Kc)?e(i):(i.close(),yield ID(),e(yield sf()))}))})}function vy(t,e,n){return _(this,null,function*(){let i=Jc(t,!0).put({[Yy]:e,value:n});return new ki(i).toPromise()})}function ED(t,e){return _(this,null,function*(){let n=Jc(t,!1).get(e),i=yield new ki(n).toPromise();return i===void 0?null:i.value})}function yy(t,e){let n=Jc(t,!0).delete(e);return new ki(n).toPromise()}var TD=800,AD=3,CD=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield sf(),this.db)})}_withRetries(n){return _(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield n(r)}catch(r){if(i++>AD)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return Ky()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=gD._getInstance(yD()),this.receiver._subscribe("keyChanged",(n,i)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(n,i)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,i;if(this.activeServiceWorker=yield _D(),!this.activeServiceWorker)return;this.sender=new rf(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((n=r[0])===null||n===void 0)&&n.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||vD()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield sf();return yield vy(n,Hc,"1"),yield yy(n,Hc),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,i){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>vy(r,n,i)),this.localCache[n]=i,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let i=yield this._withRetries(r=>ED(r,n));return this.localCache[n]=i,i})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>yy(i,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(s=>{let o=Jc(s,!1).getAll();return new ki(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),TD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Jy=CD;var XV=$y("rcb"),ZV=new xi(3e4,6e4);function SD(t,e){return e?En(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Ao=class extends qc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Hh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Hh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Hh(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function RD(t){return lD(t.auth,new Ao(t),t.bypassAuthState)}function DD(t){let{auth:e,user:n}=t;return K(n,e,"internal-error"),cD(n,new Ao(t),t.bypassAuthState)}function xD(t){return _(this,null,function*(){let{auth:e,user:n}=t;return K(n,e,"internal-error"),aD(n,new Ao(t),t.bypassAuthState)})}var of=class{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RD;case"linkViaPopup":case"linkViaRedirect":return xD;case"reauthViaPopup":case"reauthViaRedirect":return DD;default:Yn(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var eL=new xi(2e3,1e4);var kD="pendingRedirect",Vc=new Map,af=class t extends of{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){return _(this,null,function*(){let e=Vc.get(this.auth._key());if(!e){try{let i=(yield PD(this.resolver,this.auth))?yield Fn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Vc.set(this.auth._key(),e)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Fn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Fn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function PD(t,e){return _(this,null,function*(){let n=OD(e),i=MD(t);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(n))==="true";return yield i._remove(n),r})}function ND(t,e){Vc.set(t._key(),e)}function MD(t){return En(t._redirectPersistence)}function OD(t){return Fc(kD,t.config.apiKey,t.name)}function FD(t,e,n=!1){return _(this,null,function*(){if(Qt(t.app))return Promise.reject(Ri(t));let i=_f(t),r=SD(i,e),o=yield new af(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var VD=10*60*1e3,cf=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Xy(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Di(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VD&&this.cachedEventUids.clear(),this.cachedEventUids.has(wy(e))}saveEventToCache(e){this.cachedEventUids.add(wy(e)),this.lastProcessedEventTime=Date.now()}};function wy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Xy({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function LD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xy(t);default:return!1}}function UD(n){return _(this,arguments,function*(t,e={}){return Ar(t,"GET","/v1/projects",e)})}var jD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BD=/^https?/;function zD(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield UD(t);for(let n of e)try{if($D(n))return}catch{}Yn(t,"unauthorized-domain")})}function $D(t){let e=Kh(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!BD.test(n))return!1;if(jD.test(t))return i===t;let r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var qD=new xi(3e4,6e4);function Iy(){let t=Yt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GD(t){return new Promise((e,n)=>{var i,r,s;function o(){Iy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Iy(),n(Di(t,"network-request-failed"))},timeout:qD.get()})}if(!((r=(i=Yt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Yt().gapi)===null||s===void 0)&&s.load)o();else{let c=$y("iframefcb");return Yt()[c]=()=>{gapi.load?o():n(Di(t,"network-request-failed"))},nD(`${iD()}?onload=${c}`).catch(l=>n(l))}}).catch(e=>{throw Lc=null,e})}var Lc=null;function HD(t){return Lc=Lc||GD(t),Lc}var WD=new xi(5e3,15e3),KD="__/auth/iframe",QD="emulator/auth/iframe",YD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XD(t){let e=t.config;K(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?hf(e,QD):`https://${t.config.authDomain}/${KD}`,i={apiKey:e.apiKey,appName:t.name,v:It},r=JD.get(t.config.apiHost);r&&(i.eid=r);let s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${fo(i).slice(1)}`}function ZD(t){return _(this,null,function*(){let e=yield HD(t),n=Yt().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:XD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YD,dontclear:!0},i=>new Promise((r,s)=>_(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Di(t,"network-request-failed"),c=Yt().setTimeout(()=>{s(o)},WD.get());function l(){Yt().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var ex={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tx=500,nx=600,ix="_blank",rx="http://localhost",Qc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function sx(t,e,n,i=tx,r=nx){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},ex),{width:i.toString(),height:r.toString(),top:s,left:o}),d=Le().toLowerCase();n&&(c=Fy(d)?ix:n),Oy(d)&&(e=e||rx,l.scrollbars="yes");let f=Object.entries(l).reduce((b,[T,x])=>`${b}${T}=${x},`,"");if(YR(d)&&c!=="_self")return ox(e||"",c),new Qc(null);let p=window.open(e||"",c,f);K(p,t,"popup-blocked");try{p.focus()}catch{}return new Qc(p)}function ox(t,e){let n=document.createElement("a");n.href=t,n.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}var ax="__/auth/handler",cx="emulator/auth/handler",lx=encodeURIComponent("fac");function Ey(t,e,n,i,r,s){return _(this,null,function*(){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:It,eventId:r};if(e instanceof Gc){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Hv(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(s||{}))o[f]=p}if(e instanceof tf){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield t._getAppCheckToken(),d=l?`#${lx}=${encodeURIComponent(l)}`:"";return`${ux(t)}?${fo(c).slice(1)}${d}`})}function ux({config:t}){return t.emulator?hf(t,cx):`https://${t.authDomain}/${ax}`}var Wh="webStorageSupport",lf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tf,this._completeRedirectFn=FD,this._overrideRedirectResult=ND}_openPopup(e,n,i,r){return _(this,null,function*(){var s;Jn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Ey(e,n,i,Kh(),r);return sx(e,o,Wy())})}_openRedirect(e,n,i,r){return _(this,null,function*(){yield this._originValidation(e);let s=yield Ey(e,n,i,Kh(),r);return bD(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Jn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(e){return _(this,null,function*(){let n=yield ZD(e),i=new cf(e);return n.register("authEvent",r=>(K(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wh,{type:Wh},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Wh];o!==void 0&&n(!!o),Yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return By()||bf()||Yc()}},Zy=lf;var Ty="@firebase/auth",Ay="1.7.3";var uf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function dx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hx(t){nt(new Ne("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zy(t)},d=new ef(i,r,s,l);return rD(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),nt(new Ne("auth-internal",e=>{let n=_f(e.getProvider("auth").getImmediate());return(i=>new uf(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),le(Ty,Ay,dx(t)),le(Ty,Ay,"esm2017")}var fx=5*60,mx=Ah("authIdTokenMaxAge")||fx,Cy=null,px=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>mx)return;let r=n?.token;Cy!==r&&(Cy=r,yield fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Af(t=vn()){let e=_n(t,"auth");if(e.isInitialized())return e.getImmediate();let n=yf(t,{popupRedirectResolver:Zy,persistence:[Jy,Hy,Tf]}),i=Ah("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=px(s.toString());Ef(n,o,()=>o(n.currentUser)),If(n,c=>o(c))}}let r=Ih("auth");return r&&wf(n,`http://${r}`),n}function gx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}tD({loadJS(t){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{let s=Di("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",gx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hx("Browser");var ew="auth",Co=class{constructor(e){return e}},So=class{constructor(){return _o(ew)}};var Cf=new W("angularfire2.auth-instances");function uk(t,e){let n=Pc(ew,t,e);return n&&new Co(n)}function dk(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Co(i)}}var hk={provide:So,deps:[[new Ye,Cf]]},fk={provide:Co,useFactory:uk,deps:[[new Ye,Cf],wn]};function tw(t,...e){return le("angularfire",Wn.full,"auth"),bt([fk,hk,{provide:Cf,useFactory:dk(t),multi:!0,deps:[re,zt,Kn,Si,[new Ye,yn],...e]}])}var nw=Be(Af,!0);var iw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rw={};var Xn,Sf;(function(){var t;function e(I,g){function v(){}v.prototype=g.prototype,I.D=g.prototype,I.prototype=new v,I.prototype.constructor=I,I.C=function(w,E,C){for(var y=Array(arguments.length-2),cn=2;cn<arguments.length;cn++)y[cn-2]=arguments[cn];return g.prototype[E].apply(w,y)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,g,v){v||(v=0);var w=Array(16);if(typeof g=="string")for(var E=0;16>E;++E)w[E]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(E=0;16>E;++E)w[E]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=I.g[0],v=I.g[1],E=I.g[2];var C=I.g[3],y=g+(C^v&(E^C))+w[0]+3614090360&4294967295;g=v+(y<<7&4294967295|y>>>25),y=C+(E^g&(v^E))+w[1]+3905402710&4294967295,C=g+(y<<12&4294967295|y>>>20),y=E+(v^C&(g^v))+w[2]+606105819&4294967295,E=C+(y<<17&4294967295|y>>>15),y=v+(g^E&(C^g))+w[3]+3250441966&4294967295,v=E+(y<<22&4294967295|y>>>10),y=g+(C^v&(E^C))+w[4]+4118548399&4294967295,g=v+(y<<7&4294967295|y>>>25),y=C+(E^g&(v^E))+w[5]+1200080426&4294967295,C=g+(y<<12&4294967295|y>>>20),y=E+(v^C&(g^v))+w[6]+2821735955&4294967295,E=C+(y<<17&4294967295|y>>>15),y=v+(g^E&(C^g))+w[7]+4249261313&4294967295,v=E+(y<<22&4294967295|y>>>10),y=g+(C^v&(E^C))+w[8]+1770035416&4294967295,g=v+(y<<7&4294967295|y>>>25),y=C+(E^g&(v^E))+w[9]+2336552879&4294967295,C=g+(y<<12&4294967295|y>>>20),y=E+(v^C&(g^v))+w[10]+4294925233&4294967295,E=C+(y<<17&4294967295|y>>>15),y=v+(g^E&(C^g))+w[11]+2304563134&4294967295,v=E+(y<<22&4294967295|y>>>10),y=g+(C^v&(E^C))+w[12]+1804603682&4294967295,g=v+(y<<7&4294967295|y>>>25),y=C+(E^g&(v^E))+w[13]+4254626195&4294967295,C=g+(y<<12&4294967295|y>>>20),y=E+(v^C&(g^v))+w[14]+2792965006&4294967295,E=C+(y<<17&4294967295|y>>>15),y=v+(g^E&(C^g))+w[15]+1236535329&4294967295,v=E+(y<<22&4294967295|y>>>10),y=g+(E^C&(v^E))+w[1]+4129170786&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^E&(g^v))+w[6]+3225465664&4294967295,C=g+(y<<9&4294967295|y>>>23),y=E+(g^v&(C^g))+w[11]+643717713&4294967295,E=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(E^C))+w[0]+3921069994&4294967295,v=E+(y<<20&4294967295|y>>>12),y=g+(E^C&(v^E))+w[5]+3593408605&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^E&(g^v))+w[10]+38016083&4294967295,C=g+(y<<9&4294967295|y>>>23),y=E+(g^v&(C^g))+w[15]+3634488961&4294967295,E=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(E^C))+w[4]+3889429448&4294967295,v=E+(y<<20&4294967295|y>>>12),y=g+(E^C&(v^E))+w[9]+568446438&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^E&(g^v))+w[14]+3275163606&4294967295,C=g+(y<<9&4294967295|y>>>23),y=E+(g^v&(C^g))+w[3]+4107603335&4294967295,E=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(E^C))+w[8]+1163531501&4294967295,v=E+(y<<20&4294967295|y>>>12),y=g+(E^C&(v^E))+w[13]+2850285829&4294967295,g=v+(y<<5&4294967295|y>>>27),y=C+(v^E&(g^v))+w[2]+4243563512&4294967295,C=g+(y<<9&4294967295|y>>>23),y=E+(g^v&(C^g))+w[7]+1735328473&4294967295,E=C+(y<<14&4294967295|y>>>18),y=v+(C^g&(E^C))+w[12]+2368359562&4294967295,v=E+(y<<20&4294967295|y>>>12),y=g+(v^E^C)+w[5]+4294588738&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^E)+w[8]+2272392833&4294967295,C=g+(y<<11&4294967295|y>>>21),y=E+(C^g^v)+w[11]+1839030562&4294967295,E=C+(y<<16&4294967295|y>>>16),y=v+(E^C^g)+w[14]+4259657740&4294967295,v=E+(y<<23&4294967295|y>>>9),y=g+(v^E^C)+w[1]+2763975236&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^E)+w[4]+1272893353&4294967295,C=g+(y<<11&4294967295|y>>>21),y=E+(C^g^v)+w[7]+4139469664&4294967295,E=C+(y<<16&4294967295|y>>>16),y=v+(E^C^g)+w[10]+3200236656&4294967295,v=E+(y<<23&4294967295|y>>>9),y=g+(v^E^C)+w[13]+681279174&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^E)+w[0]+3936430074&4294967295,C=g+(y<<11&4294967295|y>>>21),y=E+(C^g^v)+w[3]+3572445317&4294967295,E=C+(y<<16&4294967295|y>>>16),y=v+(E^C^g)+w[6]+76029189&4294967295,v=E+(y<<23&4294967295|y>>>9),y=g+(v^E^C)+w[9]+3654602809&4294967295,g=v+(y<<4&4294967295|y>>>28),y=C+(g^v^E)+w[12]+3873151461&4294967295,C=g+(y<<11&4294967295|y>>>21),y=E+(C^g^v)+w[15]+530742520&4294967295,E=C+(y<<16&4294967295|y>>>16),y=v+(E^C^g)+w[2]+3299628645&4294967295,v=E+(y<<23&4294967295|y>>>9),y=g+(E^(v|~C))+w[0]+4096336452&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~E))+w[7]+1126891415&4294967295,C=g+(y<<10&4294967295|y>>>22),y=E+(g^(C|~v))+w[14]+2878612391&4294967295,E=C+(y<<15&4294967295|y>>>17),y=v+(C^(E|~g))+w[5]+4237533241&4294967295,v=E+(y<<21&4294967295|y>>>11),y=g+(E^(v|~C))+w[12]+1700485571&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~E))+w[3]+2399980690&4294967295,C=g+(y<<10&4294967295|y>>>22),y=E+(g^(C|~v))+w[10]+4293915773&4294967295,E=C+(y<<15&4294967295|y>>>17),y=v+(C^(E|~g))+w[1]+2240044497&4294967295,v=E+(y<<21&4294967295|y>>>11),y=g+(E^(v|~C))+w[8]+1873313359&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~E))+w[15]+4264355552&4294967295,C=g+(y<<10&4294967295|y>>>22),y=E+(g^(C|~v))+w[6]+2734768916&4294967295,E=C+(y<<15&4294967295|y>>>17),y=v+(C^(E|~g))+w[13]+1309151649&4294967295,v=E+(y<<21&4294967295|y>>>11),y=g+(E^(v|~C))+w[4]+4149444226&4294967295,g=v+(y<<6&4294967295|y>>>26),y=C+(v^(g|~E))+w[11]+3174756917&4294967295,C=g+(y<<10&4294967295|y>>>22),y=E+(g^(C|~v))+w[2]+718787259&4294967295,E=C+(y<<15&4294967295|y>>>17),y=v+(C^(E|~g))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(E+(y<<21&4294967295|y>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+C&4294967295}i.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var v=g-this.blockSize,w=this.B,E=this.h,C=0;C<g;){if(E==0)for(;C<=v;)r(this,I,C),C+=this.blockSize;if(typeof I=="string"){for(;C<g;)if(w[E++]=I.charCodeAt(C++),E==this.blockSize){r(this,w),E=0;break}}else for(;C<g;)if(w[E++]=I[C++],E==this.blockSize){r(this,w),E=0;break}}this.h=E,this.o+=g},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var v=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=v&255,v/=256;for(this.u(I),I=Array(16),g=v=0;4>g;++g)for(var w=0;32>w;w+=8)I[v++]=this.g[g]>>>w&255;return I};function s(I,g){var v=c;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=g(I)}function o(I,g){this.h=g;for(var v=[],w=!0,E=I.length-1;0<=E;E--){var C=I[E]|0;w&&C==g||(v[E]=C,w=!1)}this.g=v}var c={};function l(I){return-128<=I&&128>I?s(I,function(g){return new o([g|0],0>g?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return D(d(-I));for(var g=[],v=1,w=0;I>=v;w++)g[w]=I/v|0,v*=4294967296;return new o(g,0)}function f(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return D(f(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(g,8)),w=p,E=0;E<I.length;E+=8){var C=Math.min(8,I.length-E),y=parseInt(I.substring(E,E+C),g);8>C?(C=d(Math.pow(g,C)),w=w.j(C).add(d(y))):(w=w.j(v),w=w.add(d(y)))}return w}var p=l(0),b=l(1),T=l(16777216);t=o.prototype,t.m=function(){if(k(this))return-D(this).m();for(var I=0,g=1,v=0;v<this.g.length;v++){var w=this.i(v);I+=(0<=w?w:4294967296+w)*g,g*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x(this))return"0";if(k(this))return"-"+D(this).toString(I);for(var g=d(Math.pow(I,6)),v=this,w="";;){var E=Q(v,g).g;v=L(v,E.j(g));var C=((0<v.g.length?v.g[0]:v.h)>>>0).toString(I);if(v=E,x(v))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function x(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function k(I){return I.h==-1}t.l=function(I){return I=L(this,I),k(I)?-1:x(I)?0:1};function D(I){for(var g=I.g.length,v=[],w=0;w<g;w++)v[w]=~I.g[w];return new o(v,~I.h).add(b)}t.abs=function(){return k(this)?D(this):this},t.add=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0,E=0;E<=g;E++){var C=w+(this.i(E)&65535)+(I.i(E)&65535),y=(C>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);w=y>>>16,C&=65535,y&=65535,v[E]=y<<16|C}return new o(v,v[v.length-1]&-2147483648?-1:0)};function L(I,g){return I.add(D(g))}t.j=function(I){if(x(this)||x(I))return p;if(k(this))return k(I)?D(this).j(D(I)):D(D(this).j(I));if(k(I))return D(this.j(D(I)));if(0>this.l(T)&&0>I.l(T))return d(this.m()*I.m());for(var g=this.g.length+I.g.length,v=[],w=0;w<2*g;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(var E=0;E<I.g.length;E++){var C=this.i(w)>>>16,y=this.i(w)&65535,cn=I.i(E)>>>16,ss=I.i(E)&65535;v[2*w+2*E]+=y*ss,j(v,2*w+2*E),v[2*w+2*E+1]+=C*ss,j(v,2*w+2*E+1),v[2*w+2*E+1]+=y*cn,j(v,2*w+2*E+1),v[2*w+2*E+2]+=C*cn,j(v,2*w+2*E+2)}for(w=0;w<g;w++)v[w]=v[2*w+1]<<16|v[2*w];for(w=g;w<2*g;w++)v[w]=0;return new o(v,0)};function j(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function z(I,g){this.g=I,this.h=g}function Q(I,g){if(x(g))throw Error("division by zero");if(x(I))return new z(p,p);if(k(I))return g=Q(D(I),g),new z(D(g.g),D(g.h));if(k(g))return g=Q(I,D(g)),new z(D(g.g),g.h);if(30<I.g.length){if(k(I)||k(g))throw Error("slowDivide_ only works with positive integers.");for(var v=b,w=g;0>=w.l(I);)v=Se(v),w=Se(w);var E=ie(v,1),C=ie(w,1);for(w=ie(w,2),v=ie(v,2);!x(w);){var y=C.add(w);0>=y.l(I)&&(E=E.add(v),C=y),w=ie(w,1),v=ie(v,1)}return g=L(I,E.j(g)),new z(E,g)}for(E=p;0<=I.l(g);){for(v=Math.max(1,Math.floor(I.m()/g.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=d(v),y=C.j(g);k(y)||0<y.l(I);)v-=w,C=d(v),y=C.j(g);x(C)&&(C=b),E=E.add(C),I=L(I,y)}return new z(E,I)}t.A=function(I){return Q(this,I).h},t.and=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)&I.i(w);return new o(v,this.h&I.h)},t.or=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)|I.i(w);return new o(v,this.h|I.h)},t.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),v=[],w=0;w<g;w++)v[w]=this.i(w)^I.i(w);return new o(v,this.h^I.h)};function Se(I){for(var g=I.g.length+1,v=[],w=0;w<g;w++)v[w]=I.i(w)<<1|I.i(w-1)>>>31;return new o(v,I.h)}function ie(I,g){var v=g>>5;g%=32;for(var w=I.g.length-v,E=[],C=0;C<w;C++)E[C]=0<g?I.i(C+v)>>>g|I.i(C+v+1)<<32-g:I.i(C+v);return new o(E,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Sf=rw.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Xn=rw.Integer=o}).apply(typeof iw<"u"?iw:typeof self<"u"?self:typeof window<"u"?window:{});var Xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tn={};var Rf,Df,Cr,xf,Ro,Zc,kf,Pf,Nf;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,h){return a==Array.prototype||a==Object.prototype||(a[u]=h.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xc=="object"&&Xc];for(var u=0;u<a.length;++u){var h=a[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=n(this);function r(a,u){if(u)e:{var h=i;a=a.split(".");for(var m=0;m<a.length-1;m++){var A=a[m];if(!(A in h))break e;h=h[A]}a=a[a.length-1],m=h[a],u=u(m),u!=m&&u!=null&&e(h,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var h=0,m=!1,A={next:function(){if(!m&&h<a.length){var S=h++;return{value:u(S,a[S]),done:!1}}return m=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}r("Array.prototype.values",function(a){return a||function(){return s(this,function(u,h){return h})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,h){return a.call.apply(a.bind,arguments)}function p(a,u,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,m),a.apply(u,A)}}return function(){return a.apply(u,arguments)}}function b(a,u,h){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,b.apply(null,arguments)}function T(a,u){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function x(a,u){function h(){}h.prototype=u.prototype,a.aa=u.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,A,S){for(var M=Array(arguments.length-2),he=2;he<arguments.length;he++)M[he-2]=arguments[he];return u.prototype[A].apply(m,M)}}function k(a){let u=a.length;if(0<u){let h=Array(u);for(let m=0;m<u;m++)h[m]=a[m];return h}return[]}function D(a,u){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(l(m)){let A=a.length||0,S=m.length||0;a.length=A+S;for(let M=0;M<S;M++)a[A+M]=m[M]}else a.push(m)}}class L{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function j(a){return/^[\s\xa0]*$/.test(a)}function z(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function Q(a){return Q[" "](a),a}Q[" "]=function(){};var Se=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ie(a,u,h){for(let m in a)u.call(h,a[m],m,a)}function I(a,u){for(let h in a)u.call(void 0,a[h],h,a)}function g(a){let u={};for(let h in a)u[h]=a[h];return u}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,u){let h,m;for(let A=1;A<arguments.length;A++){m=arguments[A];for(h in m)a[h]=m[h];for(let S=0;S<v.length;S++)h=v[S],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function E(a){var u=1;a=a.split(":");let h=[];for(;0<u&&a.length;)h.push(a.shift()),u--;return a.length&&h.push(a.join(":")),h}function C(a){c.setTimeout(()=>{throw a},0)}function y(){var a=mu;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class cn{constructor(){this.h=this.g=null}add(u,h){let m=ss.get();m.set(u,h),this.h?this.h.next=m:this.g=m,this.h=m}}var ss=new L(()=>new JE,a=>a.reset());class JE{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let os,as=!1,mu=new cn,Eg=()=>{let a=c.Promise.resolve(void 0);os=()=>{a.then(XE)}};var XE=()=>{for(var a;a=y();){try{a.h.call(a.g)}catch(h){C(h)}var u=ss;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}as=!1};function Pn(){this.s=this.s,this.C=this.C}Pn.prototype.s=!1,Pn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function He(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}He.prototype.h=function(){this.defaultPrevented=!0};var ZE=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return a}();function cs(a,u){if(He.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(Se){e:{try{Q(u.nodeName);var A=!0;break e}catch{}A=!1}A||(u=null)}}else h=="mouseover"?u=a.fromElement:h=="mouseout"&&(u=a.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:eT[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&cs.aa.h.call(this)}}x(cs,He);var eT={2:"touch",3:"pen",4:"mouse"};cs.prototype.h=function(){cs.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ls="closure_listenable_"+(1e6*Math.random()|0),tT=0;function nT(a,u,h,m,A){this.listener=a,this.proxy=null,this.src=u,this.type=h,this.capture=!!m,this.ha=A,this.key=++tT,this.da=this.fa=!1}function oa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function aa(a){this.src=a,this.g={},this.h=0}aa.prototype.add=function(a,u,h,m,A){var S=a.toString();a=this.g[S],a||(a=this.g[S]=[],this.h++);var M=gu(a,u,m,A);return-1<M?(u=a[M],h||(u.fa=!1)):(u=new nT(u,this.src,S,!!m,A),u.fa=h,a.push(u)),u};function pu(a,u){var h=u.type;if(h in a.g){var m=a.g[h],A=Array.prototype.indexOf.call(m,u,void 0),S;(S=0<=A)&&Array.prototype.splice.call(m,A,1),S&&(oa(u),a.g[h].length==0&&(delete a.g[h],a.h--))}}function gu(a,u,h,m){for(var A=0;A<a.length;++A){var S=a[A];if(!S.da&&S.listener==u&&S.capture==!!h&&S.ha==m)return A}return-1}var bu="closure_lm_"+(1e6*Math.random()|0),_u={};function Tg(a,u,h,m,A){if(m&&m.once)return Cg(a,u,h,m,A);if(Array.isArray(u)){for(var S=0;S<u.length;S++)Tg(a,u[S],h,m,A);return null}return h=Iu(h),a&&a[ls]?a.K(u,h,d(m)?!!m.capture:!!m,A):Ag(a,u,h,!1,m,A)}function Ag(a,u,h,m,A,S){if(!u)throw Error("Invalid event type");var M=d(A)?!!A.capture:!!A,he=yu(a);if(he||(a[bu]=he=new aa(a)),h=he.add(u,h,m,M,S),h.proxy)return h;if(m=iT(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)ZE||(A=M),A===void 0&&(A=!1),a.addEventListener(u.toString(),m,A);else if(a.attachEvent)a.attachEvent(Rg(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function iT(){function a(h){return u.call(a.src,a.listener,h)}let u=rT;return a}function Cg(a,u,h,m,A){if(Array.isArray(u)){for(var S=0;S<u.length;S++)Cg(a,u[S],h,m,A);return null}return h=Iu(h),a&&a[ls]?a.L(u,h,d(m)?!!m.capture:!!m,A):Ag(a,u,h,!0,m,A)}function Sg(a,u,h,m,A){if(Array.isArray(u))for(var S=0;S<u.length;S++)Sg(a,u[S],h,m,A);else m=d(m)?!!m.capture:!!m,h=Iu(h),a&&a[ls]?(a=a.i,u=String(u).toString(),u in a.g&&(S=a.g[u],h=gu(S,h,m,A),-1<h&&(oa(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete a.g[u],a.h--)))):a&&(a=yu(a))&&(u=a.g[u.toString()],a=-1,u&&(a=gu(u,h,m,A)),(h=-1<a?u[a]:null)&&vu(h))}function vu(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[ls])pu(u.i,a);else{var h=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(h,m,a.capture):u.detachEvent?u.detachEvent(Rg(h),m):u.addListener&&u.removeListener&&u.removeListener(m),(h=yu(u))?(pu(h,a),h.h==0&&(h.src=null,u[bu]=null)):oa(a)}}}function Rg(a){return a in _u?_u[a]:_u[a]="on"+a}function rT(a,u){if(a.da)a=!0;else{u=new cs(u,this);var h=a.listener,m=a.ha||a.src;a.fa&&vu(a),a=h.call(m,u)}return a}function yu(a){return a=a[bu],a instanceof aa?a:null}var wu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Iu(a){return typeof a=="function"?a:(a[wu]||(a[wu]=function(u){return a.handleEvent(u)}),a[wu])}function We(){Pn.call(this),this.i=new aa(this),this.M=this,this.F=null}x(We,Pn),We.prototype[ls]=!0,We.prototype.removeEventListener=function(a,u,h,m){Sg(this,a,u,h,m)};function ot(a,u){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new He(u,a);else if(u instanceof He)u.target=u.target||a;else{var A=u;u=new He(m,a),w(u,A)}if(A=!0,h)for(var S=h.length-1;0<=S;S--){var M=u.g=h[S];A=ca(M,m,!0,u)&&A}if(M=u.g=a,A=ca(M,m,!0,u)&&A,A=ca(M,m,!1,u)&&A,h)for(S=0;S<h.length;S++)M=u.g=h[S],A=ca(M,m,!1,u)&&A}We.prototype.N=function(){if(We.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var h=a.g[u],m=0;m<h.length;m++)oa(h[m]);delete a.g[u],a.h--}}this.F=null},We.prototype.K=function(a,u,h,m){return this.i.add(String(a),u,!1,h,m)},We.prototype.L=function(a,u,h,m){return this.i.add(String(a),u,!0,h,m)};function ca(a,u,h,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var A=!0,S=0;S<u.length;++S){var M=u[S];if(M&&!M.da&&M.capture==h){var he=M.listener,$e=M.ha||M.src;M.fa&&pu(a.i,M),A=he.call($e,m)!==!1&&A}}return A&&!m.defaultPrevented}function Dg(a,u,h){if(typeof a=="function")h&&(a=b(a,h));else if(a&&typeof a.handleEvent=="function")a=b(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function xg(a){a.g=Dg(()=>{a.g=null,a.i&&(a.i=!1,xg(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class sT extends Pn{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:xg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function us(a){Pn.call(this),this.h=a,this.g={}}x(us,Pn);var kg=[];function Pg(a){ie(a.g,function(u,h){this.g.hasOwnProperty(h)&&vu(u)},a),a.g={}}us.prototype.N=function(){us.aa.N.call(this),Pg(this)},us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Eu=c.JSON.stringify,oT=c.JSON.parse,aT=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Tu(){}Tu.prototype.h=null;function Ng(a){return a.h||(a.h=a.i())}function Mg(){}var ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Au(){He.call(this,"d")}x(Au,He);function Cu(){He.call(this,"c")}x(Cu,He);var ui={},Og=null;function la(){return Og=Og||new We}ui.La="serverreachability";function Fg(a){He.call(this,ui.La,a)}x(Fg,He);function hs(a){let u=la();ot(u,new Fg(u))}ui.STAT_EVENT="statevent";function Vg(a,u){He.call(this,ui.STAT_EVENT,a),this.stat=u}x(Vg,He);function at(a){let u=la();ot(u,new Vg(u,a))}ui.Ma="timingevent";function Lg(a,u){He.call(this,ui.Ma,a),this.size=u}x(Lg,He);function fs(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function ms(){this.g=!0}ms.prototype.xa=function(){this.g=!1};function cT(a,u,h,m,A,S){a.info(function(){if(a.g)if(S)for(var M="",he=S.split("&"),$e=0;$e<he.length;$e++){var ae=he[$e].split("=");if(1<ae.length){var Ke=ae[0];ae=ae[1];var Qe=Ke.split("_");M=2<=Qe.length&&Qe[1]=="type"?M+(Ke+"="+ae+"&"):M+(Ke+"=redacted&")}}else M=null;else M=S;return"XMLHTTP REQ ("+m+") [attempt "+A+"]: "+u+`
`+h+`
`+M})}function lT(a,u,h,m,A,S,M){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+A+"]: "+u+`
`+h+`
`+S+" "+M})}function Wi(a,u,h,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+dT(a,h)+(m?" "+m:"")})}function uT(a,u){a.info(function(){return"TIMEOUT: "+u})}ms.prototype.info=function(){};function dT(a,u){if(!a.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var A=m[1];if(Array.isArray(A)&&!(1>A.length)){var S=A[0];if(S!="noop"&&S!="stop"&&S!="close")for(var M=1;M<A.length;M++)A[M]=""}}}}return Eu(h)}catch{return u}}var ua={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ug={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Su;function da(){}x(da,Tu),da.prototype.g=function(){return new XMLHttpRequest},da.prototype.i=function(){return{}},Su=new da;function Nn(a,u,h,m){this.j=a,this.i=u,this.l=h,this.R=m||1,this.U=new us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jg}function jg(){this.i=null,this.g="",this.h=!1}var Bg={},Ru={};function Du(a,u,h){a.L=1,a.v=pa(ln(u)),a.m=h,a.P=!0,zg(a,null)}function zg(a,u){a.F=Date.now(),ha(a),a.A=ln(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),nb(h.i,"t",m),a.C=0,h=a.j.J,a.h=new jg,a.g=yb(a.j,h?u:null,!a.m),0<a.O&&(a.M=new sT(b(a.Y,a,a.g),a.O)),u=a.U,h=a.g,m=a.ca;var A="readystatechange";Array.isArray(A)||(A&&(kg[0]=A.toString()),A=kg);for(var S=0;S<A.length;S++){var M=Tg(h,A[S],m||u.handleEvent,!1,u.h||u);if(!M)break;u.g[M.key]=M}u=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),hs(),cT(a.i,a.u,a.A,a.l,a.R,a.m)}Nn.prototype.ca=function(a){a=a.target;let u=this.M;u&&un(a)==3?u.j():this.Y(a)},Nn.prototype.Y=function(a){try{if(a==this.g)e:{let Qe=un(this.g);var u=this.g.Ba();let Yi=this.g.Z();if(!(3>Qe)&&(Qe!=3||this.g&&(this.h.h||this.g.oa()||lb(this.g)))){this.J||Qe!=4||u==7||(u==8||0>=Yi?hs(3):hs(2)),xu(this);var h=this.g.Z();this.X=h;t:if($g(this)){var m=lb(this.g);a="";var A=m.length,S=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),ps(this);var M="";break t}this.h.i=new c.TextDecoder}for(u=0;u<A;u++)this.h.h=!0,a+=this.h.i.decode(m[u],{stream:!(S&&u==A-1)});m.length=0,this.h.g+=a,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=h==200,lT(this.i,this.u,this.A,this.l,this.R,Qe,h),this.o){if(this.T&&!this.K){t:{if(this.g){var he,$e=this.g;if((he=$e.g?$e.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(he)){var ae=he;break t}}ae=null}if(h=ae)Wi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ku(this,h);else{this.o=!1,this.s=3,at(12),di(this),ps(this);break e}}if(this.P){h=!0;let Nt;for(;!this.J&&this.C<M.length;)if(Nt=hT(this,M),Nt==Ru){Qe==4&&(this.s=4,at(14),h=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==Bg){this.s=4,at(15),Wi(this.i,this.l,M,"[Invalid Chunk]"),h=!1;break}else Wi(this.i,this.l,Nt,null),ku(this,Nt);if($g(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qe!=4||M.length!=0||this.h.h||(this.s=1,at(16),h=!1),this.o=this.o&&h,!h)Wi(this.i,this.l,M,"[Invalid Chunked Response]"),di(this),ps(this);else if(0<M.length&&!this.W){this.W=!0;var Ke=this.j;Ke.g==this&&Ke.ba&&!Ke.M&&(Ke.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),Vu(Ke),Ke.M=!0,at(11))}}else Wi(this.i,this.l,M,null),ku(this,M);Qe==4&&di(this),this.o&&!this.J&&(Qe==4?gb(this.j,this):(this.o=!1,ha(this)))}else DT(this.g),h==400&&0<M.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),di(this),ps(this)}}}catch{}finally{}};function $g(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function hT(a,u){var h=a.C,m=u.indexOf(`
`,h);return m==-1?Ru:(h=Number(u.substring(h,m)),isNaN(h)?Bg:(m+=1,m+h>u.length?Ru:(u=u.slice(m,m+h),a.C=m+h,u)))}Nn.prototype.cancel=function(){this.J=!0,di(this)};function ha(a){a.S=Date.now()+a.I,qg(a,a.I)}function qg(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=fs(b(a.ba,a),u)}function xu(a){a.B&&(c.clearTimeout(a.B),a.B=null)}Nn.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(uT(this.i,this.A),this.L!=2&&(hs(),at(17)),di(this),this.s=2,ps(this)):qg(this,this.S-a)};function ps(a){a.j.G==0||a.J||gb(a.j,a)}function di(a){xu(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,Pg(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function ku(a,u){try{var h=a.j;if(h.G!=0&&(h.g==a||Pu(h.h,a))){if(!a.K&&Pu(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var A=m;if(A[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)ya(h),_a(h);else break e;Fu(h),at(18)}}else h.za=A[1],0<h.za-h.T&&37500>A[2]&&h.F&&h.v==0&&!h.C&&(h.C=fs(b(h.Za,h),6e3));if(1>=Wg(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else fi(h,11)}else if((a.K||h.g==a)&&ya(h),!j(u))for(A=h.Da.g.parse(u),u=0;u<A.length;u++){let ae=A[u];if(h.T=ae[0],ae=ae[1],h.G==2)if(ae[0]=="c"){h.K=ae[1],h.ia=ae[2];let Ke=ae[3];Ke!=null&&(h.la=Ke,h.j.info("VER="+h.la));let Qe=ae[4];Qe!=null&&(h.Aa=Qe,h.j.info("SVER="+h.Aa));let Yi=ae[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(m=1.5*Yi,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Nt=a.g;if(Nt){let Ia=Nt.g?Nt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ia){var S=m.h;S.g||Ia.indexOf("spdy")==-1&&Ia.indexOf("quic")==-1&&Ia.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Nu(S,S.h),S.h=null))}if(m.D){let Lu=Nt.g?Nt.g.getResponseHeader("X-HTTP-Session-Id"):null;Lu&&(m.ya=Lu,be(m.I,m.D,Lu))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var M=a;if(m.qa=vb(m,m.J?m.ia:null,m.W),M.K){Kg(m.h,M);var he=M,$e=m.L;$e&&(he.I=$e),he.B&&(xu(he),ha(he)),m.g=M}else mb(m);0<h.i.length&&va(h)}else ae[0]!="stop"&&ae[0]!="close"||fi(h,7);else h.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?fi(h,7):Ou(h):ae[0]!="noop"&&h.l&&h.l.ta(ae),h.v=0)}}hs(4)}catch{}}var fT=class{constructor(a,u){this.g=a,this.map=u}};function Gg(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Wg(a){return a.h?1:a.g?a.g.size:0}function Pu(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function Nu(a,u){a.g?a.g.add(u):a.h=u}function Kg(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}Gg.prototype.cancel=function(){if(this.i=Qg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Qg(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let h of a.g.values())u=u.concat(h.D);return u}return k(a.i)}function mT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],h=a.length,m=0;m<h;m++)u.push(a[m]);return u}u=[],h=0;for(m in a)u[h++]=a[m];return u}function pT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var h=0;h<a;h++)u.push(h);return u}u=[],h=0;for(let m in a)u[h++]=m;return u}}}function Yg(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var h=pT(a),m=mT(a),A=m.length,S=0;S<A;S++)u.call(void 0,m[S],h&&h[S],a)}var Jg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gT(a,u){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),A=null;if(0<=m){var S=a[h].substring(0,m);A=a[h].substring(m+1)}else S=a[h];u(S,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function hi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof hi){this.h=a.h,fa(this,a.j),this.o=a.o,this.g=a.g,ma(this,a.s),this.l=a.l;var u=a.i,h=new _s;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),Xg(this,h),this.m=a.m}else a&&(u=String(a).match(Jg))?(this.h=!1,fa(this,u[1]||"",!0),this.o=gs(u[2]||""),this.g=gs(u[3]||"",!0),ma(this,u[4]),this.l=gs(u[5]||"",!0),Xg(this,u[6]||"",!0),this.m=gs(u[7]||"")):(this.h=!1,this.i=new _s(null,this.h))}hi.prototype.toString=function(){var a=[],u=this.j;u&&a.push(bs(u,Zg,!0),":");var h=this.g;return(h||u=="file")&&(a.push("//"),(u=this.o)&&a.push(bs(u,Zg,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(bs(h,h.charAt(0)=="/"?vT:_T,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",bs(h,wT)),a.join("")};function ln(a){return new hi(a)}function fa(a,u,h){a.j=h?gs(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function ma(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function Xg(a,u,h){u instanceof _s?(a.i=u,IT(a.i,a.h)):(h||(u=bs(u,yT)),a.i=new _s(u,a.h))}function be(a,u,h){a.i.set(u,h)}function pa(a){return be(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function gs(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function bs(a,u,h){return typeof a=="string"?(a=encodeURI(a).replace(u,bT),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function bT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Zg=/[#\/\?@]/g,_T=/[#\?:]/g,vT=/[#\?]/g,yT=/[#\?@]/g,wT=/#/g;function _s(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function Mn(a){a.g||(a.g=new Map,a.h=0,a.i&&gT(a.i,function(u,h){a.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}t=_s.prototype,t.add=function(a,u){Mn(this),this.i=null,a=Ki(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(u),this.h+=1,this};function eb(a,u){Mn(a),u=Ki(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function tb(a,u){return Mn(a),u=Ki(a,u),a.g.has(u)}t.forEach=function(a,u){Mn(this),this.g.forEach(function(h,m){h.forEach(function(A){a.call(u,A,m,this)},this)},this)},t.na=function(){Mn(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let m=0;m<u.length;m++){let A=a[m];for(let S=0;S<A.length;S++)h.push(u[m])}return h},t.V=function(a){Mn(this);let u=[];if(typeof a=="string")tb(this,a)&&(u=u.concat(this.g.get(Ki(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)u=u.concat(a[h])}return u},t.set=function(a,u){return Mn(this),this.i=null,a=Ki(this,a),tb(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},t.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function nb(a,u,h){eb(a,u),0<h.length&&(a.i=null,a.g.set(Ki(a,u),k(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var m=u[h];let S=encodeURIComponent(String(m)),M=this.V(m);for(m=0;m<M.length;m++){var A=S;M[m]!==""&&(A+="="+encodeURIComponent(String(M[m]))),a.push(A)}}return this.i=a.join("&")};function Ki(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function IT(a,u){u&&!a.j&&(Mn(a),a.i=null,a.g.forEach(function(h,m){var A=m.toLowerCase();m!=A&&(eb(this,m),nb(this,A,h))},a)),a.j=u}function ET(a,u){let h=new ms;if(c.Image){let m=new Image;m.onload=T(On,h,"TestLoadImage: loaded",!0,u,m),m.onerror=T(On,h,"TestLoadImage: error",!1,u,m),m.onabort=T(On,h,"TestLoadImage: abort",!1,u,m),m.ontimeout=T(On,h,"TestLoadImage: timeout",!1,u,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function TT(a,u){let h=new ms,m=new AbortController,A=setTimeout(()=>{m.abort(),On(h,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(S=>{clearTimeout(A),S.ok?On(h,"TestPingServer: ok",!0,u):On(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(A),On(h,"TestPingServer: error",!1,u)})}function On(a,u,h,m,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),m(h)}catch{}}function AT(){this.g=new aT}function CT(a,u,h){let m=h||"";try{Yg(a,function(A,S){let M=A;d(A)&&(M=Eu(A)),u.push(m+S+"="+encodeURIComponent(M))})}catch(A){throw u.push(m+"type="+encodeURIComponent("_badmap")),A}}function vs(a){this.l=a.Ub||null,this.j=a.eb||!1}x(vs,Tu),vs.prototype.g=function(){return new ga(this.l,this.j)},vs.prototype.i=function(a){return function(){return a}}({});function ga(a,u){We.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ga,We),t=ga.prototype,t.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,ws(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ib(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ib(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?ys(this):ws(this),this.readyState==3&&ib(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ys(this))},t.Qa=function(a){this.g&&(this.response=a,ys(this))},t.ga=function(){this.g&&ys(this)};function ys(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ws(a)}t.setRequestHeader=function(a,u){this.u.append(a,u)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=u.next();return a.join(`\r
`)};function ws(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ga.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function rb(a){let u="";return ie(a,function(h,m){u+=m,u+=":",u+=h,u+=`\r
`}),u}function Mu(a,u,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=rb(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):be(a,u,h))}function Re(a){We.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Re,We);var ST=/^https?$/i,RT=["POST","PUT"];t=Re.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,u,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Su.g(),this.v=this.o?Ng(this.o):Ng(Su),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(S){sb(this,S);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var A in m)h.set(A,m[A]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let S of m.keys())h.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),A=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(RT,u,void 0))||m||A||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,M]of h)this.g.setRequestHeader(S,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cb(this),this.u=!0,this.g.send(a),this.u=!1}catch(S){sb(this,S)}};function sb(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,ob(a),ba(a)}function ob(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ot(this,"complete"),ot(this,"abort"),ba(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ab(this):this.bb())},t.bb=function(){ab(this)};function ab(a){if(a.h&&typeof o<"u"&&(!a.v[1]||un(a)!=4||a.Z()!=2)){if(a.u&&un(a)==4)Dg(a.Ea,0,a);else if(ot(a,"readystatechange"),un(a)==4){a.h=!1;try{let M=a.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var m;if(m=M===0){var A=String(a.D).match(Jg)[1]||null;!A&&c.self&&c.self.location&&(A=c.self.location.protocol.slice(0,-1)),m=!ST.test(A?A.toLowerCase():"")}h=m}if(h)ot(a,"complete"),ot(a,"success");else{a.m=6;try{var S=2<un(a)?a.g.statusText:""}catch{S=""}a.l=S+" ["+a.Z()+"]",ob(a)}}finally{ba(a)}}}}function ba(a,u){if(a.g){cb(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||ot(a,"ready");try{h.onreadystatechange=m}catch{}}}function cb(a){a.I&&(c.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function un(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),oT(u)}};function lb(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function DT(a){let u={};a=(a.g&&2<=un(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(j(a[m]))continue;var h=E(a[m]);let A=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=u[A]||[];u[A]=S,S.push(h)}I(u,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(a,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||u}function ub(a){this.Aa=0,this.i=[],this.j=new ms,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Is("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Is("baseRetryDelayMs",5e3,a),this.cb=Is("retryDelaySeedMs",1e4,a),this.Wa=Is("forwardChannelMaxRetries",2,a),this.wa=Is("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Gg(a&&a.concurrentRequestLimit),this.Da=new AT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ub.prototype,t.la=8,t.G=1,t.connect=function(a,u,h,m){at(0),this.W=a,this.H=u||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=vb(this,null,this.W),va(this)};function Ou(a){if(db(a),a.G==3){var u=a.U++,h=ln(a.I);if(be(h,"SID",a.K),be(h,"RID",u),be(h,"TYPE","terminate"),Es(a,h),u=new Nn(a,a.j,u),u.L=2,u.v=pa(ln(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=yb(u.j,null),u.g.ea(u.v)),u.F=Date.now(),ha(u)}_b(a)}function _a(a){a.g&&(Vu(a),a.g.cancel(),a.g=null)}function db(a){_a(a),a.u&&(c.clearTimeout(a.u),a.u=null),ya(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function va(a){if(!Hg(a.h)&&!a.s){a.s=!0;var u=a.Ga;os||Eg(),as||(os(),as=!0),mu.add(u,a),a.B=0}}function xT(a,u){return Wg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=fs(b(a.Ga,a,u),bb(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let A=new Nn(this,this.j,a),S=this.o;if(this.S&&(S?(S=g(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(A.H=S,S=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=fb(this,A,u),h=ln(this.I),be(h,"RID",a),be(h,"CVER",22),this.D&&be(h,"X-HTTP-Session-Id",this.D),Es(this,h),S&&(this.O?u="headers="+encodeURIComponent(String(rb(S)))+"&"+u:this.m&&Mu(h,this.m,S)),Nu(this.h,A),this.Ua&&be(h,"TYPE","init"),this.P?(be(h,"$req",u),be(h,"SID","null"),A.T=!0,Du(A,h,null)):Du(A,h,u),this.G=2}}else this.G==3&&(a?hb(this,a):this.i.length==0||Hg(this.h)||hb(this))};function hb(a,u){var h;u?h=u.l:h=a.U++;let m=ln(a.I);be(m,"SID",a.K),be(m,"RID",h),be(m,"AID",a.T),Es(a,m),a.m&&a.o&&Mu(m,a.m,a.o),h=new Nn(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),u&&(a.i=u.D.concat(a.i)),u=fb(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Nu(a.h,h),Du(h,m,u)}function Es(a,u){a.H&&ie(a.H,function(h,m){be(u,m,h)}),a.l&&Yg({},function(h,m){be(u,m,h)})}function fb(a,u,h){h=Math.min(a.i.length,h);var m=a.l?b(a.l.Na,a.l,a):null;e:{var A=a.i;let S=-1;for(;;){let M=["count="+h];S==-1?0<h?(S=A[0].g,M.push("ofs="+S)):S=0:M.push("ofs="+S);let he=!0;for(let $e=0;$e<h;$e++){let ae=A[$e].g,Ke=A[$e].map;if(ae-=S,0>ae)S=Math.max(0,A[$e].g-100),he=!1;else try{CT(Ke,M,"req"+ae+"_")}catch{m&&m(Ke)}}if(he){m=M.join("&");break e}}}return a=a.i.splice(0,h),u.D=a,m}function mb(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;os||Eg(),as||(os(),as=!0),mu.add(u,a),a.v=0}}function Fu(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=fs(b(a.Fa,a),bb(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,pb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=fs(b(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),_a(this),pb(this))};function Vu(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function pb(a){a.g=new Nn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=ln(a.qa);be(u,"RID","rpc"),be(u,"SID",a.K),be(u,"AID",a.T),be(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&be(u,"TO",a.ja),be(u,"TYPE","xmlhttp"),Es(a,u),a.m&&a.o&&Mu(u,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=pa(ln(u)),h.m=null,h.P=!0,zg(h,a)}t.Za=function(){this.C!=null&&(this.C=null,_a(this),Fu(this),at(19))};function ya(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function gb(a,u){var h=null;if(a.g==u){ya(a),Vu(a),a.g=null;var m=2}else if(Pu(a.h,u))h=u.D,Kg(a.h,u),m=1;else return;if(a.G!=0){if(u.o)if(m==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var A=a.B;m=la(),ot(m,new Lg(m,h)),va(a)}else mb(a);else if(A=u.s,A==3||A==0&&0<u.X||!(m==1&&xT(a,u)||m==2&&Fu(a)))switch(h&&0<h.length&&(u=a.h,u.i=u.i.concat(h)),A){case 1:fi(a,5);break;case 4:fi(a,10);break;case 3:fi(a,6);break;default:fi(a,2)}}}function bb(a,u){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*u}function fi(a,u){if(a.j.info("Error code "+u),u==2){var h=b(a.fb,a),m=a.Xa;let A=!m;m=new hi(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||fa(m,"https"),pa(m),A?ET(m.toString(),h):TT(m.toString(),h)}else at(2);a.G=0,a.l&&a.l.sa(u),_b(a),db(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function _b(a){if(a.G=0,a.ka=[],a.l){let u=Qg(a.h);(u.length!=0||a.i.length!=0)&&(D(a.ka,u),D(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function vb(a,u,h){var m=h instanceof hi?ln(h):new hi(h);if(m.g!="")u&&(m.g=u+"."+m.g),ma(m,m.s);else{var A=c.location;m=A.protocol,u=u?u+"."+A.hostname:A.hostname,A=+A.port;var S=new hi(null);m&&fa(S,m),u&&(S.g=u),A&&ma(S,A),h&&(S.l=h),m=S}return h=a.D,u=a.ya,h&&u&&be(m,h,u),be(m,"VER",a.la),Es(a,m),m}function yb(a,u,h){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new Re(new vs({eb:h})):new Re(a.pa),u.Ha(a.J),u}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wb(){}t=wb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wa(){}wa.prototype.g=function(a,u){return new pt(a,u)};function pt(a,u){We.call(this),this.g=new ub(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!j(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!j(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Qi(this)}x(pt,We),pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pt.prototype.close=function(){Ou(this.g)},pt.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Eu(a),a=h);u.i.push(new fT(u.Ya++,a)),u.G==3&&va(u)},pt.prototype.N=function(){this.g.l=null,delete this.j,Ou(this.g),delete this.g,pt.aa.N.call(this)};function Ib(a){Au.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let h in u){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}x(Ib,Au);function Eb(){Cu.call(this),this.status=1}x(Eb,Cu);function Qi(a){this.g=a}x(Qi,wb),Qi.prototype.ua=function(){ot(this.g,"a")},Qi.prototype.ta=function(a){ot(this.g,new Ib(a))},Qi.prototype.sa=function(a){ot(this.g,new Eb)},Qi.prototype.ra=function(){ot(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,pt.prototype.send=pt.prototype.o,pt.prototype.open=pt.prototype.m,pt.prototype.close=pt.prototype.close,Nf=Tn.createWebChannelTransport=function(){return new wa},Pf=Tn.getStatEventTarget=function(){return la()},kf=Tn.Event=ui,Zc=Tn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ua.NO_ERROR=0,ua.TIMEOUT=8,ua.HTTP_ERROR=6,Ro=Tn.ErrorCode=ua,Ug.COMPLETE="complete",xf=Tn.EventType=Ug,Mg.EventType=ds,ds.OPEN="a",ds.CLOSE="b",ds.ERROR="c",ds.MESSAGE="d",We.prototype.listen=We.prototype.K,Cr=Tn.WebChannel=Mg,Df=Tn.FetchXmlHttpFactory=vs,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,Rf=Tn.XhrIo=Re}).apply(typeof Xc<"u"?Xc:typeof self<"u"?self:typeof window<"u"?window:{});var sw="@firebase/firestore";var ze=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ze.UNAUTHENTICATED=new ze(null),ze.GOOGLE_CREDENTIALS=new ze("google-credentials-uid"),ze.FIRST_PARTY=new ze("first-party-uid"),ze.MOCK_USER=new ze("mock-user");var Gr="10.12.1";var Oi=new kt("@firebase/firestore");function Do(){return Oi.logLevel}function U(t,...e){if(Oi.logLevel<=ne.DEBUG){let n=e.map(bp);Oi.debug(`Firestore (${Gr}): ${t}`,...n)}}function An(t,...e){if(Oi.logLevel<=ne.ERROR){let n=e.map(bp);Oi.error(`Firestore (${Gr}): ${t}`,...n)}}function Mr(t,...e){if(Oi.logLevel<=ne.WARN){let n=e.map(bp);Oi.warn(`Firestore (${Gr}): ${t}`,...n)}}function bp(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function H(t="Unexpected state"){let e=`FIRESTORE (${Gr}) INTERNAL ASSERTION FAILED: `+t;throw An(e),new Error(e)}function ge(t,e){t||H()}function Y(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends tt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Zt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var rl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Lf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ze.UNAUTHENTICATED))}shutdown(){}},Uf=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},jf=class{constructor(e){this.t=e,this.currentUser=ze.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve(),s=new Zt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zt,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>_(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ge(typeof i.accessToken=="string"),new rl(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string"),new ze(e)}},Bf=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=ze.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},zf=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Bf(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ze.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$f=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qf=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string"),this.R=n.token,new $f(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function mk(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var sl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=mk(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}};function ue(t,e){return t<e?-1:t>e?1:0}function Or(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}var qe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new qe(0,0))}static max(){return new t(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ol=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&H(),i===void 0?i=e.length-n:i>e.length-n&&H(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ie=class t extends ol{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new O(R.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},pk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Et=class t extends ol{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return pk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,s=()=>{if(i.length===0)throw new O(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new O(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new O(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new O(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var B=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ie.fromString(e))}static fromName(e){return new t(Ie.fromString(e).popFirst(5))}static empty(){return new t(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ie(e.slice()))}};var Gf=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};Gf.UNKNOWN_ID=-1;function gk(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=J.fromTimestamp(i===1e9?new qe(n+1,0):new qe(n,i));return new Fi(r,B.empty(),e)}function bk(t){return new Fi(t.readTime,t.key,-1)}var Fi=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(J.min(),B.empty(),-1)}static max(){return new t(J.max(),B.empty(),-1)}};function _k(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=B.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}var vk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ko(t){return _(this,null,function*(){if(t.code!==R.FAILED_PRECONDITION||t.message!==vk)throw t;U("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;n(e[d]).next(f=>{o[d]=f,++c,c===s&&i(o)},f=>r(f))}})}static doWhile(e,n){return new t((i,r)=>{let s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}};function yk(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qo(t){return t.name==="IndexedDbTransactionError"}var Fw=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Vl(t){return t==null}function Mo(t){return t===0&&1/t==-1/0}function wk(t){return typeof t=="number"&&Number.isInteger(t)&&!Mo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ik=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],XL=[...Ik,"documentOverlays"],Ek=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Tk=Ek,ZL=[...Tk,"indexConfiguration","indexState","indexEntries"];function ow(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Vw(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Pe=class t{constructor(e,n){this.comparator=e,this.root=n||en.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xr(this.root,e,this.comparator,!1)}getReverseIterator(){return new xr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xr(this.root,e,this.comparator,!0)}},xr=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},en=class t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,n,i,r,s){return this}insert(e,n,i){return new en(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var rt=class t{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new al(this.data.getIterator())}getIteratorFrom(e){return new al(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},al=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Xt=class t{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new t([])}unionWith(e){let n=new rt(Et.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Or(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var cl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ut=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new cl("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ut.EMPTY_BYTE_STRING=new ut("");var Ak=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(t){if(ge(!!t),typeof t=="string"){let e=0,n=Ak.exec(t);if(ge(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ni(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}function Ll(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _p(t){let e=t.mapValue.fields.__previous_value__;return Ll(e)?_p(e):e}function Oo(t){let e=Cn(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}var Wf=class{constructor(e,n,i,r,s,o,c,l,d){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d}},ll=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var el={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Vi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ll(t)?4:Lw(t)?9007199254740991:10:H()}function rn(t,e){if(t===e)return!0;let n=Vi(t);if(n!==Vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oo(t).isEqual(Oo(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Cn(r.timestampValue),c=Cn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return ni(r.bytesValue).isEqual(ni(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return ke(r.geoPointValue.latitude)===ke(s.geoPointValue.latitude)&&ke(r.geoPointValue.longitude)===ke(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ke(r.integerValue)===ke(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=ke(r.doubleValue),c=ke(s.doubleValue);return o===c?Mo(o)===Mo(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Or(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(ow(o)!==ow(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!rn(o[l],c[l])))return!1;return!0}(t,e);default:return H()}}function Fo(t,e){return(t.values||[]).find(n=>rn(n,e))!==void 0}function Fr(t,e){if(t===e)return 0;let n=Vi(t),i=Vi(e);if(n!==i)return ue(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(s,o){let c=ke(s.integerValue||s.doubleValue),l=ke(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(t,e);case 3:return aw(t.timestampValue,e.timestampValue);case 4:return aw(Oo(t),Oo(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(s,o){let c=ni(s),l=ni(o);return c.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let d=0;d<c.length&&d<l.length;d++){let f=ue(c[d],l[d]);if(f!==0)return f}return ue(c.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let c=ue(ke(s.latitude),ke(o.latitude));return c!==0?c:ue(ke(s.longitude),ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let c=s.values||[],l=o.values||[];for(let d=0;d<c.length&&d<l.length;++d){let f=Fr(c[d],l[d]);if(f)return f}return ue(c.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===el.mapValue&&o===el.mapValue)return 0;if(s===el.mapValue)return 1;if(o===el.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=o.fields||{},f=Object.keys(d);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){let b=ue(l[p],f[p]);if(b!==0)return b;let T=Fr(c[l[p]],d[f[p]]);if(T!==0)return T}return ue(l.length,f.length)}(t.mapValue,e.mapValue);default:throw H()}}function aw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);let n=Cn(t),i=Cn(e),r=ue(n.seconds,i.seconds);return r!==0?r:ue(n.nanos,i.nanos)}function Vr(t){return Kf(t)}function Kf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Cn(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ni(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return B.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let s of n.values||[])r?r=!1:i+=",",i+=Kf(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Kf(n.fields[o])}`;return r+"}"}(t.mapValue):H()}function ul(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Qf(t){return!!t&&"integerValue"in t}function vp(t){return!!t&&"arrayValue"in t}function cw(t){return!!t&&"nullValue"in t}function lw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nl(t){return!!t&&"mapValue"in t}function ko(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Hr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ko(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ko(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Lw(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ft=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!nl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ko(n)}setAll(e){let n=Et.emptyPath(),i={},r=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){let l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=c.popLast()}o?i[c.lastSegment()]=ko(o):r.push(c.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){let n=this.field(e.popLast());nl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];nl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Hr(n,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new t(ko(this.value))}};function Uw(t){let e=[];return Hr(t.fields,(n,i)=>{let r=new Et([n]);if(nl(i)){let s=Uw(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Xt(e)}var Vt=class t{constructor(e,n,i,r,s,o,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new t(e,0,J.min(),J.min(),J.min(),Ft.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,J.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,J.min(),J.min(),Ft.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,J.min(),J.min(),Ft.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ii=class{constructor(e,n){this.position=e,this.inclusive=n}};function uw(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let s=e[r],o=t.position[r];if(s.field.isKeyField()?i=B.comparator(B.fromName(o.referenceValue),n.key):i=Fr(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function dw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rn(t.position[n],e.position[n]))return!1;return!0}var Li=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Ck(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var dl=class{},Fe=class t extends dl{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Jf(e,n,i):n==="array-contains"?new em(e,i):n==="in"?new tm(e,i):n==="not-in"?new nm(e,i):n==="array-contains-any"?new im(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Xf(e,i):new Zf(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fr(n,this.value)):n!==null&&Vi(this.value)===Vi(n)&&this.matchesComparison(Fr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Lt=class t extends dl{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return jw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function jw(t){return t.op==="and"}function Bw(t){return Sk(t)&&jw(t)}function Sk(t){for(let e of t.filters)if(e instanceof Lt)return!1;return!0}function Yf(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Vr(t.value);if(Bw(t))return t.filters.map(e=>Yf(e)).join(",");{let e=t.filters.map(n=>Yf(n)).join(",");return`${t.op}(${e})`}}function zw(t,e){return t instanceof Fe?function(i,r){return r instanceof Fe&&i.op===r.op&&i.field.isEqual(r.field)&&rn(i.value,r.value)}(t,e):t instanceof Lt?function(i,r){return r instanceof Lt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&zw(o,r.filters[c]),!0):!1}(t,e):void H()}function $w(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Vr(n.value)}`}(t):t instanceof Lt?function(n){return n.op.toString()+" {"+n.getFilters().map($w).join(" ,")+"}"}(t):"Filter"}var Jf=class extends Fe{constructor(e,n,i){super(e,n,i),this.key=B.fromName(i.referenceValue)}matches(e){let n=B.comparator(e.key,this.key);return this.matchesComparison(n)}},Xf=class extends Fe{constructor(e,n){super(e,"in",n),this.keys=qw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Zf=class extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=qw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function qw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>B.fromName(i.referenceValue))}var em=class extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return vp(n)&&Fo(n.arrayValue,this.value)}},tm=class extends Fe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Fo(this.value.arrayValue,n)}},nm=class extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Fo(this.value.arrayValue,n)}},im=class extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!vp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Fo(this.value.arrayValue,i))}};var rm=class{constructor(e,n=null,i=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function hw(t,e=null,n=[],i=[],r=null,s=null,o=null){return new rm(t,e,n,i,r,s,o)}function yp(t){let e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Yf(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Vl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Vr(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Vr(i)).join(",")),e.ue=n}return e.ue}function wp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Ck(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dw(t.startAt,e.startAt)&&dw(t.endAt,e.endAt)}function sm(t){return B.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Sn=class{constructor(e,n=null,i=[],r=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Rk(t,e,n,i,r,s,o,c){return new Sn(t,e,n,i,r,s,o,c)}function Ip(t){return new Sn(t)}function fw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ep(t){return t.collectionGroup!==null}function kr(t){let e=Y(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new rt(Et.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Li(s,i))}),n.has(Et.keyField().canonicalString())||e.ce.push(new Li(Et.keyField(),i))}return e.ce}function tn(t){let e=Y(t);return e.le||(e.le=Dk(e,kr(t))),e.le}function Dk(t,e){if(t.limitType==="F")return hw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Li(r.field,s)});let n=t.endAt?new ii(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ii(t.startAt.position,t.startAt.inclusive):null;return hw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function om(t,e){let n=t.filters.concat([e]);return new Sn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hl(t,e,n){return new Sn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ul(t,e){return wp(tn(t),tn(e))&&t.limitType===e.limitType}function Gw(t){return`${yp(tn(t))}|lt:${t.limitType}`}function Sr(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>$w(r)).join(", ")}]`),Vl(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Vr(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Vr(r)).join(",")),`Target(${i})`}(tn(t))}; limitType=${t.limitType})`}function jl(t,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):B.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(let s of kr(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,c,l){let d=uw(o,c,l);return o.inclusive?d<=0:d<0}(i.startAt,kr(i),r)||i.endAt&&!function(o,c,l){let d=uw(o,c,l);return o.inclusive?d>=0:d>0}(i.endAt,kr(i),r))}(t,e)}function xk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hw(t){return(e,n)=>{let i=!1;for(let r of kr(t)){let s=kk(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function kk(t,e,n){let i=t.field.isKeyField()?B.comparator(e.key,n.key):function(s,o,c){let l=o.data.field(s),d=c.data.field(s);return l!==null&&d!==null?Fr(l,d):H()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return H()}}var ri=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Hr(this.inner,(n,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return Vw(this.inner)}size(){return this.innerSize}};var Pk=new Pe(B.comparator);function Rn(){return Pk}var Ww=new Pe(B.comparator);function xo(...t){let e=Ww;for(let n of t)e=e.insert(n.key,n);return e}function Kw(t){let e=Ww;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Pi(){return Po()}function Qw(){return Po()}function Po(){return new ri(t=>t.toString(),(t,e)=>t.isEqual(e))}var Nk=new Pe(B.comparator),Mk=new rt(B.comparator);function se(...t){let e=Mk;for(let n of t)e=e.add(n);return e}var Ok=new rt(ue);function Fk(){return Ok}function Yw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mo(e)?"-0":e}}function Jw(t){return{integerValue:""+t}}function Vk(t,e){return wk(e)?Jw(e):Yw(t,e)}var Lr=class{constructor(){this._=void 0}};function Lk(t,e,n){return t instanceof Ur?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Ll(s)&&(s=_p(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ui?Zw(t,e):t instanceof ji?e0(t,e):function(r,s){let o=Xw(r,s),c=mw(o)+mw(r.Pe);return Qf(o)&&Qf(r.Pe)?Jw(c):Yw(r.serializer,c)}(t,e)}function Uk(t,e,n){return t instanceof Ui?Zw(t,e):t instanceof ji?e0(t,e):n}function Xw(t,e){return t instanceof jr?function(i){return Qf(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Ur=class extends Lr{},Ui=class extends Lr{constructor(e){super(),this.elements=e}};function Zw(t,e){let n=t0(e);for(let i of t.elements)n.some(r=>rn(r,i))||n.push(i);return{arrayValue:{values:n}}}var ji=class extends Lr{constructor(e){super(),this.elements=e}};function e0(t,e){let n=t0(e);for(let i of t.elements)n=n.filter(r=>!rn(r,i));return{arrayValue:{values:n}}}var jr=class extends Lr{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function mw(t){return ke(t.integerValue||t.doubleValue)}function t0(t){return vp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function jk(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Ui&&r instanceof Ui||i instanceof ji&&r instanceof ji?Or(i.elements,r.elements,rn):i instanceof jr&&r instanceof jr?rn(i.Pe,r.Pe):i instanceof Ur&&r instanceof Ur}(t.transform,e.transform)}var am=class{constructor(e,n){this.version=e,this.transformResults=n}},Zn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function il(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Br=class{};function n0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vo(t.key,Zn.none()):new Bi(t.key,t.data,Zn.none());{let n=t.data,i=Ft.empty(),r=new rt(Et.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Dn(t.key,i,new Xt(r.toArray()),Zn.none())}}function Bk(t,e,n){t instanceof Bi?function(r,s,o){let c=r.value.clone(),l=gw(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Dn?function(r,s,o){if(!il(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=gw(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(i0(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function No(t,e,n,i){return t instanceof Bi?function(s,o,c,l){if(!il(s.precondition,o))return c;let d=s.value.clone(),f=bw(s.fieldTransforms,l,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,i):t instanceof Dn?function(s,o,c,l){if(!il(s.precondition,o))return c;let d=bw(s.fieldTransforms,l,o),f=o.data;return f.setAll(i0(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,i):function(s,o,c){return il(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function zk(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),s=Xw(i.transform,r||null);s!=null&&(n===null&&(n=Ft.empty()),n.set(i.field,s))}return n||null}function pw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Or(i,r,(s,o)=>jk(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Bi=class extends Br{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Dn=class extends Br{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function i0(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function gw(t,e,n){let i=new Map;ge(t.length===n.length);for(let r=0;r<n.length;r++){let s=t[r],o=s.transform,c=e.data.field(s.field);i.set(s.field,Uk(o,c,n[r]))}return i}function bw(t,e,n){let i=new Map;for(let r of t){let s=r.transform,o=n.data.field(r.field);i.set(r.field,Lk(s,o,e))}return i}var Vo=class extends Br{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},cm=class extends Br{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var lm=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&Bk(s,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=No(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=No(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=Qw();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=n.has(r.key)?null:c;let l=n0(o,c);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Or(this.mutations,e.mutations,(n,i)=>pw(n,i))&&Or(this.baseMutations,e.baseMutations,(n,i)=>pw(n,i))}},um=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ge(e.mutations.length===i.length);let r=function(){return Nk}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new t(e,n,i,r)}};var dm=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var hm=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Me,oe;function $k(t){switch(t){default:return H();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function r0(t){if(t===void 0)return An("GRPC error has no .code"),R.UNKNOWN;switch(t){case Me.OK:return R.OK;case Me.CANCELLED:return R.CANCELLED;case Me.UNKNOWN:return R.UNKNOWN;case Me.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case Me.INTERNAL:return R.INTERNAL;case Me.UNAVAILABLE:return R.UNAVAILABLE;case Me.UNAUTHENTICATED:return R.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case Me.NOT_FOUND:return R.NOT_FOUND;case Me.ALREADY_EXISTS:return R.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return R.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case Me.ABORTED:return R.ABORTED;case Me.OUT_OF_RANGE:return R.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return R.UNIMPLEMENTED;case Me.DATA_LOSS:return R.DATA_LOSS;default:return H()}}(oe=Me||(Me={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";var _w=null;function qk(){return new TextEncoder}var Gk=new Xn([4294967295,4294967295],0);function vw(t){let e=qk().encode(t),n=new Sf;return n.update(e),new Uint8Array(n.digest())}function yw(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xn([n,i],0),new Xn([r,s],0)]}var fm=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ni(`Invalid padding: ${n}`);if(i<0)throw new Ni(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ni(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ni(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xn.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Xn.fromNumber(i)));return r.compare(Gk)===1&&(r=new Xn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=vw(e),[i,r]=yw(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,r,n);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let n=vw(e),[i,r]=yw(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Ni=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var fl=class t{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Lo.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(J.min(),r,new Pe(ue),Rn(),se())}},Lo=class t{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,se(),se(),se())}};var Pr=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},ml=class{constructor(e,n){this.targetId=e,this.me=n}},pl=class{constructor(e,n,i=ut.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},gl=class{constructor(){this.fe=0,this.ge=Iw(),this.pe=ut.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=se(),n=se(),i=se();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:H()}}),new Lo(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=Iw()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},mm=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rn(),this.qe=ww(),this.Qe=new Pe(ue)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let s=r.target;if(sm(s))if(i===0){let o=new B(s.path);this.Ue(n,o,Vt.newNoDocument(o,J.min()))}else ge(i===1);else{let o=this.Ye(n);if(o!==i){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(n);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}_w?.et(function(f,p,b,T,x){var k,D,L,j,z,Q;let Se={localCacheCount:f,existenceFilterCount:p.count,databaseId:b.database,projectId:b.projectId},ie=p.unchangedNames;return ie&&(Se.bloomFilter={applied:x===0,hashCount:(k=ie?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(j=(L=(D=ie?.bits)===null||D===void 0?void 0:D.bitmap)===null||L===void 0?void 0:L.length)!==null&&j!==void 0?j:0,padding:(Q=(z=ie?.bits)===null||z===void 0?void 0:z.padding)!==null&&Q!==void 0?Q:0,mightContain:I=>{var g;return(g=T?.mightContain(I))!==null&&g!==void 0&&g}}),Se}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n,o,c;try{o=ni(i).toUint8Array()}catch(l){if(l instanceof cl)return Mr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new fm(o,r,s)}catch(l){return Mr(l instanceof Ni?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,s,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&sm(c.target)){let l=new B(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Vt.newNoDocument(l,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let i=se();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let d=this.Je(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new fl(e,n,this.Qe,this.ke,i);return this.ke=Rn(),this.qe=ww(),this.Qe=new Pe(ue),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new gl,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new rt(ue),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||U("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gl),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function ww(){return new Pe(B.comparator)}function Iw(){return new Pe(B.comparator)}var Hk={asc:"ASCENDING",desc:"DESCENDING"},Wk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kk={and:"AND",or:"OR"},pm=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function gm(t,e){return t.useProto3Json||Vl(e)?e:{value:e}}function bl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Qk(t,e){return bl(t,e.toTimestamp())}function nn(t){return ge(!!t),J.fromTimestamp(function(n){let i=Cn(n);return new qe(i.seconds,i.nanos)}(t))}function Tp(t,e){return bm(t,e).canonicalString()}function bm(t,e){let n=function(r){return new Ie(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function o0(t){let e=Ie.fromString(t);return ge(d0(e)),e}function _m(t,e){return Tp(t.databaseId,e.path)}function Mf(t,e){let n=o0(e);if(n.get(1)!==t.databaseId.projectId)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new B(c0(n))}function a0(t,e){return Tp(t.databaseId,e)}function Yk(t){let e=o0(t);return e.length===4?Ie.emptyPath():c0(e)}function vm(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function c0(t){return ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ew(t,e,n){return{name:_m(t,e),fields:n.value.mapValue.fields}}function Jk(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(ge(f===void 0||typeof f=="string"),ut.fromBase64String(f||"")):(ge(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ut.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?R.UNKNOWN:r0(d.code);return new O(f,d.message||"")}(o);n=new pl(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Mf(t,i.document.name),s=nn(i.document.updateTime),o=i.document.createTime?nn(i.document.createTime):J.min(),c=new Ft({mapValue:{fields:i.document.fields}}),l=Vt.newFoundDocument(r,s,o,c),d=i.targetIds||[],f=i.removedTargetIds||[];n=new Pr(d,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Mf(t,i.document),s=i.readTime?nn(i.readTime):J.min(),o=Vt.newNoDocument(r,s),c=i.removedTargetIds||[];n=new Pr([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Mf(t,i.document),s=i.removedTargetIds||[];n=new Pr([],s,r,null)}else{if(!("filter"in e))return H();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new hm(r,s),c=i.targetId;n=new ml(c,o)}}return n}function Xk(t,e){let n;if(e instanceof Bi)n={update:Ew(t,e.key,e.value)};else if(e instanceof Vo)n={delete:_m(t,e.key)};else if(e instanceof Dn)n={update:Ew(t,e.key,e.data),updateMask:aP(e.fieldMask)};else{if(!(e instanceof cm))return H();n={verify:_m(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof Ur)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ui)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ji)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof jr)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw H()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Qk(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:H()}(t,e.precondition)),n}function Zk(t,e){return t&&t.length>0?(ge(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?nn(r.updateTime):nn(s);return o.isEqual(J.min())&&(o=nn(s)),new am(o,r.transformResults||[])}(n,e))):[]}function eP(t,e){return{documents:[a0(t,e.path)]}}function tP(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=a0(t,r);let s=function(d){if(d.length!==0)return u0(Lt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(b){return{field:Rr(b.field),direction:rP(b.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let c=gm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:r}}function nP(t){let e=Yk(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){ge(i===1);let f=n.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(p){let b=l0(p);return b instanceof Lt&&Bw(b)?b.getFilters():[b]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(b=>function(x){return new Li(Dr(x.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(b))}(n.orderBy));let c=null;n.limit&&(c=function(p){let b;return b=typeof p=="object"?p.value:p,Vl(b)?null:b}(n.limit));let l=null;n.startAt&&(l=function(p){let b=!!p.before,T=p.values||[];return new ii(T,b)}(n.startAt));let d=null;return n.endAt&&(d=function(p){let b=!p.before,T=p.values||[];return new ii(T,b)}(n.endAt)),Rk(e,r,o,s,c,"F",l,d)}function iP(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function l0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Dr(n.unaryFilter.field);return Fe.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Dr(n.unaryFilter.field);return Fe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Dr(n.unaryFilter.field);return Fe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Dr(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Dr(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Lt.create(n.compositeFilter.filters.map(i=>l0(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return H()}}(n.compositeFilter.op))}(t):H()}function rP(t){return Hk[t]}function sP(t){return Wk[t]}function oP(t){return Kk[t]}function Rr(t){return{fieldPath:t.canonicalString()}}function Dr(t){return Et.fromServerFormat(t.fieldPath)}function u0(t){return t instanceof Fe?function(n){if(n.op==="=="){if(lw(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NAN"}};if(cw(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lw(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NAN"}};if(cw(n.value))return{unaryFilter:{field:Rr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rr(n.field),op:sP(n.op),value:n.value}}}(t):t instanceof Lt?function(n){let i=n.getFilters().map(r=>u0(r));return i.length===1?i[0]:{compositeFilter:{op:oP(n.op),filters:i}}}(t):H()}function aP(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function d0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Uo=class t{constructor(e,n,i,r,s=J.min(),o=J.min(),c=ut.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ym=class{constructor(e){this.ct=e}};function cP(t){let e=nP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hl(e,e.limit,"L"):e}var _l=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(ke(e.integerValue));else if("doubleValue"in e){let i=ke(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Mo(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=Cn(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(ni(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?Lw(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):H()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),B.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};_l.bt=new _l;var wm=class{constructor(){this._n=new Im}addToCollectionParentIndex(e,n){return this._n.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Fi.min())}updateCollectionGroup(e,n,i){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},Im=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new rt(Ie.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new rt(Ie.comparator)).toArray()}};var tU=new Uint8Array(0);var Jt=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);var jo=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Em=class{constructor(){this.changes=new ri(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?P.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Tm=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Am=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&No(i.mutation,r,Xt.empty(),qe.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,se()).next(()=>i))}getLocalViewOfDocuments(e,n,i=se()){let r=Pi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=xo();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let i=Pi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,se()))}populateOverlays(e,n,i){let r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,i,r){let s=Rn(),o=Po(),c=function(){return Po()}();return n.forEach((l,d)=>{let f=i.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof Dn)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),No(f.mutation,d,f.mutation.getFieldMask(),qe.now())):o.set(d.key,Xt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return c.set(d,new Tm(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){let i=Po(),r=new Pe((o,c)=>o-c),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let c of o)c.keys().forEach(l=>{let d=n.get(l);if(d===null)return;let f=i.get(l)||Xt.empty();f=c.applyToLocalView(d,f),i.set(l,f);let p=(r.get(c.batchId)||se()).add(l);r=r.insert(c.batchId,p)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,f=l.value,p=Qw();f.forEach(b=>{if(!s.has(b)){let T=n0(n.get(b),i.get(b));T!==null&&p.set(b,T),s=s.add(b)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return P.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return B.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ep(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):P.resolve(Pi()),c=-1,l=s;return o.next(d=>P.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(f)?P.resolve():this.remoteDocumentCache.getEntry(e,f).next(b=>{l=l.insert(f,b)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,se())).next(f=>({batchId:c,changes:Kw(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new B(n)).next(i=>{let r=xo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let s=n.collectionGroup,o=xo();return this.indexManager.getCollectionParents(e,s).next(c=>P.forEach(c,l=>{let d=function(p,b){return new Sn(b,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next(f=>{f.forEach((p,b)=>{o=o.insert(p,b)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,Vt.newInvalidDocument(f)))});let c=xo();return o.forEach((l,d)=>{let f=s.get(l);f!==void 0&&No(f.mutation,d,Xt.empty(),qe.now()),jl(n,d)&&(c=c.insert(l,d))}),c})}};var Cm=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return P.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:nn(r.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:cP(r.bundledQuery),readTime:nn(r.readTime)}}(n)),P.resolve()}};var Sm=class{constructor(){this.overlays=new Pe(B.comparator),this.hr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Pi();return P.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),P.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),P.resolve()}getOverlaysForCollection(e,n,i){let r=Pi(),s=n.length+1,o=new B(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return P.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Pe((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let f=s.get(d.largestBatchId);f===null&&(f=Pi(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=Pi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=r)););return P.resolve(c)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new dm(n,i));let s=this.hr.get(n);s===void 0&&(s=se(),this.hr.set(n,s)),this.hr.set(n,s.add(i.key))}};var Bo=class{constructor(){this.Pr=new rt(Oe.Ir),this.Tr=new rt(Oe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new Oe(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new Oe(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new B(new Ie([])),i=new Oe(n,e),r=new Oe(n,e+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new B(new Ie([])),i=new Oe(n,e),r=new Oe(n,e+1),s=se();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Oe(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},Oe=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return B.comparator(e.key,n.key)||ue(e.pr,n.pr)}static Er(e,n){return ue(e.pr,n.pr)||B.comparator(e.key,n.key)}};var Rm=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new rt(Oe.Ir)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new lm(s,n,i,r);this.mutationQueue.push(o);for(let c of r)this.wr=this.wr.add(new Oe(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),s=r<0?0:r;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new Oe(n,0),r=new Oe(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{let c=this.Sr(o.pr);s.push(c)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new rt(ue);return n.forEach(r=>{let s=new Oe(r,0),o=new Oe(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],c=>{i=i.add(c.pr)})}),P.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=i;B.isDocumentKey(s)||(s=s.child(""));let o=new Oe(new B(s),0),c=new rt(ue);return this.wr.forEachWhile(l=>{let d=l.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(c=c.add(l.pr)),!0)},o),P.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ge(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return P.forEach(n.mutations,r=>{let s=new Oe(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new Oe(n,0),r=this.wr.firstAfterOrEqual(i);return P.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Dm=class{constructor(e){this.vr=e,this.docs=function(){return new Pe(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return P.resolve(i?i.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let i=Rn();return n.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Vt.newInvalidDocument(r))}),P.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Rn(),o=n.path,c=new B(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:f}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||_k(bk(f),i)<=0||(r.has(f.key)||jl(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,n,i,r){H()}Fr(e,n){return P.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new xm(this)}getSize(e){return P.resolve(this.size)}},xm=class extends Em{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),P.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var km=class{constructor(e){this.persistence=e,this.Mr=new ri(n=>yp(n),wp),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Bo,this.targetCount=0,this.Lr=jo.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),P.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new jo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.qn(n),P.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,i){let r=0,s=[];return this.Mr.forEach((o,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),P.waitFor(s).next(()=>r)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return P.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),P.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return P.resolve(i)}containsKey(e,n){return P.resolve(this.Nr.containsKey(n))}};var Pm=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Fw(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new km(this),this.indexManager=new wm,this.remoteDocumentCache=function(r){return new Dm(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new ym(n),this.$r=new Cm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Sm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new Rm(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){U("MemoryPersistence","Starting transaction:",e);let r=new Nm(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(e,n){return P.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},Nm=class extends Hf{constructor(e){super(),this.currentSequenceNumber=e}},Mm=class t{constructor(e){this.persistence=e,this.zr=new Bo,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw H()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),P.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),P.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Jr,i=>{let r=B.fromPath(i);return this.Yr(e,r).next(s=>{s||n.removeEntry(r,J.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return P.or([()=>P.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Om=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=se(),r=se();for(let s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new t(e,n.fromCache,i,r)}};var Fm=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Vm=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return qv()?8:yk(Le())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Fm;return this.Ji(e,n,o).next(c=>{if(s.result=c,this.Ui)return this.Yi(e,n,o,c.size)})}).next(()=>s.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(Do()<=ne.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",Sr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),P.resolve()):(Do()<=ne.DEBUG&&U("QueryEngine","Query:",Sr(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Do()<=ne.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",Sr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(n))):P.resolve())}ji(e,n){if(fw(n))return P.resolve(null);let i=tn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=hl(n,null,"F"),i=tn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=se(...s);return this.zi.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let d=this.Zi(n,c);return this.Xi(n,d,o,l.readTime)?this.ji(e,hl(n,null,"F")):this.es(e,d,n,l)}))})))}Hi(e,n,i,r){return fw(n)||r.isEqual(J.min())?P.resolve(null):this.zi.getDocuments(e,i).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,i,r)?P.resolve(null):(Do()<=ne.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Sr(n)),this.es(e,o,n,gk(r,-1)).next(c=>c))})}Zi(e,n){let i=new rt(Hw(e));return n.forEach((r,s)=>{jl(e,s)&&(i=i.add(s))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(e,n,i){return Do()<=ne.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",Sr(n)),this.zi.getDocumentsMatchingQuery(e,n,Fi.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Lm=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new Pe(ue),this.rs=new ri(s=>yp(s),wp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Am(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function lP(t,e,n,i){return new Lm(t,e,n,i)}function h0(t,e){return _(this,null,function*(){let n=Y(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],l=se();for(let d of r){o.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(i,l).next(d=>({us:d,removedBatchIds:o,addedBatchIds:c}))})})})}function uP(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(c,l,d,f){let p=d.batch,b=p.keys(),T=P.resolve();return b.forEach(x=>{T=T.next(()=>f.getEntry(l,x)).next(k=>{let D=d.docVersions.get(x);ge(D!==null),k.version.compareTo(D)<0&&(p.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),f.addEntry(k)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=se();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function f0(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function dP(t,e){let n=Y(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let c=[];e.targetChanges.forEach((f,p)=>{let b=r.get(p);if(!b)return;c.push(n.Qr.removeMatchingKeys(s,f.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(s,f.addedDocuments,p)));let T=b.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?T=T.withResumeToken(ut.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,i)),r=r.insert(p,T),function(k,D,L){return k.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(b,T,f)&&c.push(n.Qr.updateTargetData(s,T))});let l=Rn(),d=se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(hP(s,o,e.documentUpdates).next(f=>{l=f.cs,d=f.ls})),!i.isEqual(J.min())){let f=n.Qr.getLastRemoteSnapshotVersion(s).next(p=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(f)}return P.waitFor(c).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(n.ns=r,s))}function hP(t,e,n){let i=se(),r=se();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=Rn();return n.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):U("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{cs:o,ls:r}})}function fP(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function mP(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(s=>s?(r=s,P.resolve(r)):n.Qr.allocateTargetId(i).next(o=>(r=new Uo(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function Um(t,e,n){return _(this,null,function*(){let i=Y(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Qo(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function Tw(t,e,n){let i=Y(t),r=J.min(),s=se();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,f){let p=Y(l),b=p.rs.get(f);return b!==void 0?P.resolve(p.ns.get(b)):p.Qr.getTargetData(d,f)}(i,o,tn(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>i.ts.getDocumentsMatchingQuery(o,e,n?r:J.min(),n?s:se())).next(c=>(pP(i,xk(e),c),{documents:c,hs:s})))}function pP(t,e,n){let i=t.ss.get(e)||J.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.ss.set(e,i)}var vl=class{constructor(){this.activeTargetIds=Fk()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var jm=class{constructor(){this.no=new vl,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new vl,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Bm=class{io(e){}shutdown(){}};var yl=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var tl=null;function Of(){return tl===null?tl=function(){return 268435456+Math.round(2147483648*Math.random())}():tl++,"0x"+tl.toString(16)}var gP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var zm=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var it="WebChannelConnection",$m=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(n,i,r,s,o){let c=Of(),l=this.vo(n,i.toUriEncodedString());U("RestConnection",`Sending RPC '${n}' ${c}:`,l,r);let d={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(d,s,o),this.Mo(n,l,d,r).then(f=>(U("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw Mr("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",l,"request:",r),f})}xo(n,i,r,s,o,c){return this.Co(n,i,r,s,o)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}vo(n,i){let r=gP[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let s=Of();return new Promise((o,c)=>{let l=new Rf;l.setWithCredentials(!0),l.listenOnce(xf.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ro.NO_ERROR:let f=l.getResponseJson();U(it,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Ro.TIMEOUT:U(it,`RPC '${e}' ${s} timed out`),c(new O(R.DEADLINE_EXCEEDED,"Request time out"));break;case Ro.HTTP_ERROR:let p=l.getStatus();if(U(it,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let b=l.getResponseJson();Array.isArray(b)&&(b=b[0]);let T=b?.error;if(T&&T.status&&T.message){let x=function(D){let L=D.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(L)>=0?L:R.UNKNOWN}(T.status);c(new O(x,T.message))}else c(new O(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new O(R.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{U(it,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(r);U(it,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",d,i,15)})}Oo(e,n,i){let r=Of(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Nf(),c=Pf(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.xmlHttpFactory=new Df({})),this.Fo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;let f=s.join("");U(it,`Creating RPC '${e}' stream ${r}: ${f}`,l);let p=o.createWebChannel(f,l),b=!1,T=!1,x=new zm({lo:D=>{T?U(it,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(b||(U(it,`Opening RPC '${e}' stream ${r} transport.`),p.open(),b=!0),U(it,`RPC '${e}' stream ${r} sending:`,D),p.send(D))},ho:()=>p.close()}),k=(D,L,j)=>{D.listen(L,z=>{try{j(z)}catch(Q){setTimeout(()=>{throw Q},0)}})};return k(p,Cr.EventType.OPEN,()=>{T||(U(it,`RPC '${e}' stream ${r} transport opened.`),x.mo())}),k(p,Cr.EventType.CLOSE,()=>{T||(T=!0,U(it,`RPC '${e}' stream ${r} transport closed`),x.po())}),k(p,Cr.EventType.ERROR,D=>{T||(T=!0,Mr(it,`RPC '${e}' stream ${r} transport errored:`,D),x.po(new O(R.UNAVAILABLE,"The operation could not be completed")))}),k(p,Cr.EventType.MESSAGE,D=>{var L;if(!T){let j=D.data[0];ge(!!j);let z=j,Q=z.error||((L=z[0])===null||L===void 0?void 0:L.error);if(Q){U(it,`RPC '${e}' stream ${r} received error:`,Q);let Se=Q.status,ie=function(v){let w=Me[v];if(w!==void 0)return r0(w)}(Se),I=Q.message;ie===void 0&&(ie=R.INTERNAL,I="Unknown error status: "+Se+" with message "+Q.message),T=!0,x.po(new O(ie,I)),p.close()}else U(it,`RPC '${e}' stream ${r} received:`,j),x.yo(j)}}),k(c,kf.STAT_EVENT,D=>{D.stat===Zc.PROXY?U(it,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===Zc.NOPROXY&&U(it,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.fo()},0),x}};function Ff(){return typeof document<"u"?document:null}function Bl(t){return new pm(t,!0)}var wl=class{constructor(e,n,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&U("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Il=class{constructor(e,n,i,r,s,o,c,l){this.oi=e,this.Go=i,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new wl(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return _(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return _(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return _(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(An(n.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new O(R.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>_(this,null,function*(){this.state=0,this.start()}))}c_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},qm=class extends Il{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=Jk(this.serializer,e),i=function(s){if(!("targetChange"in s))return J.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?nn(o.readTime):J.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=vm(this.serializer),n.addTarget=function(s,o){let c,l=o.target;if(c=sm(l)?{documents:eP(s,l)}:{query:tP(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=s0(s,o.resumeToken);let d=gm(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(J.min())>0){c.readTime=bl(s,o.snapshotVersion.toTimestamp());let d=gm(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let i=iP(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=vm(this.serializer),n.removeTarget=e,this.i_(n)}},Gm=class extends Il{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=Zk(e.writeResults,e.commitTime),i=nn(e.commitTime);return this.listener.A_(i,n)}return ge(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=vm(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Xk(this.serializer,i))};this.i_(n)}};var Hm=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,bm(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(R.UNKNOWN,s.toString())})}xo(e,n,i,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.xo(e,bm(n,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(R.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Wm=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(An(n),this.y_=!1):U("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Km=class{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{i.enqueueAndForget(()=>_(this,null,function*(){zi(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(l){return _(this,null,function*(){let d=Y(l);d.M_.add(4),yield Yo(d),d.N_.set("Unknown"),d.M_.delete(4),yield zl(d)})}(this))}))}),this.N_=new Wm(i,r)}};function zl(t){return _(this,null,function*(){if(zi(t))for(let e of t.x_)yield e(!0)})}function Yo(t){return _(this,null,function*(){for(let e of t.x_)yield e(!1)})}function m0(t,e){let n=Y(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Rp(n)?Sp(n):Wr(n).Xo()&&Cp(n,e))}function Ap(t,e){let n=Y(t),i=Wr(n);n.F_.delete(e),i.Xo()&&p0(n,e),n.F_.size===0&&(i.Xo()?i.n_():zi(n)&&n.N_.set("Unknown"))}function Cp(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wr(t).P_(e)}function p0(t,e){t.L_.xe(e),Wr(t).I_(e)}function Sp(t){t.L_=new mm({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Wr(t).start(),t.N_.w_()}function Rp(t){return zi(t)&&!Wr(t).Zo()&&t.F_.size>0}function zi(t){return Y(t).M_.size===0}function g0(t){t.L_=void 0}function bP(t){return _(this,null,function*(){t.N_.set("Online")})}function _P(t){return _(this,null,function*(){t.F_.forEach((e,n)=>{Cp(t,e)})})}function vP(t,e){return _(this,null,function*(){g0(t),Rp(t)?(t.N_.D_(e),Sp(t)):t.N_.set("Unknown")})}function yP(t,e,n){return _(this,null,function*(){if(t.N_.set("Online"),e instanceof pl&&e.state===2&&e.cause)try{yield function(r,s){return _(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.F_.delete(c),r.L_.removeTarget(c))})}(t,e)}catch(i){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield El(t,i)}else if(e instanceof Pr?t.L_.Ke(e):e instanceof ml?t.L_.He(e):t.L_.We(e),!n.isEqual(J.min()))try{let i=yield f0(t.localStore);n.compareTo(i)>=0&&(yield function(s,o){let c=s.L_.rt(o);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.F_.get(d);f&&s.F_.set(d,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,d)=>{let f=s.F_.get(l);if(!f)return;s.F_.set(l,f.withResumeToken(ut.EMPTY_BYTE_STRING,f.snapshotVersion)),p0(s,l);let p=new Uo(f.target,l,d,f.sequenceNumber);Cp(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(i){U("RemoteStore","Failed to raise snapshot:",i),yield El(t,i)}})}function El(t,e,n){return _(this,null,function*(){if(!Qo(e))throw e;t.M_.add(1),yield Yo(t),t.N_.set("Offline"),n||(n=()=>f0(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield zl(t)}))})}function b0(t,e){return e().catch(n=>El(t,n,e))}function $l(t){return _(this,null,function*(){let e=Y(t),n=si(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;wP(e);)try{let r=yield fP(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,IP(e,r)}catch(r){yield El(e,r)}_0(e)&&v0(e)})}function wP(t){return zi(t)&&t.v_.length<10}function IP(t,e){t.v_.push(e);let n=si(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function _0(t){return zi(t)&&!si(t).Zo()&&t.v_.length>0}function v0(t){si(t).start()}function EP(t){return _(this,null,function*(){si(t).V_()})}function TP(t){return _(this,null,function*(){let e=si(t);for(let n of t.v_)e.d_(n.mutations)})}function AP(t,e,n){return _(this,null,function*(){let i=t.v_.shift(),r=um.from(i,e,n);yield b0(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield $l(t)})}function CP(t,e){return _(this,null,function*(){e&&si(t).E_&&(yield function(i,r){return _(this,null,function*(){if(function(o){return $k(o)&&o!==R.ABORTED}(r.code)){let s=i.v_.shift();si(i).t_(),yield b0(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield $l(i)}})}(t,e)),_0(t)&&v0(t)})}function Aw(t,e){return _(this,null,function*(){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let i=zi(n);n.M_.add(3),yield Yo(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield zl(n)})}function SP(t,e){return _(this,null,function*(){let n=Y(t);e?(n.M_.delete(2),yield zl(n)):e||(n.M_.add(2),yield Yo(n),n.N_.set("Unknown"))})}function Wr(t){return t.B_||(t.B_=function(n,i,r){let s=Y(n);return s.f_(),new qm(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:bP.bind(null,t),To:_P.bind(null,t),Ao:vP.bind(null,t),h_:yP.bind(null,t)}),t.x_.push(e=>_(this,null,function*(){e?(t.B_.t_(),Rp(t)?Sp(t):t.N_.set("Unknown")):(yield t.B_.stop(),g0(t))}))),t.B_}function si(t){return t.k_||(t.k_=function(n,i,r){let s=Y(n);return s.f_(),new Gm(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:EP.bind(null,t),Ao:CP.bind(null,t),R_:TP.bind(null,t),A_:AP.bind(null,t)}),t.x_.push(e=>_(this,null,function*(){e?(t.k_.t_(),yield $l(t)):(yield t.k_.stop(),t.v_.length>0&&(U("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var Qm=class t{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){let o=Date.now()+i,c=new t(e,n,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Dp(t,e){if(An("AsyncQueue",`${e}: ${t}`),Qo(t))return new O(R.UNAVAILABLE,`${e}: ${t}`);throw t}var Tl=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||B.comparator(n.key,i.key):(n,i)=>B.comparator(n.key,i.key),this.keyedMap=xo(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Al=class{constructor(){this.q_=new Pe(B.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):H():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},zr=class t{constructor(e,n,i,r,s,o,c,l,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,s){let o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new t(e,n,Tl.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var Ym=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},Jm=class{constructor(){this.queries=new ri(e=>Gw(e),Ul),this.onlineState="Unknown",this.z_=new Set}};function y0(t,e){return _(this,null,function*(){let n=Y(t),i=3,r=e.query,s=n.queries.get(r);s?!s.W_()&&e.G_()&&(i=2):(s=new Ym,i=e.G_()?0:1);try{switch(i){case 0:s.K_=yield n.onListen(r,!0);break;case 1:s.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(o){let c=Dp(o,`Initialization of query '${Sr(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&xp(n)})}function w0(t,e){return _(this,null,function*(){let n=Y(t),i=e.query,r=3,s=n.queries.get(i);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=e.G_()?0:1:!s.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function RP(t,e){let n=Y(t),i=!1;for(let r of e){let s=r.query,o=n.queries.get(s);if(o){for(let c of o.U_)c.H_(r)&&(i=!0);o.K_=r}}i&&xp(n)}function DP(t,e,n){let i=Y(t),r=i.queries.get(e);if(r)for(let s of r.U_)s.onError(n);i.queries.delete(e)}function xp(t){t.z_.forEach(e=>{e.next()})}var Xm,Cw;(Cw=Xm||(Xm={})).J_="default",Cw.Cache="cache";var Cl=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new zr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=zr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Xm.Cache}};var Sl=class{constructor(e){this.key=e}},Rl=class{constructor(e){this.key=e}},Zm=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=se(),this.mutatedKeys=se(),this.Ia=Hw(e),this.Ta=new Tl(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new Al,r=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,p)=>{let b=r.get(f),T=jl(this.query,p)?p:null,x=!!b&&this.mutatedKeys.has(b.key),k=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations),D=!1;b&&T?b.data.isEqual(T.data)?x!==k&&(i.track({type:3,doc:T}),D=!0):this.Ra(b,T)||(i.track({type:2,doc:T}),D=!0,(l&&this.Ia(T,l)>0||d&&this.Ia(T,d)<0)&&(c=!0)):!b&&T?(i.track({type:0,doc:T}),D=!0):b&&!T&&(i.track({type:1,doc:b}),D=!0,(l||d)&&(c=!0)),D&&(T?(o=o.add(T),s=k?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Ta:o,Aa:i,Xi:c,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((f,p)=>function(T,x){let k=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return k(T)-k(x)}(f.type,p.type)||this.Ia(f.doc,p.doc)),this.Va(i),r=r!=null&&r;let c=n&&!r?this.ma():[],l=this.Pa.size===0&&this.current&&!r?1:0,d=l!==this.ha;return this.ha=l,o.length!==0||d?{snapshot:new zr(this.query,e.Ta,s,o,e.mutatedKeys,l===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Al,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=se(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new Rl(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new Sl(i))}),n}pa(e){this.la=e.hs,this.Pa=se();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return zr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},ep=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},tp=class{constructor(e){this.key=e,this.wa=!1}},np=class{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ri(c=>Gw(c),Ul),this.Da=new Map,this.Ca=new Set,this.va=new Pe(B.comparator),this.Fa=new Map,this.Ma=new Bo,this.xa={},this.Oa=new Map,this.Na=jo.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function xP(t,e,n=!0){return _(this,null,function*(){let i=S0(t),r,s=i.ba.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=yield I0(i,e,n,!0),r})}function kP(t,e){return _(this,null,function*(){let n=S0(t);yield I0(n,e,!0,!1)})}function I0(t,e,n,i){return _(this,null,function*(){let r=yield mP(t.localStore,tn(e)),s=r.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",c;return i&&(c=yield PP(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&m0(t.remoteStore,r),c})}function PP(t,e,n,i,r){return _(this,null,function*(){t.Ba=(p,b,T)=>function(k,D,L,j){return _(this,null,function*(){let z=D.view.da(L);z.Xi&&(z=yield Tw(k.localStore,D.query,!1).then(({documents:I})=>D.view.da(I,z)));let Q=j&&j.targetChanges.get(D.targetId),Se=j&&j.targetMismatches.get(D.targetId)!=null,ie=D.view.applyChanges(z,k.isPrimaryClient,Q,Se);return Rw(k,D.targetId,ie.fa),ie.snapshot})}(t,p,b,T);let s=yield Tw(t.localStore,e,!0),o=new Zm(e,s.hs),c=o.da(s.documents),l=Lo.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=o.applyChanges(c,t.isPrimaryClient,l);Rw(t,n,d.fa);let f=new ep(e,n,o);return t.ba.set(e,f),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),d.snapshot})}function NP(t,e,n){return _(this,null,function*(){let i=Y(t),r=i.ba.get(e),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!Ul(o,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Um(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ap(i.remoteStore,r.targetId),ip(i,r.targetId)}).catch(Ko))):(ip(i,r.targetId),yield Um(i.localStore,r.targetId,!0))})}function MP(t,e){return _(this,null,function*(){let n=Y(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ap(n.remoteStore,i.targetId))})}function OP(t,e,n){return _(this,null,function*(){let i=zP(t);try{let r=yield function(o,c){let l=Y(o),d=qe.now(),f=c.reduce((T,x)=>T.add(x.key),se()),p,b;return l.persistence.runTransaction("Locally write mutations","readwrite",T=>{let x=Rn(),k=se();return l.os.getEntries(T,f).next(D=>{x=D,x.forEach((L,j)=>{j.isValidDocument()||(k=k.add(L))})}).next(()=>l.localDocuments.getOverlayedDocuments(T,x)).next(D=>{p=D;let L=[];for(let j of c){let z=zk(j,p.get(j.key).overlayedDocument);z!=null&&L.push(new Dn(j.key,z,Uw(z.value.mapValue),Zn.exists(!0)))}return l.mutationQueue.addMutationBatch(T,d,L,c)}).next(D=>{b=D;let L=D.applyToLocalDocumentSet(p,k);return l.documentOverlayCache.saveOverlays(T,D.batchId,L)})}).then(()=>({batchId:b.batchId,changes:Kw(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let d=o.xa[o.currentUser.toKey()];d||(d=new Pe(ue)),d=d.insert(c,l),o.xa[o.currentUser.toKey()]=d}(i,r.batchId,n),yield Jo(i,r.changes),yield $l(i.remoteStore)}catch(r){let s=Dp(r,"Failed to persist write");n.reject(s)}})}function E0(t,e){return _(this,null,function*(){let n=Y(t);try{let i=yield dP(n.localStore,e);e.targetChanges.forEach((r,s)=>{let o=n.Fa.get(s);o&&(ge(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?ge(o.wa):r.removedDocuments.size>0&&(ge(o.wa),o.wa=!1))}),yield Jo(n,i,e)}catch(i){yield Ko(i)}})}function Sw(t,e,n){let i=Y(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((s,o)=>{let c=o.view.j_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=Y(o);l.onlineState=c;let d=!1;l.queries.forEach((f,p)=>{for(let b of p.U_)b.j_(c)&&(d=!0)}),d&&xp(l)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function FP(t,e,n){return _(this,null,function*(){let i=Y(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),s=r&&r.key;if(s){let o=new Pe(B.comparator);o=o.insert(s,Vt.newNoDocument(s,J.min()));let c=se().add(s),l=new fl(J.min(),new Map,new Pe(ue),o,c);yield E0(i,l),i.va=i.va.remove(s),i.Fa.delete(e),kp(i)}else yield Um(i.localStore,e,!1).then(()=>ip(i,e,n)).catch(Ko)})}function VP(t,e){return _(this,null,function*(){let n=Y(t),i=e.batch.batchId;try{let r=yield uP(n.localStore,e);A0(n,i,null),T0(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Jo(n,r)}catch(r){yield Ko(r)}})}function LP(t,e,n){return _(this,null,function*(){let i=Y(t);try{let r=yield function(o,c){let l=Y(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return l.mutationQueue.lookupMutationBatch(d,c).next(p=>(ge(p!==null),f=p.keys(),l.mutationQueue.removeMutationBatch(d,p))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>l.localDocuments.getDocuments(d,f))})}(i.localStore,e);A0(i,e,n),T0(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield Jo(i,r)}catch(r){yield Ko(r)}})}function T0(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function A0(t,e,n){let i=Y(t),r=i.xa[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function ip(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||C0(t,i)})}function C0(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Ap(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),kp(t))}function Rw(t,e,n){for(let i of n)i instanceof Sl?(t.Ma.addReference(i.key,e),UP(t,i)):i instanceof Rl?(U("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||C0(t,i.key)):H()}function UP(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(U("SyncEngine","New document in limbo: "+n),t.Ca.add(i),kp(t))}function kp(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new B(Ie.fromString(e)),i=t.Na.next();t.Fa.set(i,new tp(n)),t.va=t.va.insert(n,i),m0(t.remoteStore,new Uo(tn(Ip(n.path)),i,"TargetPurposeLimboResolution",Fw.oe))}}function Jo(t,e,n){return _(this,null,function*(){let i=Y(t),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach((c,l)=>{o.push(i.Ba(l,e,n).then(d=>{if((d||n)&&i.isPrimaryClient){let f=d&&!d.fromCache;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(d){r.push(d);let f=Om.Ki(l.targetId,d);s.push(f)}}))}),yield Promise.all(o),i.Sa.h_(r),yield function(l,d){return _(this,null,function*(){let f=Y(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(d,b=>P.forEach(b.qi,T=>f.persistence.referenceDelegate.addReference(p,b.targetId,T)).next(()=>P.forEach(b.Qi,T=>f.persistence.referenceDelegate.removeReference(p,b.targetId,T)))))}catch(p){if(!Qo(p))throw p;U("LocalStore","Failed to update sequence numbers: "+p)}for(let p of d){let b=p.targetId;if(!p.fromCache){let T=f.ns.get(b),x=T.snapshotVersion,k=T.withLastLimboFreeSnapshotVersion(x);f.ns=f.ns.insert(b,k)}}})}(i.localStore,s))})}function jP(t,e){return _(this,null,function*(){let n=Y(t);if(!n.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());let i=yield h0(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(c=>{c.forEach(l=>{l.reject(new O(R.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Jo(n,i.us)}})}function BP(t,e){let n=Y(t),i=n.Fa.get(e);if(i&&i.wa)return se().add(i.key);{let r=se(),s=n.Da.get(e);if(!s)return r;for(let o of s){let c=n.ba.get(o);r=r.unionWith(c.view.Ea)}return r}}function S0(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=E0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FP.bind(null,e),e.Sa.h_=RP.bind(null,e.eventManager),e.Sa.ka=DP.bind(null,e.eventManager),e}function zP(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LP.bind(null,e),e}var Dl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=Bl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return lP(this.persistence,new Vm,e.initialUser,this.serializer)}createPersistence(e){return new Pm(Mm.Hr,this.serializer)}createSharedClientState(e){return new jm}terminate(){return _(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var rp=class{initialize(e,n){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Sw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=jP.bind(null,this.syncEngine),yield SP(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Jm}()}createDatastore(e){let n=Bl(e.databaseInfo.databaseId),i=function(s){return new $m(s)}(e.databaseInfo);return function(s,o,c,l){return new Hm(s,o,c,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,c){return new Km(i,r,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Sw(this.syncEngine,n,0),function(){return yl.D()?new yl:new Bm}())}createSyncEngine(e,n){return function(r,s,o,c,l,d,f){let p=new np(r,s,o,c,l,d);return f&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return _(this,null,function*(){var e;yield function(i){return _(this,null,function*(){let r=Y(i);U("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield Yo(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var xl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):An("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var sp=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ze.UNAUTHENTICATED,this.clientId=sl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>_(this,null,function*(){U("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(U("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Zt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Dp(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Vf(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>_(this,null,function*(){i.isEqual(r)||(yield h0(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Dw(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield qP(t);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Aw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Aw(e.remoteStore,r)),t._onlineComponents=e})}function $P(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function qP(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Vf(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!$P(n))throw n;Mr("Error using user provided cache. Falling back to memory cache: "+n),yield Vf(t,new Dl)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield Vf(t,new Dl);return t._offlineComponents})}function R0(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield Dw(t,t._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield Dw(t,new rp))),t._onlineComponents})}function GP(t){return R0(t).then(e=>e.syncEngine)}function op(t){return _(this,null,function*(){let e=yield R0(t),n=e.eventManager;return n.onListen=xP.bind(null,e.syncEngine),n.onUnlisten=NP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MP.bind(null,e.syncEngine),n})}function HP(t,e,n={}){let i=new Zt;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,c,l,d){let f=new xl({next:b=>{o.enqueueAndForget(()=>w0(s,p)),b.fromCache&&l.source==="server"?d.reject(new O(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(b)},error:b=>d.reject(b)}),p=new Cl(c,f,{includeMetadataChanges:!0,ra:!0});return y0(s,p)}(yield op(t),t.asyncQueue,e,n,i)})),i.promise}function D0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var xw=new Map;function x0(t,e,n){if(!n)throw new O(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WP(t,e,n,i){if(e===!0&&i===!0)throw new O(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kw(t){if(!B.isDocumentKey(t))throw new O(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Pw(t){if(B.isDocumentKey(t))throw new O(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ql(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H()}function ei(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ql(t);throw new O(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function KP(t,e){if(e<=0)throw new O(R.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var kl=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new O(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=D0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new O(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$r=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new O(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new O(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kl(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Lf;switch(i.type){case"firstParty":return new zf(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new O(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=xw.get(n);i&&(U("ComponentProvider","Removing Datastore"),xw.delete(n),i.terminate())}(this),Promise.resolve()}};function k0(t,e,n,i={}){var r;let s=(t=ei(t,$r))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=ze.MOCK_USER;else{c=Ec(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new O(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ze(d)}t._authCredentials=new Uf(new rl(c,l))}}var sn=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Tt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ti=class t extends sn{constructor(e,n,i){super(e,n,Ip(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new B(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function P0(t,e,...n){if(t=pe(t),x0("collection","path",e),t instanceof $r){let i=Ie.fromString(e,...n);return Pw(i),new ti(t,null,i)}{if(!(t instanceof Tt||t instanceof ti))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ie.fromString(e,...n));return Pw(i),new ti(t.firestore,null,i)}}function Pp(t,e,...n){if(t=pe(t),arguments.length===1&&(e=sl.newId()),x0("doc","path",e),t instanceof $r){let i=Ie.fromString(e,...n);return kw(i),new Tt(t,null,new B(i))}{if(!(t instanceof Tt||t instanceof ti))throw new O(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ie.fromString(e,...n));return kw(i),new Tt(t.firestore,t instanceof ti?t.converter:null,new B(i))}}var ap=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new wl(this,"async_queue_retry"),this.hu=()=>{let n=Ff();n&&U("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Ff();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Ff();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Zt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return _(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Qo(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw An("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=Qm.createAndSchedule(this,e,n,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&H()}verifyOperationInProgress(){}du(){return _(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function Nw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}var oi=class extends $r{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new ap}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||M0(this),this._firestoreClient.terminate()}};function N0(t,e){let n=typeof t=="object"?t:vn(),i=typeof t=="string"?t:e||"(default)",r=_n(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=Eh("firestore");s&&k0(r,...s)}return r}function Np(t){return t._firestoreClient||M0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function M0(t){var e,n,i;let r=t._freezeSettings(),s=function(c,l,d,f){return new Wf(c,l,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,D0(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new sp(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var zo=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ut.fromBase64String(e))}catch(n){throw new O(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var $o=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Pl=class{constructor(e){this._methodName=e}};var qo=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}};var QP=/^__.*__$/,cp=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Dn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bi(e,this.data,n,this.fieldTransforms)}};function O0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var lp=class t{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Nl(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(O0(this.fu)&&QP.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},up=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Bl(e)}Fu(e,n,i,r=!1){return new lp({fu:e,methodName:n,vu:i,path:Et.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Mp(t){let e=t._freezeSettings(),n=Bl(t._databaseId);return new up(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YP(t,e,n,i,r,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,r);U0("Data must be an object, but it was:",o,i);let c=V0(i,o),l,d;if(s.merge)l=new Xt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let p of s.mergeFields){let b=JP(e,p,n);if(!o.contains(b))throw new O(R.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);ZP(f,b)||f.push(b)}l=new Xt(f),d=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,d=o.fieldTransforms;return new cp(new Ft(c),l,d)}function F0(t,e,n,i=!1){return Op(n,t.Fu(i?4:3,e))}function Op(t,e){if(L0(t=pe(t)))return U0("Unsupported field value:",e,t),V0(t,e);if(t instanceof Pl)return function(i,r){if(!O0(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let l=Op(c,r.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=pe(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Vk(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=qe.fromDate(i);return{timestampValue:bl(r.serializer,s)}}if(i instanceof qe){let s=new qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bl(r.serializer,s)}}if(i instanceof qo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof zo)return{bytesValue:s0(r.serializer,i._byteString)};if(i instanceof Tt){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Tp(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${ql(i)}`)}(t,e)}function V0(t,e){let n={};return Vw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(t,(i,r)=>{let s=Op(r,e.pu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function L0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof qo||t instanceof zo||t instanceof Tt||t instanceof Pl)}function U0(t,e,n){if(!L0(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=ql(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function JP(t,e,n){if((e=pe(e))instanceof $o)return e._internalPath;if(typeof e=="string")return j0(t,e);throw Nl("Field path arguments must be of type string or ",t,!1,void 0,n)}var XP=new RegExp("[~\\*/\\[\\]]");function j0(t,e,n){if(e.search(XP)>=0)throw Nl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $o(...e.split("."))._internalPath}catch{throw Nl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nl(t,e,n,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new O(R.INVALID_ARGUMENT,c+t+l)}function ZP(t,e){return t.some(n=>n.isEqual(e))}var Go=class{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new dp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Gl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},dp=class extends Go{data(){return super.data()}};function Gl(t,e){return typeof e=="string"?j0(t,e):e instanceof $o?e._internalPath:e._delegate._internalPath}function B0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new O(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ho=class{},qr=class extends Ho{};function z0(t,e,...n){let i=[];e instanceof Ho&&i.push(e),i=i.concat(n),function(s){let o=s.filter(l=>l instanceof hp).length,c=s.filter(l=>l instanceof Ml).length;if(o>1||o>0&&c>0)throw new O(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var Ml=class t extends qr{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return W0(e._query,n),new sn(e.firestore,e.converter,om(e._query,n))}_parse(e){let n=Mp(e.firestore);return function(s,o,c,l,d,f,p){let b;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new O(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Ow(p,f);let T=[];for(let x of p)T.push(Mw(l,s,x));b={arrayValue:{values:T}}}else b=Mw(l,s,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Ow(p,f),b=F0(c,o,p,f==="in"||f==="not-in");return Fe.create(d,f,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function $0(t,e,n){let i=e,r=Gl("where",t);return Ml._create(r,i,n)}var hp=class t extends Ho{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Lt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r,c=s.getFlattenedFilters();for(let l of c)W0(o,l),o=om(o,l)}(e._query,n),new sn(e.firestore,e.converter,om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var fp=class t extends qr{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,s,o){if(r.startAt!==null)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new O(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Li(s,o)}(e._query,this._field,this._direction);return new sn(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new Sn(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function q0(t,e="asc"){let n=e,i=Gl("orderBy",t);return fp._create(i,n)}var mp=class t extends qr{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new sn(e.firestore,e.converter,hl(e._query,this._limit,this._limitType))}};function G0(t){return KP("limit",t),mp._create("limit",t,"F")}var pp=class t extends qr{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=eN(e,this.type,this._docOrFields,this._inclusive);return new sn(e.firestore,e.converter,function(r,s){return new Sn(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}};function H0(...t){return pp._create("startAfter",t,!1)}function eN(t,e,n,i){if(n[0]=pe(n[0]),n[0]instanceof Go)return function(s,o,c,l,d){if(!l)throw new O(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);let f=[];for(let p of kr(s))if(p.field.isKeyField())f.push(ul(o,l.key));else{let b=l.data.field(p.field);if(Ll(b))throw new O(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){let T=p.field.canonicalString();throw new O(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}f.push(b)}return new ii(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=Mp(t.firestore);return function(o,c,l,d,f,p){let b=o.explicitOrderBy;if(f.length>b.length)throw new O(R.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let T=[];for(let x=0;x<f.length;x++){let k=f[x];if(b[x].field.isKeyField()){if(typeof k!="string")throw new O(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof k}`);if(!Ep(o)&&k.indexOf("/")!==-1)throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${k}' contains a slash.`);let D=o.path.child(Ie.fromString(k));if(!B.isDocumentKey(D))throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);let L=new B(D);T.push(ul(c,L))}else{let D=F0(l,d,k);T.push(D)}}return new ii(T,p)}(t._query,t.firestore._databaseId,r,e,n,i)}}function Mw(t,e,n){if(typeof(n=pe(n))=="string"){if(n==="")throw new O(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ep(e)&&n.indexOf("/")!==-1)throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Ie.fromString(n));if(!B.isDocumentKey(i))throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ul(t,new B(i))}if(n instanceof Tt)return ul(t,n._key);throw new O(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ql(n)}.`)}function Ow(t,e){if(!Array.isArray(t)||t.length===0)throw new O(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function W0(t,e){let n=function(r,s){for(let o of r)for(let c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var gp=class{convertValue(e,n="none"){switch(Vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw H()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Hr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new qo(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=_p(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Oo(e));default:return null}}convertTimestamp(e){let n=Cn(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Ie.fromString(e);ge(d0(i));let r=new ll(i.get(1),i.get(3)),s=new B(i.popFirst(5));return r.isEqual(n)||An(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function tN(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var Mi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ol=class extends Go{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Nr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(Gl("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Nr=class extends Ol{data(e={}){return super.data(e)}},Fl=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Mi(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Nr(this._firestore,this._userDataWriter,i.key,i,new Mi(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new Nr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Mi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new Nr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Mi(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:nN(c.type),doc:l,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function nN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}var Wo=class extends gp{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}};function K0(t){t=ei(t,sn);let e=ei(t.firestore,oi),n=Np(e),i=new Wo(e);return B0(t._query),HP(n,t._query).then(r=>new Fl(e,i,t,r))}function Q0(t){return J0(ei(t.firestore,oi),[new Vo(t._key,Zn.none())])}function Y0(t,e){let n=ei(t.firestore,oi),i=Pp(t),r=tN(t.converter,e);return J0(n,[YP(Mp(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Zn.exists(!1))]).then(()=>i)}function Fp(t,...e){var n,i,r;t=pe(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Nw(e[o])||(s=e[o],o++);let c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Nw(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(i=p.error)===null||i===void 0?void 0:i.bind(p),e[o+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let l,d,f;if(t instanceof Tt)d=ei(t.firestore,oi),f=Ip(t._key.path),l={next:p=>{e[o]&&e[o](iN(d,t,p))},error:e[o+1],complete:e[o+2]};else{let p=ei(t,sn);d=ei(p.firestore,oi),f=p._query;let b=new Wo(d);l={next:T=>{e[o]&&e[o](new Fl(d,b,p,T))},error:e[o+1],complete:e[o+2]},B0(t._query)}return function(b,T,x,k){let D=new xl(k),L=new Cl(T,D,x);return b.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return y0(yield op(b),L)})),()=>{D.$a(),b.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return w0(yield op(b),L)}))}}(Np(d),f,c,l)}function J0(t,e){return function(i,r){let s=new Zt;return i.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return OP(yield GP(i),r,s)})),s.promise}(Np(t),e)}function iN(t,e,n){let i=n.docs.get(e._key),r=new Wo(t);return new Ol(t,r,e._key,i,new Mi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Gr=r})(It),nt(new Ne("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new oi(new jf(i.getProvider("auth-internal")),new qf(i.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new O(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ll(d.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),le(sw,"4.6.3",e),le(sw,"4.6.3","esm2017")})();var Hl=function(){return Hl=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hl.apply(this,arguments)};var oN={includeMetadataChanges:!1};function Vp(t,e){return e===void 0&&(e=oN),new Bt(function(n){var i=Fp(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function X0(t){return Vp(t,{includeMetadataChanges:!0})}function Z0(t,e){return e===void 0&&(e={}),X0(t).pipe(ee(function(n){return Lp(n,e)}))}function Lp(t,e){var n;e===void 0&&(e={});var i=t.data(e);return!t.exists()||typeof i!="object"||i===null||!e.idField?i:Hl(Hl({},i),(n={},n[e.idField]=t.id,n))}function eI(t){return Vp(t,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function tI(t,e){return e===void 0&&(e={}),eI(t).pipe(ee(function(n){return n.map(function(i){return Lp(i,e)})}))}var xn=class{constructor(e){return e}},nI="firestore",Up=class{constructor(){return _o(nI)}};var jp=new W("angularfire2.firestore-instances");function aN(t,e){let n=Pc(nI,t,e);return n&&new xn(n)}function cN(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new xn(i)}}var lN={provide:Up,deps:[[new Ye,jp]]},uN={provide:xn,useFactory:aN,deps:[[new Ye,jp],wn]};function iI(t,...e){return le("angularfire",Wn.full,"fst"),bt([uN,lN,{provide:jp,useFactory:cN(t),multi:!0,deps:[re,zt,Kn,Si,[new Ye,So],[new Ye,yn],...e]}])}var Bp=Be(tI,!0);var rI=Be(Z0,!0);var sI=Be(Y0,!0);var $i=Be(P0,!0);var oI=Be(Q0,!0);var zp=Be(Pp,!0);var Wl=Be(K0,!0);var aI=Be(N0,!0);var Kl=Be(G0,!0);var Ql=Be(q0,!0);var qi=Be(z0,!0);var $p=Be(H0,!0);var Yl=Be($0,!0);var Kr=(()=>{let e=class e{constructor(i){this.firestore=i}getNews(i,r=null,s=10){console.log("getNews called");let o=$i(this.firestore,`institutes/${i}/newsEvents`),c;return r?c=qi(o,Ql("date","desc"),$p(r),Kl(s)):c=qi(o,Ql("date","desc"),Kl(s)),Bp(c,{idField:"id"})}getMoreNews(i,r,s=10){return _(this,null,function*(){let o=$i(this.firestore,`institutes/${i}/newsEvents`),c=qi(o,Ql("date","desc"),$p(r),Kl(s));return console.log("Fetching more news events..."),(yield Wl(c)).docs.map(d=>N({id:d.id},d.data()))})}addNews(i,r){let s=$i(this.firestore,`institutes/${i}/newsEvents`);return sI(s,r)}deleteNews(i,r){let s=zp(this.firestore,`institutes/${i}/newsEvents/${r}`);return oI(s)}getNewsEventById(i,r){let s=zp(this.firestore,`institutes/${i}/newsEvents/${r}`);return console.log(s.id),rI(s,{idField:"id"})}getNewsByTitle(i,r){let s=$i(this.firestore,`institutes/${i}/newsEvents`),o=qi(s,Yl("title","==",r));return Bp(o,{idField:"id"})}};e.\u0275fac=function(r){return new(r||e)(F(xn))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ai=(()=>{let e=class e{constructor(i,r){this.firestore=i,this.platformId=r,this.isLocalStorageAvailable=this.checkLocalStorageAvailability()}checkLocalStorageAvailability(){if(za(this.platformId))try{let i="test";return localStorage.setItem(i,"testValue"),localStorage.removeItem(i),!0}catch{return!1}return!1}getCustomization(i){return _(this,null,function*(){console.log("getCustomization called");let r=this.getCachedCustomization(i);if(r)return r;let s=$i(this.firestore,"registrations"),o=qi(s,Yl("subdomain","==",i)),c=yield Wl(o);if(c.empty)throw new Error("Subdomain not registered");console.error(`registration found for subdomain: ${i}`);let l=c.docs.map(d=>d.data())[0];return this.cacheCustomization(i,l),l})}getCachedCustomization(i){if(this.isLocalStorageAvailable){let r=localStorage.getItem(`customization_${i}`);return r?JSON.parse(r):null}return null}cacheCustomization(i,r){this.isLocalStorageAvailable&&localStorage.setItem(`customization_${i}`,JSON.stringify(r))}getSubdomainFromUrl(){return window.location.host.split(".")[0]}};e.\u0275fac=function(r){return new(r||e)(F(xn),F(Ze))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var lI=(()=>{let e=class e{constructor(i,r,s,o){this.route=i,this.router=r,this.newsService=s,this.customizatonservice=o,this.title=""}ngOnInit(){let i=this.route.snapshot.paramMap.get("title");i?(this.title=i,this.newsService.getNewsEventById(this.customizatonservice.getSubdomainFromUrl(),this.decodeTitle(i)).subscribe(r=>{this.newsItem=r})):this.router.navigate(["/news"])}decodeTitle(i){return console.log(i.split("-").pop()),i.split("-").pop()}};e.\u0275fac=function(r){return new(r||e)(G(bn),G(et),G(Kr),G(ai))},e.\u0275cmp=fe({type:e,selectors:[["app-view-news"]],standalone:!0,features:[me],decls:9,vars:6,consts:[[1,"news-article-container"],[1,"news-article-header"],[1,"news-article-date"],[1,"news-article-content",3,"innerHTML"]],template:function(r,s){r&1&&(Z(0,"div",0)(1,"div",1)(2,"h1"),ce(3),te(),Z(4,"p",2),ce(5),Va(6,"date"),te()(),Ue(7,"mat-divider")(8,"div",3),te()),r&2&&(Ve(3),qt(s.newsItem==null?null:s.newsItem.title),Ve(2),qt(Gb(6,3,s.newsItem==null||s.newsItem.date==null?null:s.newsItem.date.toDate(),"fullDate")),Ve(3),Mt("innerHTML",s.newsItem==null?null:s.newsItem.content,tr))},dependencies:[gn,Ba,_r,br],styles:[".news-article-container[_ngcontent-%COMP%]{max-width:800px;min-height:60vh;margin:120px auto;padding:20px;font-family:Georgia,Times New Roman,Times,serif}.news-article-container[_ngcontent-%COMP%]   .news-article-header[_ngcontent-%COMP%]{margin-bottom:40px}.news-article-container[_ngcontent-%COMP%]   .news-article-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5em;line-height:1.2;margin-bottom:10px}.news-article-container[_ngcontent-%COMP%]   .news-article-header[_ngcontent-%COMP%]   .news-article-date[_ngcontent-%COMP%]{color:#888;font-size:.9em}.news-article-container[_ngcontent-%COMP%]   .news-article-content[_ngcontent-%COMP%]{font-size:1.2em;line-height:1.6;color:#333}.news-article-container[_ngcontent-%COMP%]   .news-article-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5em}.news-article-container[_ngcontent-%COMP%]   .news-article-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;margin:20px 0}.news-article-container[_ngcontent-%COMP%]   .news-article-content[_ngcontent-%COMP%]   blockquote[_ngcontent-%COMP%]{margin:20px 0;padding:10px 20px;background:#f9f9f9;border-left:5px solid #ccc;font-style:italic}.news-article-container[_ngcontent-%COMP%]   .news-article-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#f5f5f5;padding:15px;border-radius:5px;overflow-x:auto;margin-bottom:20px}.news-article-container[_ngcontent-%COMP%]   .news-article-content[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#f4f4f4;padding:2px 4px;border-radius:4px}.news-article-container[_ngcontent-%COMP%]   .news-article-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .news-article-container[_ngcontent-%COMP%]   .news-article-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .news-article-container[_ngcontent-%COMP%]   .news-article-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .news-article-container[_ngcontent-%COMP%]   .news-article-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .news-article-container[_ngcontent-%COMP%]   .news-article-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-top:1.5em;margin-bottom:.5em}.mat-divider[_ngcontent-%COMP%]{margin:12px 0}"]});let t=e;return t})();function pI(t){return t!=null}function gI(t){return Ua(t)?De(t):t}function bI(t){let e={};return t.forEach(n=>{e=n!=null?N(N({},e),n):e}),Object.keys(e).length===0?null:e}function _I(t,e){return e.map(n=>n(t))}function dN(t){return!t.validate}function vI(t){return t.map(e=>dN(e)?e:n=>e.validate(n))}function hN(t){if(!t)return null;let e=t.filter(pI);return e.length==0?null:function(n){return bI(_I(n,e))}}function fN(t){return t!=null?hN(vI(t)):null}function mN(t){if(!t)return null;let e=t.filter(pI);return e.length==0?null:function(n){let i=_I(n,e).map(gI);return Db(i).pipe(ee(bI))}}function pN(t){return t!=null?mN(vI(t)):null}function Wp(t){return t?Array.isArray(t)?t:[t]:[]}function Zl(t,e){return Array.isArray(t)?t.includes(e):t===e}function uI(t,e){let n=Wp(e);return Wp(t).forEach(r=>{Zl(n,r)||n.push(r)}),n}function dI(t,e){return Wp(e).filter(n=>!Zl(t,n))}var gN={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},X2=_e(N({},gN),{"[class.ng-submitted]":"isSubmitted"});var Xo="VALID",Xl="INVALID",Qr="PENDING",Zo="DISABLED";function Yp(t){return(tu(t)?t.validators:t)||null}function bN(t){return Array.isArray(t)?fN(t):t||null}function Jp(t,e){return(tu(e)?e.asyncValidators:t)||null}function _N(t){return Array.isArray(t)?pN(t):t||null}function tu(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function yI(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new ve(1e3,"");if(!i[n])throw new ve(1001,"")}function wI(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new ve(1002,"")})}var Yr=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Xo}get invalid(){return this.status===Xl}get pending(){return this.status==Qr}get disabled(){return this.status===Zo}get enabled(){return this.status!==Zo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(uI(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uI(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dI(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dI(e,this._rawAsyncValidators))}hasValidator(e){return Zl(this._rawValidators,e)}hasAsyncValidator(e){return Zl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qr,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Zo,this.errors=null,this._forEachChild(i=>{i.disable(_e(N({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(_e(N({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Xo,this._forEachChild(i=>{i.enable(_e(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(_e(N({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xo||this.status===Qr)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zo:Xo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qr,this._hasOwnPendingAsyncValidator=!0;let n=gI(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new $t,this.statusChanges=new $t}_calculateStatus(){return this._allControlsDisabled()?Zo:this.errors?Xl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qr)?Qr:this._anyControlsHaveStatus(Xl)?Xl:Xo}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){tu(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=bN(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_N(this._rawAsyncValidators)}},eu=class extends Yr{constructor(e,n,i){super(Yp(n),Jp(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){wI(this,!0,e),Object.keys(e).forEach(i=>{yI(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Kp=class extends eu{};var vN=new W("CallSetDisabledState",{providedIn:"root",factory:()=>II}),II="always";function hI(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function fI(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Hp=class extends Yr{constructor(e=null,n,i){super(Yp(n),Jp(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(fI(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){fI(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yN=new W("");var wN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ae({type:e}),e.\u0275inj=Te({});let t=e;return t})(),Qp=class extends Yr{constructor(e,n,i){super(Yp(n),Jp(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){wI(this,!1,e),e.forEach((i,r)=>{yI(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function mI(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var EI=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,r=null){let s=this._reduceControls(i),o={};return mI(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new eu(s,o)}record(i,r=null){let s=this._reduceControls(i);return new Kp(s,r)}control(i,r,s){let o={};return this.useNonNullable?(mI(r)?o=r:(o.validators=r,o.asyncValidators=s),new Hp(i,_e(N({},o),{nonNullable:!0}))):new Hp(i,r,s)}array(i,r,s){let o=i.map(c=>this._createControl(c));return new Qp(o,r,s)}_reduceControls(i){let r={};return Object.keys(i).forEach(s=>{r[s]=this._createControl(i[s])}),r}_createControl(i){if(i instanceof Hp)return i;if(i instanceof Yr)return i;if(Array.isArray(i)){let r=i[0],s=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(r,s,o)}else return this.control(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var TI=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:yN,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:vN,useValue:i.callSetDisabledState??II}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ae({type:e}),e.\u0275inj=Te({imports:[wN]});let t=e;return t})();var EN=new Map,TN={activated:!1,tokenObservers:[]},AN={initialized:!1,enabled:!1};function Ut(t){return EN.get(t)||Object.assign({},TN)}function DI(){return AN}var CN="https://content-firebaseappcheck.googleapis.com/v1";var SN="exchangeDebugToken",AI={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},cj=24*60*60*1e3;var Zp=class{constructor(e,n,i,r,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Ii,this.pending.promise.catch(n=>{}),yield RN(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ii,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function RN(t){return new Promise(e=>{setTimeout(e,t)})}var DN={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ci=new mt("appCheck","AppCheck",DN);function xI(t){if(!Ut(t).activated)throw ci.create("use-before-activation",{appName:t.name})}function kI(i,r){return _(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let T=yield o.getHeartbeatsHeader();T&&(s["X-Firebase-Client"]=T)}let c={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(t,c)}catch(T){throw ci.create("fetch-network-error",{originalErrorMessage:T?.message})}if(l.status!==200)throw ci.create("fetch-status-error",{httpStatus:l.status});let d;try{d=yield l.json()}catch(T){throw ci.create("fetch-parse-error",{originalErrorMessage:T?.message})}let f=d.ttl.match(/^([\d.]+)(s)$/);if(!f||!f[2]||isNaN(Number(f[1])))throw ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let p=Number(f[1])*1e3,b=Date.now();return{token:d.token,expireTimeMillis:b+p,issuedAtTimeMillis:b}})}function PI(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${CN}/projects/${n}/apps/${i}:${SN}?key=${r}`,body:{debug_token:e}}}var xN="firebase-app-check-database",kN=1,eg="firebase-app-check-store";var nu=null;function PN(){return nu||(nu=new Promise((t,e)=>{try{let n=indexedDB.open(xN,kN);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(ci.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(eg,{keyPath:"compositeKey"})}}}catch(n){e(ci.create("storage-open",{originalErrorMessage:n?.message}))}}),nu)}function NN(t,e){return MN(ON(t),e)}function MN(t,e){return _(this,null,function*(){let i=(yield PN()).transaction(eg,"readwrite"),s=i.objectStore(eg).put({compositeKey:t,value:e});return new Promise((o,c)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var d;c(ci.create("storage-set",{originalErrorMessage:(d=l.target.error)===null||d===void 0?void 0:d.message}))}})})}function ON(t){return`${t.options.appId}-${t.name}`}var tg=new kt("@firebase/app-check");function Xp(t,e){return ho()?NN(t,e).catch(n=>{tg.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function NI(){return DI().enabled}function MI(){return _(this,null,function*(){let t=DI();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var FN={error:"UNKNOWN_ERROR"};function VN(t){return wc.encodeString(JSON.stringify(t),!1)}function ng(t,e=!1){return _(this,null,function*(){let n=t.app;xI(n);let i=Ut(n),r=i.token,s;if(r&&!ea(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(ea(l)?r=l:yield Xp(n,void 0))}if(!e&&r&&ea(r))return{token:r.token};let o=!1;if(NI()){i.exchangeTokenPromise||(i.exchangeTokenPromise=kI(PI(n,yield MI()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let l=yield i.exchangeTokenPromise;return yield Xp(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield Ut(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?tg.warn(l.message):tg.error(l),s=l}let c;return r?s?ea(r)?c={token:r.token,internalError:s}:c=SI(s):(c={token:r.token},i.token=r,yield Xp(n,r)):c=SI(s),o&&BN(n,c),c})}function LN(t){return _(this,null,function*(){let e=t.app;xI(e);let{provider:n}=Ut(e);if(NI()){let i=yield MI(),{token:r}=yield kI(PI(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function UN(t,e,n,i){let{app:r}=t,s=Ut(r),o={next:n,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&ea(s.token)){let c=s.token;Promise.resolve().then(()=>{n({token:c.token}),CI(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>CI(t))}function OI(t,e){let n=Ut(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function CI(t){let{app:e}=t,n=Ut(e),i=n.tokenRefresher;i||(i=jN(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function jN(t){let{app:e}=t;return new Zp(()=>_(this,null,function*(){let n=Ut(e),i;if(n.token?i=yield ng(t,!0):i=yield ng(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Ut(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},AI.RETRIAL_MIN_WAIT,AI.RETRIAL_MAX_WAIT)}function BN(t,e){let n=Ut(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function ea(t){return t.expireTimeMillis-Date.now()>0}function SI(t){return{token:VN(FN),error:t}}var ig=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Ut(this.app);for(let n of e)OI(this.app,n.next);return Promise.resolve()}};function zN(t,e){return new ig(t,e)}function $N(t){return{getToken:e=>ng(t,e),getLimitedUseToken:()=>LN(t),addTokenListener:e=>UN(t,"INTERNAL",e),removeTokenListener:e=>OI(t.app,e)}}var qN="@firebase/app-check",GN="0.8.4";var HN="app-check",RI="app-check-internal";function WN(){nt(new Ne(HN,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return zN(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(RI).initialize()})),nt(new Ne(RI,t=>{let e=t.getProvider("app-check").getImmediate();return $N(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),le(qN,GN)}WN();var KN=["localhost","0.0.0.0","127.0.0.1"],yj=typeof window<"u"&&KN.includes(window.location.hostname);var rg=class{constructor(e,n){this._delegate=e,this.firebase=n,wr(e,new Ne("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),bo(this._delegate)))}_getService(e,n=Kt){var i;this._delegate.checkDestroyed();let r=this._delegate.container.getProvider(e);return!r.isInitialized()&&((i=r.getComponent())===null||i===void 0?void 0:i.instantiationMode)==="EXPLICIT"&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=Kt){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){wr(this._delegate,e)}_addOrOverwriteComponent(e){jh(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var YN={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},FI=new mt("app-compat","Firebase",YN);function JN(t){let e={},n={__esModule:!0,initializeApp:s,app:r,registerVersion:le,setLogLevel:xc,onLog:Dc,apps:null,SDK_VERSION:It,INTERNAL:{registerComponent:c,removeApp:i,useAsService:l,modularAPIs:Bh}};n.default=n,Object.defineProperty(n,"apps",{get:o});function i(d){delete e[d]}function r(d){if(d=d||Kt,!Ch(e,d))throw FI.create("no-app",{appName:d});return e[d]}r.App=t;function s(d,f={}){let p=Ir(d,f);if(Ch(e,p.name))return e[p.name];let b=new t(p,n);return e[p.name]=b,b}function o(){return Object.keys(e).map(d=>e[d])}function c(d){let f=d.name,p=f.replace("-compat","");if(nt(d)&&d.type==="PUBLIC"){let b=(T=r())=>{if(typeof T[p]!="function")throw FI.create("invalid-app-argument",{appName:f});return T[p]()};d.serviceProps!==void 0&&uo(b,d.serviceProps),n[p]=b,t.prototype[p]=function(...T){return this._getService.bind(this,f).apply(this,d.multipleInstances?T:[])}}return d.type==="PUBLIC"?n[p]:null}function l(d,f){return f==="serverAuth"?null:f}return n}function LI(){let t=JN(rg);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:LI,extendNamespace:e,createSubscribe:Ac,ErrorFactory:mt,deepExtend:uo});function e(n){uo(t,n)}return t}var XN=LI();var VI=new kt("@firebase/app-compat"),ZN="@firebase/app-compat",eM="0.2.34";function tM(t){le(ZN,eM,t)}if(Tc()&&self.firebase!==void 0){VI.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);let t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&VI.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var kn=XN;tM();var nM="firebase",iM="10.12.1";kn.registerVersion(nM,iM,"app-compat");var sg=class{constructor(e){return e}},jI=new W("angularfire2.app.options"),BI=new W("angularfire2.app.name");function zI(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let o=kn.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>kn.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let c=!!module.hot;rM("error",`${o.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new sg(o)}var rM=(t,...e)=>{od()&&typeof console<"u"&&console[t](...e)};function $I(t,e,n,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===t)||[];if(s)return sM(r,o)||(UI("error",`${e} was already initialized on the ${n} Firebase App with different settings.${oM?" You may need to reload as Firebase is not HMR aware.":""}`),UI("warn",{is:r,was:o})),s;{let c=i();return globalThis.\u0275AngularfireInstanceCache.push([t,c,r]),c}}function sM(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var oM=typeof module<"u"&&!!module.hot,UI=(t,...e)=>{od()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var XI="firebasestorage.googleapis.com",ZI="storageBucket",aM=2*60*1e3,cM=10*60*1e3,lM=1e3;var Ce=class t extends tt{constructor(e,n,i=0){super(og(e),`Firebase Storage: ${n} (${og(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return og(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ee=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Ee||{});function og(t){return"storage/"+t}function mg(){let t="An unknown error occurred, please check the error payload for server response.";return new Ce(Ee.UNKNOWN,t)}function uM(t){return new Ce(Ee.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function dM(t){return new Ce(Ee.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hM(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ce(Ee.UNAUTHENTICATED,t)}function fM(){return new Ce(Ee.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mM(t){return new Ce(Ee.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function eE(){return new Ce(Ee.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tE(){return new Ce(Ee.CANCELED,"User canceled the upload/download.")}function pM(t){return new Ce(Ee.INVALID_URL,"Invalid URL '"+t+"'.")}function gM(t){return new Ce(Ee.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bM(){return new Ce(Ee.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZI+"' property when initializing the app?")}function nE(){return new Ce(Ee.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _M(){return new Ce(Ee.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function vM(){return new Ce(Ee.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yM(t){return new Ce(Ee.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Gi(t){return new Ce(Ee.INVALID_ARGUMENT,t)}function iE(){return new Ce(Ee.APP_DELETED,"The Firebase app was deleted.")}function pg(t){return new Ce(Ee.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function na(t,e){return new Ce(Ee.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ta(t){throw new Ce(Ee.INTERNAL_ERROR,"Internal error: "+t)}var dt=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(i.path==="")return i;throw gM(e)}static makeFromUrl(e,n){let i=null,r="([A-Za-z0-9.\\-_]+)";function s(Q){Q.path.charAt(Q.path.length-1)==="/"&&(Q.path_=Q.path_.slice(0,-1))}let o="(/(.*))?$",c=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function d(Q){Q.path_=decodeURIComponent(Q.path)}let f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",T=new RegExp(`^https?://${p}/${f}/b/${r}/o${b}`,"i"),x={bucket:1,path:3},k=n===XI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,D="([^?#]*)",L=new RegExp(`^https?://${k}/${r}/${D}`,"i"),z=[{regex:c,indices:l,postModify:s},{regex:T,indices:x,postModify:d},{regex:L,indices:{bucket:1,path:2},postModify:d}];for(let Q=0;Q<z.length;Q++){let Se=z[Q],ie=Se.regex.exec(e);if(ie){let I=ie[Se.indices.bucket],g=ie[Se.indices.path];g||(g=""),i=new t(I,g),Se.postModify(i);break}}if(i==null)throw pM(e);return i}},cg=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function wM(t,e,n){let i=1,r=null,s=null,o=!1,c=0;function l(){return c===2}let d=!1;function f(...D){d||(d=!0,e.apply(null,D))}function p(D){r=setTimeout(()=>{r=null,t(T,l())},D)}function b(){s&&clearTimeout(s)}function T(D,...L){if(d){b();return}if(D){b(),f.call(null,D,...L);return}if(l()||o){b(),f.call(null,D,...L);return}i<64&&(i*=2);let z;c===1?(c=2,z=0):z=(i+Math.random())*1e3,p(z)}let x=!1;function k(D){x||(x=!0,b(),!d&&(r!==null?(D||(c=2),clearTimeout(r),p(0)):D||(c=1)))}return p(0),s=setTimeout(()=>{o=!0,k(!0)},n),k}function IM(t){t(!1)}function EM(t){return t!==void 0}function TM(t){return typeof t=="function"}function AM(t){return typeof t=="object"&&!Array.isArray(t)}function su(t){return typeof t=="string"||t instanceof String}function qI(t){return gg()&&t instanceof Blob}function gg(){return typeof Blob<"u"}function lg(t,e,n,i){if(i<e)throw Gi(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Gi(`Invalid value for '${t}'. Expected ${n} or less.`)}function li(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function rE(t){let e=encodeURIComponent,n="?";for(let i in t)if(t.hasOwnProperty(i)){let r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Zr=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Zr||{});function sE(t,e){let n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}var ug=class{constructor(e,n,i,r,s,o,c,l,d,f,p,b=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,x)=>{this.resolve_=T,this.reject_=x,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new Xr(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=c=>{let l=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let c=s.getErrorCode()===Zr.NO_ERROR,l=s.getStatus();if(!c||sE(l,this.additionalRetryCodes_)&&this.retry){let f=s.getErrorCode()===Zr.ABORT;i(!1,new Xr(!1,null,f));return}let d=this.successCodes_.indexOf(l)!==-1;i(!0,new Xr(d,s))})},n=(i,r)=>{let s=this.resolve_,o=this.reject_,c=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(c,c.getResponse());EM(l)?s(l):s()}catch(l){o(l)}else if(c!==null){let l=mg();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(r.canceled){let l=this.appDelete_?iE():tE();o(l)}else{let l=eE();o(l)}};this.canceled_?n(!1,new Xr(!1,null,!0)):this.backoffId_=wM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&IM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Xr=class{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}};function CM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function SM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function RM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function DM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function xM(t,e,n,i,r,s,o=!0){let c=rE(t.urlParams),l=t.url+c,d=Object.assign({},t.headers);return RM(d,e),CM(d,n),SM(d,s),DM(d,i),new ug(l,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}function kM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function PM(...t){let e=kM();if(e!==void 0){let n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(gg())return new Blob(t);throw new Ce(Ee.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function NM(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function MM(t){if(typeof atob>"u")throw yM("base-64");return atob(t)}var At={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ia=class{constructor(e,n){this.data=e,this.contentType=n||null}};function bg(t,e){switch(t){case At.RAW:return new ia(oE(e));case At.BASE64:case At.BASE64URL:return new ia(aE(t,e));case At.DATA_URL:return new ia(FM(e),VM(e))}throw mg()}function oE(t){let e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=i,o=t.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function OM(t){let e;try{e=decodeURIComponent(t)}catch{throw na(At.DATA_URL,"Malformed data URL.")}return oE(e)}function aE(t,e){switch(t){case At.BASE64:{let r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw na(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case At.BASE64URL:{let r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw na(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=MM(e)}catch(r){throw r.message.includes("polyfill")?r:na(t,"Invalid character found")}let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}var ru=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw na(At.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=n[1]||null;i!=null&&(this.base64=LM(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}};function FM(t){let e=new ru(t);return e.base64?aE(At.BASE64,e.rest):OM(e.rest)}function VM(t){return new ru(t).contentType}function LM(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var es=class t{constructor(e,n){let i=0,r="";qI(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(qI(this.data_)){let i=this.data_,r=NM(i,e,n);return r===null?null:new t(r)}else{let i=new Uint8Array(this.data_.buffer,e,n-e);return new t(i,!0)}}static getBlob(...e){if(gg()){let n=e.map(i=>i instanceof t?i.data_:i);return new t(PM.apply(null,n))}else{let n=e.map(o=>su(o)?bg(At.RAW,o).data:o.data_),i=0;n.forEach(o=>{i+=o.byteLength});let r=new Uint8Array(i),s=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)r[s++]=o[c]}),new t(r,!0)}}uploadData(){return this.data_}};function _g(t){let e;try{e=JSON.parse(t)}catch{return null}return AM(e)?e:null}function UM(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function jM(t,e){let n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function cE(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function BM(t,e){return e}var Ge=class{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||BM}},iu=null;function zM(t){return!su(t)||t.length<2?t:cE(t)}function ou(){if(iu)return iu;let t=[];t.push(new Ge("bucket")),t.push(new Ge("generation")),t.push(new Ge("metageneration")),t.push(new Ge("name","fullPath",!0));function e(s,o){return zM(o)}let n=new Ge("name");n.xform=e,t.push(n);function i(s,o){return o!==void 0?Number(o):o}let r=new Ge("size");return r.xform=i,t.push(r),t.push(new Ge("timeCreated")),t.push(new Ge("updated")),t.push(new Ge("md5Hash",null,!0)),t.push(new Ge("cacheControl",null,!0)),t.push(new Ge("contentDisposition",null,!0)),t.push(new Ge("contentEncoding",null,!0)),t.push(new Ge("contentLanguage",null,!0)),t.push(new Ge("contentType",null,!0)),t.push(new Ge("metadata","customMetadata",!0)),iu=t,iu}function $M(t,e){function n(){let i=t.bucket,r=t.fullPath,s=new dt(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function qM(t,e,n){let i={};i.type="file";let r=n.length;for(let s=0;s<r;s++){let o=n[s];i[o.local]=o.xform(i,e[o.server])}return $M(i,t),i}function lE(t,e,n){let i=_g(e);return i===null?null:qM(t,i,n)}function GM(t,e,n,i){let r=_g(e);if(r===null||!su(r.downloadTokens))return null;let s=r.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(d=>{let f=t.bucket,p=t.fullPath,b="/b/"+o(f)+"/o/"+o(p),T=li(b,n,i),x=rE({alt:"media",token:d});return T+x})[0]}function vg(t,e){let n={},i=e.length;for(let r=0;r<i;r++){let s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var GI="prefixes",HI="items";function HM(t,e,n){let i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[GI])for(let r of n[GI]){let s=r.replace(/\/$/,""),o=t._makeStorageReference(new dt(e,s));i.prefixes.push(o)}if(n[HI])for(let r of n[HI]){let s=t._makeStorageReference(new dt(e,r.name));i.items.push(s)}return i}function WM(t,e,n){let i=_g(n);return i===null?null:HM(t,e,i)}var jt=class{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function an(t){if(!t)throw mg()}function au(t,e){function n(i,r){let s=lE(t,r,e);return an(s!==null),s}return n}function KM(t,e){function n(i,r){let s=WM(t,e,r);return an(s!==null),s}return n}function QM(t,e){function n(i,r){let s=lE(t,r,e);return an(s!==null),GM(s,r,t.host,t._protocol)}return n}function is(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=fM():r=hM():n.getStatus()===402?r=dM(t.bucket):n.getStatus()===403?r=mM(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function cu(t){let e=is(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=uM(t.path)),s.serverResponse=r.serverResponse,s}return n}function uE(t,e,n){let i=e.fullServerUrl(),r=li(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new jt(r,s,au(t,n),o);return c.errorHandler=cu(e),c}function YM(t,e,n,i,r){let s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),i&&(s.pageToken=i),r&&(s.maxResults=r);let o=e.bucketOnlyServerUrl(),c=li(o,t.host,t._protocol),l="GET",d=t.maxOperationRetryTime,f=new jt(c,l,KM(t,e.bucket),d);return f.urlParams=s,f.errorHandler=is(e),f}function JM(t,e,n){let i=e.fullServerUrl(),r=li(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,c=new jt(r,s,QM(t,n),o);return c.errorHandler=cu(e),c}function XM(t,e,n,i){let r=e.fullServerUrl(),s=li(r,t.host,t._protocol),o="PATCH",c=vg(n,i),l={"Content-Type":"application/json; charset=utf-8"},d=t.maxOperationRetryTime,f=new jt(s,o,au(t,i),d);return f.headers=l,f.body=c,f.errorHandler=cu(e),f}function ZM(t,e){let n=e.fullServerUrl(),i=li(n,t.host,t._protocol),r="DELETE",s=t.maxOperationRetryTime;function o(l,d){}let c=new jt(i,r,o,s);return c.successCodes=[200,204],c.errorHandler=cu(e),c}function eO(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function dE(t,e,n){let i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=eO(null,e)),i}function tO(t,e,n,i,r){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let z="";for(let Q=0;Q<2;Q++)z=z+Math.random().toString().slice(2);return z}let l=c();o["Content-Type"]="multipart/related; boundary="+l;let d=dE(e,i,r),f=vg(d,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+d.contentType+`\r
\r
`,b=`\r
--`+l+"--",T=es.getBlob(p,i,b);if(T===null)throw nE();let x={name:d.fullPath},k=li(s,t.host,t._protocol),D="POST",L=t.maxUploadRetryTime,j=new jt(k,D,au(t,n),L);return j.urlParams=x,j.headers=o,j.body=T.uploadData(),j.errorHandler=is(e),j}var ts=class{constructor(e,n,i,r){this.current=e,this.total=n,this.finalized=!!i,this.metadata=r||null}};function yg(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{an(!1)}return an(!!n&&(e||["active"]).indexOf(n)!==-1),n}function nO(t,e,n,i,r){let s=e.bucketOnlyServerUrl(),o=dE(e,i,r),c={name:o.fullPath},l=li(s,t.host,t._protocol),d="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=vg(o,n),b=t.maxUploadRetryTime;function T(k){yg(k);let D;try{D=k.getResponseHeader("X-Goog-Upload-URL")}catch{an(!1)}return an(su(D)),D}let x=new jt(l,d,T,b);return x.urlParams=c,x.headers=f,x.body=p,x.errorHandler=is(e),x}function iO(t,e,n,i){let r={"X-Goog-Upload-Command":"query"};function s(d){let f=yg(d,["active","final"]),p=null;try{p=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{an(!1)}p||an(!1);let b=Number(p);return an(!isNaN(b)),new ts(b,i.size(),f==="final")}let o="POST",c=t.maxUploadRetryTime,l=new jt(n,o,s,c);return l.headers=r,l.errorHandler=is(e),l}var WI=256*1024;function rO(t,e,n,i,r,s,o,c){let l=new ts(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw _M();let d=l.total-l.current,f=d;r>0&&(f=Math.min(f,r));let p=l.current,b=p+f,T="";f===0?T="finalize":d===f?T="upload, finalize":T="upload";let x={"X-Goog-Upload-Command":T,"X-Goog-Upload-Offset":`${l.current}`},k=i.slice(p,b);if(k===null)throw nE();function D(Q,Se){let ie=yg(Q,["active","final"]),I=l.current+f,g=i.size(),v;return ie==="final"?v=au(e,s)(Q,Se):v=null,new ts(I,g,ie==="final",v)}let L="POST",j=e.maxUploadRetryTime,z=new jt(n,L,D,j);return z.headers=x,z.body=k.uploadData(),z.progressCallback=c||null,z.errorHandler=is(t),z}var hE={STATE_CHANGED:"state_changed"},st={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ag(t){switch(t){case"running":case"pausing":case"canceling":return st.RUNNING;case"paused":return st.PAUSED;case"success":return st.SUCCESS;case"canceled":return st.CANCELED;case"error":return st.ERROR;default:return st.ERROR}}var dg=class{constructor(e,n,i){if(TM(e)||n!=null||i!=null)this.next=e,this.error=n??void 0,this.complete=i??void 0;else{let s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}};function Jr(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}var KI=null,hg=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw ta("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(let s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ta("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ta("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ta("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ta("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},fg=class extends hg{initXhr(){this.xhr_.responseType="text"}};function on(){return KI?KI():new fg}var ra=class{constructor(e,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=i,this._mappings=ou(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Ee.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let s=this.isExponentialBackoffExpired();if(sE(r.status,[]))if(s)r=eE();else{this.sleepTime=Math.max(this.sleepTime*2,lM),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Ee.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":e(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{let i=nO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,on,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((n,i)=>{let r=iO(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,on,n,i);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=WI*this._chunkMultiplier,n=new ts(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=rO(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}let c=this._ref.storage._makeRequest(o,on,r,s,!1);this._request=c,c.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){WI*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{let i=uE(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,on,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{let i=tO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,on,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=tE(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let e=ag(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,i,r){let s=new dg(n||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ag(this._state)){case st.SUCCESS:Jr(this._resolve.bind(null,this.snapshot))();break;case st.CANCELED:case st.ERROR:let n=this._reject;Jr(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ag(this._state)){case st.RUNNING:case st.PAUSED:e.next&&Jr(e.next.bind(e,this.snapshot))();break;case st.SUCCESS:e.complete&&Jr(e.complete.bind(e))();break;case st.CANCELED:case st.ERROR:e.error&&Jr(e.error.bind(e,this._error))();break;default:e.error&&Jr(e.error.bind(e,this._error))()}}resume(){let e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){let e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){let e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}};var ns=class t{constructor(e,n){this._service=e,n instanceof dt?this._location=n:this._location=dt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new dt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cE(this._location.path)}get storage(){return this._service}get parent(){let e=UM(this._location.path);if(e===null)return null;let n=new dt(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw pg(e)}};function sO(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new ra(t,new es(e),n)}function oO(t){let e={prefixes:[],items:[]};return fE(t,e).then(()=>e)}function fE(t,e,n){return _(this,null,function*(){let r=yield mE(t,{pageToken:n});e.prefixes.push(...r.prefixes),e.items.push(...r.items),r.nextPageToken!=null&&(yield fE(t,e,r.nextPageToken))})}function mE(t,e){e!=null&&typeof e.maxResults=="number"&&lg("options.maxResults",1,1e3,e.maxResults);let n=e||{},i=YM(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(i,on)}function aO(t){t._throwIfRoot("getMetadata");let e=uE(t.storage,t._location,ou());return t.storage.makeRequestWithTokens(e,on)}function cO(t,e){t._throwIfRoot("updateMetadata");let n=XM(t.storage,t._location,e,ou());return t.storage.makeRequestWithTokens(n,on)}function lO(t){t._throwIfRoot("getDownloadURL");let e=JM(t.storage,t._location,ou());return t.storage.makeRequestWithTokens(e,on).then(n=>{if(n===null)throw vM();return n})}function uO(t){t._throwIfRoot("deleteObject");let e=ZM(t.storage,t._location);return t.storage.makeRequestWithTokens(e,on)}function pE(t,e){let n=jM(t._location.path,e),i=new dt(t._location.bucket,n);return new ns(t.storage,i)}function dO(t){return/^[A-Za-z]+:\/\//.test(t)}function hO(t,e){return new ns(t,e)}function gE(t,e){if(t instanceof sa){let n=t;if(n._bucket==null)throw bM();let i=new ns(n,n._bucket);return e!=null?gE(i,e):i}else return e!==void 0?pE(t,e):t}function fO(t,e){if(e&&dO(e)){if(t instanceof sa)return hO(t,e);throw Gi("To use ref(service, url), the first argument must be a Storage instance.")}else return gE(t,e)}function QI(t,e){let n=e?.[ZI];return n==null?null:dt.makeFromBucketSpec(n,t)}function mO(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:Ec(r,t.app.options.projectId))}var sa=class{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=XI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aM,this._maxUploadRetryTime=cM,this._requests=new Set,r!=null?this._bucket=dt.makeFromBucketSpec(r,this._host):this._bucket=QI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dt.makeFromBucketSpec(this._url,e):this._bucket=QI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return _(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return _(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ns(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new cg(iE());{let o=xM(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return _(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()})}},YI="@firebase/storage",JI="0.12.5";var pO="storage";function bE(t,e,n){return t=pe(t),sO(t,e,n)}function _E(t){return t=pe(t),aO(t)}function vE(t,e){return t=pe(t),cO(t,e)}function yE(t,e){return t=pe(t),mE(t,e)}function wE(t){return t=pe(t),oO(t)}function IE(t){return t=pe(t),lO(t)}function EE(t){return t=pe(t),uO(t)}function wg(t,e){return t=pe(t),fO(t,e)}function TE(t,e){return pE(t,e)}function AE(t,e,n,i={}){mO(t,e,n,i)}function gO(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new sa(n,i,r,e,It)}function bO(){nt(new Ne(pO,gO,"PUBLIC").setMultipleInstances(!0)),le(YI,JI,""),le(YI,JI,"esm2017")}bO();var rs=class{constructor(e,n,i){this._delegate=e,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var lu=class{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new rs(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(i=>{if(e)return e(new rs(i,this,this._ref))},n)}on(e,n,i,r){let s;return n&&(typeof n=="function"?s=o=>n(new rs(o,this,this._ref)):s={next:n.next?o=>n.next(new rs(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}},uu=class{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Hi(e,this._service))}get items(){return this._delegate.items.map(e=>new Hi(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Hi=class t{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){let n=TE(this._delegate,e);return new t(n,this.storage)}get root(){return new t(this._delegate.root,this.storage)}get parent(){let e=this._delegate.parent;return e==null?null:new t(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new lu(bE(this._delegate,e,n),this)}putString(e,n=At.RAW,i){this._throwIfRoot("putString");let r=bg(n,e),s=Object.assign({},i);return s.contentType==null&&r.contentType!=null&&(s.contentType=r.contentType),new lu(new ra(this._delegate,new es(r.data,!0),s),this)}listAll(){return wE(this._delegate).then(e=>new uu(e,this.storage))}list(e){return yE(this._delegate,e||void 0).then(n=>new uu(n,this.storage))}getMetadata(){return _E(this._delegate)}updateMetadata(e){return vE(this._delegate,e)}getDownloadURL(){return IE(this._delegate)}delete(){return this._throwIfRoot("delete"),EE(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw pg(e)}};var du=class{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(CE(e))throw Gi("ref() expected a child path but got a URL, use refFromURL instead.");return new Hi(wg(this._delegate,e),this)}refFromURL(e){if(!CE(e))throw Gi("refFromURL() expected a full URL but got a child path, use ref() instead.");try{dt.makeFromUrl(e,this._delegate.host)}catch{throw Gi("refFromUrl() expected a valid full URL but got an invalid one.")}return new Hi(wg(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,i={}){AE(this._delegate,e,n,i)}};function CE(t){return/^[A-Za-z]+:\/\//.test(t)}var _O="@firebase/storage-compat",vO="0.3.8";var yO="storage-compat";function wO(t,{instanceIdentifier:e}){let n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("storage").getImmediate({identifier:e});return new du(n,i)}function IO(t){let e={TaskState:st,TaskEvent:hE,StringFormat:At,Storage:du,Reference:Hi};t.INTERNAL.registerComponent(new Ne(yO,wO,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(_O,vO)}IO(kn);function EO(t){return new Bt(e=>{let n=o=>e.next(o),i=o=>e.error(o),r=()=>e.complete();n(t.snapshot);let s=t.on("state_changed",n);return t.then(o=>{n(o),r()},o=>{n(t.snapshot),i(o)}),function(){s()}}).pipe(As(0))}function SE(t){let e=EO(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(ee(n=>n.bytesTransferred/n.totalBytes*100))}}function hu(t){return{getDownloadURL:()=>$(void 0).pipe($h,ct(()=>t.getDownloadURL()),Nc),getMetadata:()=>$(void 0).pipe($h,ct(()=>t.getMetadata()),Nc),delete:()=>De(t.delete()),child:e=>hu(t.child(e)),updateMetadata:e=>De(t.updateMetadata(e)),put:(e,n)=>{let i=t.put(e,n);return SE(i)},putString:(e,n,i)=>{let r=t.putString(e,n,i);return SE(r)},list:e=>De(t.list(e)),listAll:()=>De(t.listAll())}}var TO=new W("angularfire2.storageBucket"),AO=new W("angularfire2.storage.maxUploadRetryTime"),CO=new W("angularfire2.storage.maxOperationRetryTime"),SO=new W("angularfire2.storage.use-emulator"),RE=(()=>{class t{storage;constructor(n,i,r,s,o,c,l,d,f,p){let b=zI(n,o,i);this.storage=$I(`${b.name}.storage.${r}`,"AngularFireStorage",b.name,()=>{let T=o.runOutsideAngular(()=>b.storage(r||void 0)),x=f;return x&&T.useEmulator(...x),l&&T.setMaxUploadRetryTime(l),d&&T.setMaxOperationRetryTime(d),T},[l,d])}ref(n){return hu(this.storage.ref(n))}refFromURL(n){return hu(this.storage.refFromURL(n))}upload(n,i,r){let s=this.storage.ref(n);return hu(s).put(i,r)}static \u0275fac=function(i){return new(i||t)(F(jI),F(BI,8),F(TO,8),F(Ze),F(re),F(Kn),F(AO,8),F(CO,8),F(SO,8),F(yn,8))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var fu=(()=>{let e=class e{constructor(){this.isCKEditorLoaded=!1}loadCKEditor(){return _(this,null,function*(){if(this.isCKEditorLoaded)return window.ClassicEditor;if(typeof window<"u"){let{default:i}=yield import("./chunk-FZMR2VPH.js");return window.ClassicEditor=i,this.isCKEditorLoaded=!0,i}})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var xE=(()=>{let e=class e{constructor(i,r,s,o){this.fb=i,this.newsService=r,this.storage=s,this.ckeditorLoader=o,this.newsForm=this.fb.group({title:[""],content:[""],image:[null]})}ngOnInit(){return _(this,null,function*(){console.log("NewsEventsComponent init"),typeof window<"u"&&(this.Editor=yield this.ckeditorLoader.loadCKEditor())})}onSubmit(){if(this.newsForm.valid){let i=this.newsForm.value,r=i.content;this.newsService.addNews("instituteId",{title:i.title,content:r,date:new Date}).then(()=>{this.newsForm.reset()})}}};e.\u0275fac=function(r){return new(r||e)(G(EI),G(Kr),G(RE),G(fu))},e.\u0275cmp=fe({type:e,selectors:[["app-add-news"]],standalone:!0,features:[me],decls:2,vars:0,template:function(r,s){r&1&&(Z(0,"p"),ce(1,"add-news works!"),te())},dependencies:[TI]});let t=e;return t})();var DO=["*"];var xO=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],kO=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],PO=new W("MAT_CARD_CONFIG"),kE=(()=>{let e=class e{constructor(i){this.appearance=i?.appearance||"raised"}};e.\u0275fac=function(r){return new(r||e)(G(PO,8))},e.\u0275cmp=fe({type:e,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,s){r&2&&Rt("mat-mdc-card-outlined",s.appearance==="outlined")("mdc-card--outlined",s.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[me],ngContentSelectors:DO,decls:1,vars:0,template:function(r,s){r&1&&(jn(),vt(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0});let t=e;return t})(),PE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Xe({type:e,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"],standalone:!0});let t=e;return t})();var NE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Xe({type:e,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0});let t=e;return t})(),ME=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Xe({type:e,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"],standalone:!0});let t=e;return t})();var OE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],standalone:!0,features:[me],ngContentSelectors:kO,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(r,s){r&1&&(jn(xO),vt(0),Z(1,"div",0),vt(2,1),te(),vt(3,2))},encapsulation:2,changeDetection:0});let t=e;return t})();var FE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Xe({type:e,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"],standalone:!0});let t=e;return t})();var VE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ae({type:e}),e.\u0275inj=Te({imports:[ft,gn,ft]});let t=e;return t})();function MO(t,e){if(t&1){let n=$b();Z(0,"mat-card",3),fn("click",function(){let r=Ob(n).$implicit,s=gi();return Fb(s.viewArticle(r.title,r.id))}),Z(1,"mat-card-header")(2,"mat-card-title"),ce(3),te(),Z(4,"mat-card-subtitle"),ce(5),Va(6,"date"),te()(),Ue(7,"img",4)(8,"mat-divider"),Z(9,"mat-card-content"),Ue(10,"div",5),Z(11,"p",6),ce(12,"Read article ->"),te()()()}if(t&2){let n=e.$implicit,i=gi();Ve(3),qt(n.title),Ve(2),qt(qb(6,3,n.date.toDate())),Ve(5),Mt("innerHTML",i.getTruncatedContent(n.content),tr)}}var LE=(()=>{let e=class e{constructor(i,r,s,o){this.newsService=i,this.ckeditorLoader=r,this.customizationService=s,this.router=o,this.newsList=[],this.lastVisibleDoc=null,this.instituteId=typeof window<"u"?this.customizationService.getSubdomainFromUrl():"Test 32"}ngOnInit(){return _(this,null,function*(){typeof window<"u"&&(this.Editor=yield this.ckeditorLoader.loadCKEditor(),this.loadNews())})}loadNews(){this.newsService.getNews(this.instituteId).subscribe(i=>{i.length>0&&(this.lastVisibleDoc=i[i.length-1]),this.newsList=i,console.log("News list updated:",this.newsList)})}loadMoreNews(){this.lastVisibleDoc&&this.newsService.getMoreNews(this.instituteId,this.lastVisibleDoc).then(i=>{console.log("Fetched more news:",i),i.length>0&&(this.lastVisibleDoc=i[i.length-1],this.newsList=[...this.newsList,...i])})}onScroll(){this.loadMoreNews()}getTruncatedContent(i){return i.length>105?i.substring(0,105)+"...":i}encodeTitle(i){return i.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}viewArticle(i,r){let s=this.encodeTitle(i)+"-"+r;this.router.navigate(["/view-news",s])}};e.\u0275fac=function(r){return new(r||e)(G(Kr),G(fu),G(ai),G(et))},e.\u0275cmp=fe({type:e,selectors:[["app-news-events"]],standalone:!0,features:[me],decls:5,vars:1,consts:[[1,"news-container"],[1,"newslist"],["matRipple","",3,"click",4,"ngFor","ngForOf"],["matRipple","",3,"click"],["mat-card-image","","src","../../assets/newsbg.jpg"],[1,"news-content",3,"innerHTML"],[1,"readmore"]],template:function(r,s){r&1&&(Z(0,"div",0)(1,"h1"),ce(2,"Our News & Events articles"),te(),Z(3,"div",1),ir(4,MO,13,5,"mat-card",2),te()()),r&2&&(Ve(4),Mt("ngForOf",s.newsList))},dependencies:[gn,t_,Ba,VE,kE,NE,OE,FE,ME,PE,_r,br,yc,gh,pv],styles:[".news-container[_ngcontent-%COMP%]{padding:80px 12px;background-color:#f5f5f5}.news-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:1% 2% .5%}.news-container[_ngcontent-%COMP%]   .newslist[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}@media screen and (max-width: 425px){.news-container[_ngcontent-%COMP%]{padding:72px 0}.news-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center}}.mdc-card[_ngcontent-%COMP%]{max-width:480px;margin:1% 2%;cursor:pointer;transition:all .3s cubic-bezier(0,0,.5,1);font-family:Verdana,Geneva,Tahoma,sans-serif}@media screen and (max-width: 425px){.mdc-card[_ngcontent-%COMP%]{max-width:96%}}.mdc-card[_ngcontent-%COMP%]:hover{box-shadow:0 0 40px -8px #00000029,0 0 24px -16px #00000029;transform:scale3d(1.01,1.01,1.03) translate3d(.1rem,-.25rem,20rem)}.mdc-card[_ngcontent-%COMP%]:hover   .readmore[_ngcontent-%COMP%]{opacity:1}.news-content[_ngcontent-%COMP%]{margin:12px 0 24px}.readmore[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#00000080;position:absolute;padding:24px 0 8px;bottom:0;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;opacity:0;transition:all .6s ease-in-out}"]});let t=e;return t})();var OO=["mat-button",""],FO=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],VO=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var LO=new W("MAT_BUTTON_CONFIG");var UO=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],jO=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,s,o){this._elementRef=i,this._platform=r,this._ngZone=s,this._animationMode=o,this._focusMonitor=V(Tv),this._rippleLoader=V(Fv),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=V(LO,{optional:!0}),l=i.nativeElement,d=l.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(l,{className:"mat-mdc-button-ripple"});for(let{attribute:f,mdcClasses:p}of UO)l.hasAttribute(f)&&d.add(...p)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){nr()},e.\u0275dir=Xe({type:e,inputs:{color:"color",disableRipple:[Je.HasDecoratorInputTransform,"disableRipple","disableRipple",mn],disabled:[Je.HasDecoratorInputTransform,"disabled","disabled",mn],ariaDisabled:[Je.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",mn],disabledInteractive:[Je.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",mn]},features:[ks]});let t=e;return t})();var UE=(()=>{let e=class e extends jO{constructor(i,r,s,o){super(i,r,s,o)}};e.\u0275fac=function(r){return new(r||e)(G(_t),G(lt),G(re),G(pi,8))},e.\u0275cmp=fe({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,s){r&2&&(Un("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),Na(s.color?"mat-"+s.color:""),Rt("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ed,me],attrs:OO,ngContentSelectors:VO,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){r&1&&(jn(FO),Ue(0,"span",0),vt(1),Z(2,"span",1),vt(3,1),te(),vt(4,2),Ue(5,"span",2)(6,"span",3)),r&2&&Rt("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var jE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ae({type:e}),e.\u0275inj=Te({imports:[ft,yc,ft]});let t=e;return t})();var BE=(()=>{let e=class e{constructor(i,r,s){this.document=i,this.renderer=r,this.customizationService=s,this.subdomain="",this.about=""}onWindowScroll(){let i=document.getElementById("header"),r=document.getElementById("sticky-nav"),s=document.getElementById("spacer"),o=window.pageYOffset;if(i&&s){let c=i.offsetHeight-60,l=Math.max(32,50-18*(o/c)),d=Math.min(o);i.querySelector("h1").style.fontSize=`${l}px`,s.style.height=`${d}px`,i.style.opacity=o>=c?"0":"1"}r&&(r.style.opacity=o>=(i?.offsetHeight||0)-60?"1":"0")}ngOnInit(){return _(this,null,function*(){if(typeof window<"u"){this.subdomain=this.customizationService.getSubdomainFromUrl();try{let i=yield this.customizationService.getCustomization(this.subdomain);i&&(this.subdomain=i.websiteTitle),i.themeColor?this.setThemeColor(i.themeColor):this.setThemeColor("#027359"),i.about?this.about=i.about:this.about="Welcome to "+this.subdomain}catch(i){console.error("Error fetching customization data:",i)}}})}setThemeColor(i){this.renderer.setStyle(this.document.documentElement,"--primary-color",i),this.document.documentElement.style.setProperty("--primary-color",i),setTimeout(()=>{let r=getComputedStyle(this.document.documentElement)},1e3)}};e.\u0275fac=function(r){return new(r||e)(G(ye),G(ka),G(ai))},e.\u0275cmp=fe({type:e,selectors:[["app-home"]],hostBindings:function(r,s){r&1&&fn("scroll",function(){return s.onWindowScroll()},!1,Ub)},standalone:!0,features:[me],decls:21,vars:3,consts:[[1,"container"],["id","header",1,"float-header"],["id","spacer"],["id","institute-name"],["id","sticky-nav",1,"sticky-nav"],["id","main-content",1,"main"],[1,"about"],[1,"about_content"],[1,"news-content",3,"innerHTML"],["mat-flat-button","","color","primary"],["mat-stroked-button",""]],template:function(r,s){r&1&&(Z(0,"div",0)(1,"header",1),Ue(2,"div",2),Z(3,"h1",3),ce(4),te()(),Z(5,"nav",4)(6,"h1"),ce(7),te()(),Z(8,"main",5),Ue(9,"mat-divider"),Z(10,"div",6)(11,"div",7)(12,"h1"),ce(13,"About us"),te(),Ue(14,"div",8),Z(15,"div")(16,"button",9),ce(17,"Enroll now"),te(),Z(18,"button",10),ce(19,"Sign In"),te()()()(),Ue(20,"app-news-events"),te()()),r&2&&(Ve(4),Fa(" ",s.subdomain," "),Ve(3),Fa(" ",s.subdomain," "),Ve(7),Mt("innerHTML",s.about,tr))},dependencies:[LE,_r,br,jE,UE],styles:["[_ngcontent-%COMP%]:root{--primary-color: #333}.container[_ngcontent-%COMP%]{padding-bottom:50vh}.float-header[_ngcontent-%COMP%]{height:70vh;background-color:var(--primary-color);display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;transition:opacity .02s,font-size .1s}.float-header[_ngcontent-%COMP%]   #spacer[_ngcontent-%COMP%]{height:0;transition:height .1s}.float-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-transform:capitalize;font-family:Inter,sans-serif;font-size:50px;color:#fff;transition:font-size .1s;margin:0}@media screen and (max-width: 425px){.float-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:50px}}.sticky-nav[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;background-color:var(--primary-color);display:flex;justify-content:center;align-items:center;height:60px;z-index:1000;opacity:0;transition:opacity .02s;box-shadow:0 1px 2px #0000004d,0 1px 3px 1px #0000004d}.sticky-nav[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:36px;color:#fff;margin:0}.about[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:200px 16px 150px}.about[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;margin:12px 0 36px}.about[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:32px 12px 0 0;font-size:18px}.about[_ngcontent-%COMP%]   .about_content[_ngcontent-%COMP%]{max-width:1020px;font-family:Inter,sans-serif;font-size:20px;font-weight:500;line-height:30px}"]});let t=e;return t})();var zE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=fe({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[me],decls:2,vars:0,template:function(r,s){r&1&&(Z(0,"p"),ce(1,"dashboard works!"),te())}});let t=e;return t})();var $E=(()=>{let e=class e{constructor(i,r){this.router=i,this._location=r}backClicked(){this._location.back()}};e.\u0275fac=function(r){return new(r||e)(G(et),G(pn))},e.\u0275cmp=fe({type:e,selectors:[["app-error-404"]],standalone:!0,features:[me],decls:19,vars:1,consts:[[1,"content"],["href","/home"],[3,"click"]],template:function(r,s){r&1&&(Z(0,"div",0)(1,"h1")(2,"b")(3,"u"),ce(4,"Error 404"),te(),ce(5," : "),te(),ce(6," You tried looking for "),Z(7,"span"),ce(8),te(),ce(9," page"),te(),Z(10,"h1"),ce(11,"Sorry, we couldn't find the requested resource :("),te(),Z(12,"a",1)(13,"p"),ce(14,"Click here to go to home page"),te()(),Z(15,"p"),ce(16,"OR"),te(),Z(17,"button",2),fn("click",function(){return s.backClicked()}),ce(18,"Go back"),te()()),r&2&&(Ve(8),qt(s.router.url))},styles:[".content[_ngcontent-%COMP%]{min-height:60vh;text-align:justify;padding:100px 20px;flex-direction:column;justify-content:center;align-items:center;display:flex}span[_ngcontent-%COMP%]{color:#044;background-color:#faebd7;padding:4px}p[_ngcontent-%COMP%]{margin-top:20px}"]});let t=e;return t})();var qE=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:BE},{path:"dashboard",component:zE},{path:"add-news",component:xE},{path:"view-news/:title",component:lI},{path:"**",component:$E}];var zO="@",$O=(()=>{let e=class e{constructor(i,r,s,o,c){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=V(jb,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-D2JVRZKN.js")).catch(r=>{throw new ve(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new Ig(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let l=c.createRenderer(i,r);o.use(l)}).catch(c=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){nr()},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Ig=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,i,r){this.delegate.insertBefore(e,n,i,r)}removeChild(e,n,i){this.delegate.removeChild(e,n,i)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(e,n,i)),this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(e,n,i)),this.delegate.listen(e,n,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(zO)}};function GE(t="animations"){return Pa("NgAsyncAnimations"),bt([{provide:xa,useFactory:(e,n,i)=>new $O(e,n,i,t),deps:[ye,Ka,re]},{provide:pi,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var HE={production:!0,firebaseConfig:{apiKey:"AIzaSyATgCP-L090V221ytPLZS3IWmrP5mBQpcs",authDomain:"growth-tutorials-saas.firebaseapp.com",projectId:"growth-tutorials-saas",storageBucket:"growth-tutorials-saas.appspot.com",messagingSenderId:"112132007998",appId:"1:112132007998:web:a21348190de17b6e0f896f",measurementId:"G-7170ZK3RHF"}};var WE={providers:[I_(),GE(),dy(()=>hy(HE.firebaseConfig)),tw(()=>nw()),iI(()=>aI()),uv(qE)]};var qO=["*",[["mat-toolbar-row"]]],GO=["*","mat-toolbar-row"],HO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Xe({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0});let t=e;return t})(),KE=(()=>{let e=class e{constructor(i,r,s){this._elementRef=i,this._platform=r,this._document=s}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}};e.\u0275fac=function(r){return new(r||e)(G(_t),G(lt),G(ye))},e.\u0275cmp=fe({type:e,selectors:[["mat-toolbar"]],contentQueries:function(r,s,o){if(r&1&&id(o,HO,5),r&2){let c;Ma(c=Oa())&&(s._toolbarRows=c)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,s){r&2&&(Na(s.color?"mat-"+s.color:""),Rt("mat-toolbar-multiple-rows",s._toolbarRows.length>0)("mat-toolbar-single-row",s._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[me],ngContentSelectors:GO,decls:2,vars:0,template:function(r,s){r&1&&(jn(qO),vt(0),vt(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0});let t=e;return t})();var QE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ae({type:e}),e.\u0275inj=Te({imports:[ft,ft]});let t=e;return t})();function KO(t,e){if(t&1&&(Z(0,"mat-toolbar",3)(1,"a",4)(2,"span"),ce(3),te()()()),t&2){let n=gi(2);Ve(3),qt(n.title)}}function QO(t,e){if(t&1&&(Z(0,"div"),ir(1,KO,4,1,"mat-toolbar",1),Ue(2,"router-outlet"),Z(3,"div",2),ce(4,"GT Gurukul \xA9 2024"),te()()),t&2){let n=gi();Ve(),Mt("ngIf",n.checkhome())}}var YE=(()=>{let e=class e{constructor(i,r,s,o,c){this.customizationService=i,this.titleService=r,this.location=s,this.router=o,this.viewportScroller=c,this.title="",this.themeColor="#3f51b5",this.header="defaultHeader",this.location_path="",this.subdomainChecked=!1,console.log("AppComponent constructor")}ngOnInit(){return _(this,null,function*(){this.router.events.pipe(St(r=>r instanceof Ot)).subscribe(()=>{this.viewportScroller.scrollToPosition([0,0])});let i="";typeof window<"u"&&(i=this.customizationService.getSubdomainFromUrl());try{let r=yield this.customizationService.getCustomization(i);r&&(this.title=r.websiteTitle,this.themeColor=r.themeColor,this.header=r.header,this.applyThemeColor(),this.setTitle(r.websiteTitle),console.log(r.status),r.status==="disabled"||r.status==="pending"?this.redirectToRegistration(i):this.subdomainChecked=!0)}catch(r){r.message==="Subdomain not registered"?this.redirectToRegistration(i):console.error(r)}})}checkhome(){return!(this.location.path()=="/home"||this.location.path()=="/")}applyThemeColor(){let i=document.querySelector("meta[name=theme-color]");if(document.documentElement.style.setProperty("--theme-color",this.themeColor),i)i.setAttribute("content",this.themeColor);else{let r=document.createElement("meta");r.name="theme-color",r.content=this.themeColor,document.getElementsByTagName("head")[0].appendChild(r)}}setTitle(i){this.titleService.setTitle(i)}redirectToRegistration(i){window.location.href=`https://register.growthtutorials.in/register?request=${i}`}redirectToInstitutes(i){window.location.href=`https://register.growthtutorials.in/institutes?request=${i}`}};e.\u0275fac=function(r){return new(r||e)(G(ai),G(Ya),G(pn),G(et),G($a))},e.\u0275cmp=fe({type:e,selectors:[["app-root"]],standalone:!0,features:[me],decls:1,vars:1,consts:[[4,"ngIf"],["class","navbar",4,"ngIf"],[1,"footer"],[1,"navbar"],["href","home"]],template:function(r,s){r&1&&ir(0,QO,5,1,"div",0),r&2&&Mt("ngIf",s.subdomainChecked)},dependencies:[Jd,QE,KE,gn,n_],styles:["[_ngcontent-%COMP%]:root{--theme-color: #3f51b5}.navbar[_ngcontent-%COMP%]{border-top:8px solid var(--theme-color);color:var(--theme-color);padding:20px;font-size:24px;position:sticky;top:0;z-index:1000;transition:opacity .02s;box-shadow:0 1px 2px #0000001a,0 1px 3px 1px #0000001a}.navbar[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:inherit}.logo[_ngcontent-%COMP%]{height:36px;width:36px;border-radius:50%;float:left;padding:0 8px 0 0;margin-top:-2px}.footer[_ngcontent-%COMP%]{text-align:center;background-color:#00000003;padding:8px 0;box-shadow:0 0 1px #0003;border-bottom:16px solid #1b1b1b;margin:360px 0 0}@media screen and (max-width: 425px){.footer[_ngcontent-%COMP%]{margin:100px 0 0}}"]});let t=e;return t})();w_(YE,WE).catch(t=>console.error(t));
